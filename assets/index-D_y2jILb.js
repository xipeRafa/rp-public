(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();var Qm={exports:{}},du={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cE;function LS(){if(cE)return du;cE=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:h,ref:o!==void 0?o:null,props:u}}return du.Fragment=t,du.jsx=e,du.jsxs=e,du}var hE;function US(){return hE||(hE=1,Qm.exports=LS()),Qm.exports}var H=US(),Ym={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fE;function BS(){if(fE)return Rt;fE=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function R(C){return C===null||typeof C!="object"?null:(C=A&&C[A]||C["@@iterator"],typeof C=="function"?C:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,K={};function X(C,tt,pt){this.props=C,this.context=tt,this.refs=K,this.updater=pt||P}X.prototype.isReactComponent={},X.prototype.setState=function(C,tt){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,tt,"setState")},X.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function ht(){}ht.prototype=X.prototype;function ft(C,tt,pt){this.props=C,this.context=tt,this.refs=K,this.updater=pt||P}var ut=ft.prototype=new ht;ut.constructor=ft,Y(ut,X.prototype),ut.isPureReactComponent=!0;var It=Array.isArray,gt={H:null,A:null,T:null,S:null},Et=Object.prototype.hasOwnProperty;function N(C,tt,pt,at,ot,Dt){return pt=Dt.ref,{$$typeof:s,type:C,key:tt,ref:pt!==void 0?pt:null,props:Dt}}function I(C,tt){return N(C.type,tt,void 0,void 0,void 0,C.props)}function w(C){return typeof C=="object"&&C!==null&&C.$$typeof===s}function V(C){var tt={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(pt){return tt[pt]})}var M=/\/+/g;function B(C,tt){return typeof C=="object"&&C!==null&&C.key!=null?V(""+C.key):tt.toString(36)}function D(){}function Ve(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(D,D):(C.status="pending",C.then(function(tt){C.status==="pending"&&(C.status="fulfilled",C.value=tt)},function(tt){C.status==="pending"&&(C.status="rejected",C.reason=tt)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function Ae(C,tt,pt,at,ot){var Dt=typeof C;(Dt==="undefined"||Dt==="boolean")&&(C=null);var St=!1;if(C===null)St=!0;else switch(Dt){case"bigint":case"string":case"number":St=!0;break;case"object":switch(C.$$typeof){case s:case t:St=!0;break;case E:return St=C._init,Ae(St(C._payload),tt,pt,at,ot)}}if(St)return ot=ot(C),St=at===""?"."+B(C,0):at,It(ot)?(pt="",St!=null&&(pt=St.replace(M,"$&/")+"/"),Ae(ot,tt,pt,"",function(he){return he})):ot!=null&&(w(ot)&&(ot=I(ot,pt+(ot.key==null||C&&C.key===ot.key?"":(""+ot.key).replace(M,"$&/")+"/")+St)),tt.push(ot)),1;St=0;var be=at===""?".":at+":";if(It(C))for(var zt=0;zt<C.length;zt++)at=C[zt],Dt=be+B(at,zt),St+=Ae(at,tt,pt,Dt,ot);else if(zt=R(C),typeof zt=="function")for(C=zt.call(C),zt=0;!(at=C.next()).done;)at=at.value,Dt=be+B(at,zt++),St+=Ae(at,tt,pt,Dt,ot);else if(Dt==="object"){if(typeof C.then=="function")return Ae(Ve(C),tt,pt,at,ot);throw tt=String(C),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return St}function rt(C,tt,pt){if(C==null)return C;var at=[],ot=0;return Ae(C,at,"","",function(Dt){return tt.call(pt,Dt,ot++)}),at}function Tt(C){if(C._status===-1){var tt=C._result;tt=tt(),tt.then(function(pt){(C._status===0||C._status===-1)&&(C._status=1,C._result=pt)},function(pt){(C._status===0||C._status===-1)&&(C._status=2,C._result=pt)}),C._status===-1&&(C._status=0,C._result=tt)}if(C._status===1)return C._result.default;throw C._result}var yt=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function Ht(){}return Rt.Children={map:rt,forEach:function(C,tt,pt){rt(C,function(){tt.apply(this,arguments)},pt)},count:function(C){var tt=0;return rt(C,function(){tt++}),tt},toArray:function(C){return rt(C,function(tt){return tt})||[]},only:function(C){if(!w(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Rt.Component=X,Rt.Fragment=e,Rt.Profiler=o,Rt.PureComponent=ft,Rt.StrictMode=r,Rt.Suspense=g,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=gt,Rt.act=function(){throw Error("act(...) is not supported in production builds of React.")},Rt.cache=function(C){return function(){return C.apply(null,arguments)}},Rt.cloneElement=function(C,tt,pt){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var at=Y({},C.props),ot=C.key,Dt=void 0;if(tt!=null)for(St in tt.ref!==void 0&&(Dt=void 0),tt.key!==void 0&&(ot=""+tt.key),tt)!Et.call(tt,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&tt.ref===void 0||(at[St]=tt[St]);var St=arguments.length-2;if(St===1)at.children=pt;else if(1<St){for(var be=Array(St),zt=0;zt<St;zt++)be[zt]=arguments[zt+2];at.children=be}return N(C.type,ot,void 0,void 0,Dt,at)},Rt.createContext=function(C){return C={$$typeof:h,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},Rt.createElement=function(C,tt,pt){var at,ot={},Dt=null;if(tt!=null)for(at in tt.key!==void 0&&(Dt=""+tt.key),tt)Et.call(tt,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(ot[at]=tt[at]);var St=arguments.length-2;if(St===1)ot.children=pt;else if(1<St){for(var be=Array(St),zt=0;zt<St;zt++)be[zt]=arguments[zt+2];ot.children=be}if(C&&C.defaultProps)for(at in St=C.defaultProps,St)ot[at]===void 0&&(ot[at]=St[at]);return N(C,Dt,void 0,void 0,null,ot)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(C){return{$$typeof:m,render:C}},Rt.isValidElement=w,Rt.lazy=function(C){return{$$typeof:E,_payload:{_status:-1,_result:C},_init:Tt}},Rt.memo=function(C,tt){return{$$typeof:_,type:C,compare:tt===void 0?null:tt}},Rt.startTransition=function(C){var tt=gt.T,pt={};gt.T=pt;try{var at=C(),ot=gt.S;ot!==null&&ot(pt,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(Ht,yt)}catch(Dt){yt(Dt)}finally{gt.T=tt}},Rt.unstable_useCacheRefresh=function(){return gt.H.useCacheRefresh()},Rt.use=function(C){return gt.H.use(C)},Rt.useActionState=function(C,tt,pt){return gt.H.useActionState(C,tt,pt)},Rt.useCallback=function(C,tt){return gt.H.useCallback(C,tt)},Rt.useContext=function(C){return gt.H.useContext(C)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(C,tt){return gt.H.useDeferredValue(C,tt)},Rt.useEffect=function(C,tt){return gt.H.useEffect(C,tt)},Rt.useId=function(){return gt.H.useId()},Rt.useImperativeHandle=function(C,tt,pt){return gt.H.useImperativeHandle(C,tt,pt)},Rt.useInsertionEffect=function(C,tt){return gt.H.useInsertionEffect(C,tt)},Rt.useLayoutEffect=function(C,tt){return gt.H.useLayoutEffect(C,tt)},Rt.useMemo=function(C,tt){return gt.H.useMemo(C,tt)},Rt.useOptimistic=function(C,tt){return gt.H.useOptimistic(C,tt)},Rt.useReducer=function(C,tt,pt){return gt.H.useReducer(C,tt,pt)},Rt.useRef=function(C){return gt.H.useRef(C)},Rt.useState=function(C){return gt.H.useState(C)},Rt.useSyncExternalStore=function(C,tt,pt){return gt.H.useSyncExternalStore(C,tt,pt)},Rt.useTransition=function(){return gt.H.useTransition()},Rt.version="19.0.0",Rt}var dE;function Fg(){return dE||(dE=1,Ym.exports=BS()),Ym.exports}var Nh=Fg(),$m={exports:{}},mu={},Xm={exports:{}},Zm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mE;function zS(){return mE||(mE=1,function(s){function t(rt,Tt){var yt=rt.length;rt.push(Tt);t:for(;0<yt;){var Ht=yt-1>>>1,C=rt[Ht];if(0<o(C,Tt))rt[Ht]=Tt,rt[yt]=C,yt=Ht;else break t}}function e(rt){return rt.length===0?null:rt[0]}function r(rt){if(rt.length===0)return null;var Tt=rt[0],yt=rt.pop();if(yt!==Tt){rt[0]=yt;t:for(var Ht=0,C=rt.length,tt=C>>>1;Ht<tt;){var pt=2*(Ht+1)-1,at=rt[pt],ot=pt+1,Dt=rt[ot];if(0>o(at,yt))ot<C&&0>o(Dt,at)?(rt[Ht]=Dt,rt[ot]=yt,Ht=ot):(rt[Ht]=at,rt[pt]=yt,Ht=pt);else if(ot<C&&0>o(Dt,yt))rt[Ht]=Dt,rt[ot]=yt,Ht=ot;else break t}}return Tt}function o(rt,Tt){var yt=rt.sortIndex-Tt.sortIndex;return yt!==0?yt:rt.id-Tt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],_=[],E=1,A=null,R=3,P=!1,Y=!1,K=!1,X=typeof setTimeout=="function"?setTimeout:null,ht=typeof clearTimeout=="function"?clearTimeout:null,ft=typeof setImmediate<"u"?setImmediate:null;function ut(rt){for(var Tt=e(_);Tt!==null;){if(Tt.callback===null)r(_);else if(Tt.startTime<=rt)r(_),Tt.sortIndex=Tt.expirationTime,t(g,Tt);else break;Tt=e(_)}}function It(rt){if(K=!1,ut(rt),!Y)if(e(g)!==null)Y=!0,Ve();else{var Tt=e(_);Tt!==null&&Ae(It,Tt.startTime-rt)}}var gt=!1,Et=-1,N=5,I=-1;function w(){return!(s.unstable_now()-I<N)}function V(){if(gt){var rt=s.unstable_now();I=rt;var Tt=!0;try{t:{Y=!1,K&&(K=!1,ht(Et),Et=-1),P=!0;var yt=R;try{e:{for(ut(rt),A=e(g);A!==null&&!(A.expirationTime>rt&&w());){var Ht=A.callback;if(typeof Ht=="function"){A.callback=null,R=A.priorityLevel;var C=Ht(A.expirationTime<=rt);if(rt=s.unstable_now(),typeof C=="function"){A.callback=C,ut(rt),Tt=!0;break e}A===e(g)&&r(g),ut(rt)}else r(g);A=e(g)}if(A!==null)Tt=!0;else{var tt=e(_);tt!==null&&Ae(It,tt.startTime-rt),Tt=!1}}break t}finally{A=null,R=yt,P=!1}Tt=void 0}}finally{Tt?M():gt=!1}}}var M;if(typeof ft=="function")M=function(){ft(V)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,D=B.port2;B.port1.onmessage=V,M=function(){D.postMessage(null)}}else M=function(){X(V,0)};function Ve(){gt||(gt=!0,M())}function Ae(rt,Tt){Et=X(function(){rt(s.unstable_now())},Tt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(rt){rt.callback=null},s.unstable_continueExecution=function(){Y||P||(Y=!0,Ve())},s.unstable_forceFrameRate=function(rt){0>rt||125<rt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<rt?Math.floor(1e3/rt):5},s.unstable_getCurrentPriorityLevel=function(){return R},s.unstable_getFirstCallbackNode=function(){return e(g)},s.unstable_next=function(rt){switch(R){case 1:case 2:case 3:var Tt=3;break;default:Tt=R}var yt=R;R=Tt;try{return rt()}finally{R=yt}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(rt,Tt){switch(rt){case 1:case 2:case 3:case 4:case 5:break;default:rt=3}var yt=R;R=rt;try{return Tt()}finally{R=yt}},s.unstable_scheduleCallback=function(rt,Tt,yt){var Ht=s.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?Ht+yt:Ht):yt=Ht,rt){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=yt+C,rt={id:E++,callback:Tt,priorityLevel:rt,startTime:yt,expirationTime:C,sortIndex:-1},yt>Ht?(rt.sortIndex=yt,t(_,rt),e(g)===null&&rt===e(_)&&(K?(ht(Et),Et=-1):K=!0,Ae(It,yt-Ht))):(rt.sortIndex=C,t(g,rt),Y||P||(Y=!0,Ve())),rt},s.unstable_shouldYield=w,s.unstable_wrapCallback=function(rt){var Tt=R;return function(){var yt=R;R=Tt;try{return rt.apply(this,arguments)}finally{R=yt}}}}(Zm)),Zm}var gE;function qS(){return gE||(gE=1,Xm.exports=zS()),Xm.exports}var Wm={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pE;function jS(){if(pE)return en;pE=1;var s=Fg();function t(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)_+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,_,E){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:g,containerInfo:_,implementation:E}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,en.createPortal=function(g,_){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return u(g,_,null,E)},en.flushSync=function(g){var _=h.T,E=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=_,r.p=E,r.d.f()}},en.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(g,_))},en.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},en.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var E=_.as,A=m(E,_.crossOrigin),R=typeof _.integrity=="string"?_.integrity:void 0,P=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;E==="style"?r.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:A,integrity:R,fetchPriority:P}):E==="script"&&r.d.X(g,{crossOrigin:A,integrity:R,fetchPriority:P,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},en.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var E=m(_.as,_.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(g)},en.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var E=_.as,A=m(E,_.crossOrigin);r.d.L(g,E,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},en.preloadModule=function(g,_){if(typeof g=="string")if(_){var E=m(_.as,_.crossOrigin);r.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(g)},en.requestFormReset=function(g){r.d.r(g)},en.unstable_batchedUpdates=function(g,_){return g(_)},en.useFormState=function(g,_,E){return h.H.useFormState(g,_,E)},en.useFormStatus=function(){return h.H.useHostTransitionStatus()},en.version="19.0.0",en}var _E;function FS(){if(_E)return Wm.exports;_E=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Wm.exports=jS(),Wm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE;function GS(){if(yE)return mu;yE=1;var s=qS(),t=Fg(),e=FS();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}var u=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),P=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),ht=Symbol.for("react.memo"),ft=Symbol.for("react.lazy"),ut=Symbol.for("react.offscreen"),It=Symbol.for("react.memo_cache_sentinel"),gt=Symbol.iterator;function Et(n){return n===null||typeof n!="object"?null:(n=gt&&n[gt]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function I(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case g:return"Fragment";case m:return"Portal";case E:return"Profiler";case _:return"StrictMode";case K:return"Suspense";case X:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case P:return(n.displayName||"Context")+".Provider";case R:return(n._context.displayName||"Context")+".Consumer";case Y:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ht:return i=n.displayName||null,i!==null?i:I(n.type)||"Memo";case ft:i=n._payload,n=n._init;try{return I(n(i))}catch{}}return null}var w=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=Object.assign,M,B;function D(n){if(M===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);M=i&&i[1]||"",B=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+M+n+B}var Ve=!1;function Ae(n,i){if(!n||Ve)return"";Ve=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(G){var q=G}Reflect.construct(n,[],W)}else{try{W.call()}catch(G){q=G}n.call(W.prototype)}}else{try{throw Error()}catch(G){q=G}(W=n())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(G){if(G&&q&&typeof G.stack=="string")return[G.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],T=d[1];if(v&&T){var S=v.split(`
`),O=T.split(`
`);for(f=l=0;l<S.length&&!S[l].includes("DetermineComponentFrameRoot");)l++;for(;f<O.length&&!O[f].includes("DetermineComponentFrameRoot");)f++;if(l===S.length||f===O.length)for(l=S.length-1,f=O.length-1;1<=l&&0<=f&&S[l]!==O[f];)f--;for(;1<=l&&0<=f;l--,f--)if(S[l]!==O[f]){if(l!==1||f!==1)do if(l--,f--,0>f||S[l]!==O[f]){var Q=`
`+S[l].replace(" at new "," at ");return n.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",n.displayName)),Q}while(1<=l&&0<=f);break}}}finally{Ve=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?D(a):""}function rt(n){switch(n.tag){case 26:case 27:case 5:return D(n.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 15:return n=Ae(n.type,!1),n;case 11:return n=Ae(n.type.render,!1),n;case 1:return n=Ae(n.type,!0),n;default:return""}}function Tt(n){try{var i="";do i+=rt(n),n=n.return;while(n);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function yt(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,i.flags&4098&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Ht(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function C(n){if(yt(n)!==n)throw Error(r(188))}function tt(n){var i=n.alternate;if(!i){if(i=yt(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return C(f),n;if(d===l)return C(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var v=!1,T=f.child;T;){if(T===a){v=!0,a=f,l=d;break}if(T===l){v=!0,l=f,a=d;break}T=T.sibling}if(!v){for(T=d.child;T;){if(T===a){v=!0,a=d,l=f;break}if(T===l){v=!0,l=d,a=f;break}T=T.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function pt(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=pt(n),i!==null)return i;n=n.sibling}return null}var at=Array.isArray,ot=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Dt={pending:!1,data:null,method:null,action:null},St=[],be=-1;function zt(n){return{current:n}}function he(n){0>be||(n.current=St[be],St[be]=null,be--)}function Qt(n,i){be++,St[be]=n.current,n.current=i}var on=zt(null),Vi=zt(null),Nn=zt(null),fr=zt(null);function dr(n,i){switch(Qt(Nn,i),Qt(Vi,n),Qt(on,null),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)&&(i=i.namespaceURI)?Bv(i):0;break;default:if(n=n===8?i.parentNode:i,i=n.tagName,n=n.namespaceURI)n=Bv(n),i=zv(n,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}he(on),Qt(on,i)}function Ci(){he(on),he(Vi),he(Nn)}function ll(n){n.memoizedState!==null&&Qt(fr,n);var i=on.current,a=zv(i,n.type);i!==a&&(Qt(Vi,n),Qt(on,a))}function Da(n){Vi.current===n&&(he(on),he(Vi)),fr.current===n&&(he(fr),lu._currentValue=Dt)}var Va=Object.prototype.hasOwnProperty,As=s.unstable_scheduleCallback,Ca=s.unstable_cancelCallback,$f=s.unstable_shouldYield,ul=s.unstable_requestPaint,_n=s.unstable_now,hc=s.unstable_getCurrentPriorityLevel,Ce=s.unstable_ImmediatePriority,Le=s.unstable_UserBlockingPriority,xi=s.unstable_NormalPriority,fc=s.unstable_LowPriority,cl=s.unstable_IdlePriority,Xf=s.log,bs=s.unstable_setDisableYieldValue,mr=null,Je=null;function hl(n){if(Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(mr,n,void 0,(n.current.flags&128)===128)}catch{}}function ri(n){if(typeof Xf=="function"&&bs(n),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(mr,n)}catch{}}var ln=Math.clz32?Math.clz32:mc,fl=Math.log,dc=Math.LN2;function mc(n){return n>>>=0,n===0?32:31-(fl(n)/dc|0)|0}var si=128,gr=4194304;function Zn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function On(n,i){var a=n.pendingLanes;if(a===0)return 0;var l=0,f=n.suspendedLanes,d=n.pingedLanes,v=n.warmLanes;n=n.finishedLanes!==0;var T=a&134217727;return T!==0?(a=T&~f,a!==0?l=Zn(a):(d&=T,d!==0?l=Zn(d):n||(v=T&~v,v!==0&&(l=Zn(v))))):(T=a&~f,T!==0?l=Zn(T):d!==0?l=Zn(d):n||(v=a&~v,v!==0&&(l=Zn(v)))),l===0?0:i!==0&&i!==l&&!(i&f)&&(f=l&-l,v=i&-i,f>=v||f===32&&(v&4194176)!==0)?i:l}function pr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function xa(n,i){switch(n){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dl(){var n=si;return si<<=1,!(si&4194176)&&(si=128),n}function _r(){var n=gr;return gr<<=1,!(gr&62914560)&&(gr=4194304),n}function Na(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function _e(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function gc(n,i,a,l,f,d){var v=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var T=n.entanglements,S=n.expirationTimes,O=n.hiddenUpdates;for(a=v&~a;0<a;){var Q=31-ln(a),W=1<<Q;T[Q]=0,S[Q]=-1;var q=O[Q];if(q!==null)for(O[Q]=null,Q=0;Q<q.length;Q++){var G=q[Q];G!==null&&(G.lane&=-536870913)}a&=~W}l!==0&&yr(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(v&~i))}function yr(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-ln(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194218}function vr(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-ln(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function pc(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function _c(){var n=ot.p;return n!==0?n:(n=window.event,n===void 0?32:rE(n.type))}function Er(n,i){var a=ot.p;try{return ot.p=n,i()}finally{ot.p=a}}var ai=Math.random().toString(36).slice(2),Ue="__reactFiber$"+ai,xe="__reactProps$"+ai,Ni="__reactContainer$"+ai,ws="__reactEvents$"+ai,Oa="__reactListeners$"+ai,oi="__reactHandles$"+ai,ml="__reactResources$"+ai,Tr="__reactMarker$"+ai;function Ss(n){delete n[Ue],delete n[xe],delete n[ws],delete n[Oa],delete n[oi]}function Wn(n){var i=n[Ue];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Ni]||a[Ue]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Fv(n);n!==null;){if(a=n[Ue])return a;n=Fv(n)}return i}n=a,a=n.parentNode}return null}function Oi(n){if(n=n[Ue]||n[Ni]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function Ar(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function br(n){var i=n[ml];return i||(i=n[ml]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function oe(n){n[Tr]=!0}var gl=new Set,Ma={};function bn(n,i){yn(n,i),yn(n+"Capture",i)}function yn(n,i){for(Ma[n]=i,n=0;n<i.length;n++)gl.add(i[n])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pl={},_l={};function yc(n){return Va.call(_l,n)?!0:Va.call(pl,n)?!1:Zf.test(n)?_l[n]=!0:(pl[n]=!0,!1)}function wr(n,i,a){if(yc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function Sr(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Mn(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function un(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function vc(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Wf(n){var i=vc(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),l=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,d=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Rs(n){n._valueTracker||(n._valueTracker=Wf(n))}function yl(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=vc(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function Pa(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Mi=/[\n"\\]/g;function fe(n){return n.replace(Mi,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Rr(n,i,a,l,f,d,v,T){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),i!=null?v==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+un(i)):n.value!==""+un(i)&&(n.value=""+un(i)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),i!=null?ka(n,v,un(i)):a!=null?ka(n,v,un(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+un(T):n.removeAttribute("name")}function Is(n,i,a,l,f,d,v,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+un(a):"",i=i!=null?""+un(i):a,T||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=T?n.checked:!!l,n.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v)}function ka(n,i,a){i==="number"&&Pa(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function qt(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+un(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Ds(n,i,a){if(i!=null&&(i=""+un(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+un(a):""}function Ir(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(at(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=un(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Pn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Jf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vl(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Jf.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function Ec(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&vl(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&vl(n,d,i[d])}function El(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var td=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ed=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function li(n){return ed.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var kn=null;function La(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Pi=null,ki=null;function Li(n){var i=Oi(n);if(i&&(n=i.stateNode)){var a=n[xe]||null;t:switch(n=i.stateNode,i.type){case"input":if(Rr(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fe(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[xe]||null;if(!f)throw Error(r(90));Rr(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&yl(l)}break t;case"textarea":Ds(n,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&qt(n,!!a.multiple,i,!1)}}}var Tl=!1;function Tc(n,i,a){if(Tl)return n(i,a);Tl=!0;try{var l=n(i);return l}finally{if(Tl=!1,(Pi!==null||ki!==null)&&(fh(),Pi&&(i=Pi,n=ki,ki=Pi=null,Li(i),n)))for(i=0;i<n.length;i++)Li(n[i])}}function Vs(n,i){var a=n.stateNode;if(a===null)return null;var l=a[xe]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Ln=!1;if(wn)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){Ln=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{Ln=!1}var ui=null,Dr=null,Ui=null;function Al(){if(Ui)return Ui;var n,i=Dr,a=i.length,l,f="value"in ui?ui.value:ui.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var v=a-n;for(l=1;l<=v&&i[a-l]===f[d-l];l++);return Ui=f.slice(n,1<l?1-l:void 0)}function ci(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function hi(){return!0}function bl(){return!1}function Be(n){function i(a,l,f,d,v){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?hi:bl,this.isPropagationStopped=bl,this}return V(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=hi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=hi)},persist:function(){},isPersistent:hi}),i}var Kt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=Be(Kt),xs=V({},Kt,{view:0,detail:0}),Ac=Be(xs),Ba,za,fi,Ns=V({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==fi&&(fi&&n.type==="mousemove"?(Ba=n.screenX-fi.screenX,za=n.screenY-fi.screenY):za=Ba=0,fi=n),Ba)},movementY:function(n){return"movementY"in n?n.movementY:za}}),Un=Be(Ns),bc=V({},Ns,{dataTransfer:0}),nd=Be(bc),Os=V({},xs,{relatedTarget:0}),qa=Be(Os),wl=V({},Kt,{animationName:0,elapsedTime:0,pseudoElement:0}),ja=Be(wl),wc=V({},Kt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Fa=Be(wc),id=V({},Kt,{data:0}),Sl=Be(id),Ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Rc[n])?!!i[n]:!1}function Ps(){return Rl}var Ic=V({},xs,{key:function(n){if(n.key){var i=Ms[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ci(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Sc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(n){return n.type==="keypress"?ci(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ci(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ga=Be(Ic),Dc=V({},Ns,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Il=Be(Dc),Bi=V({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),Vc=Be(Bi),Cc=V({},Kt,{propertyName:0,elapsedTime:0,pseudoElement:0}),xc=Be(Cc),Nc=V({},Ns,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ha=Be(Nc),cn=V({},Kt,{newState:0,oldState:0}),Oc=Be(cn),Mc=[9,13,27,32],di=wn&&"CompositionEvent"in window,c=null;wn&&"documentMode"in document&&(c=document.documentMode);var p=wn&&"TextEvent"in window&&!c,y=wn&&(!di||c&&8<c&&11>=c),b=" ",L=!1;function F(n,i){switch(n){case"keyup":return Mc.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function et(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var kt=!1;function Ne(n,i){switch(n){case"compositionend":return et(i);case"keypress":return i.which!==32?null:(L=!0,b);case"textInput":return n=i.data,n===b&&L?null:n;default:return null}}function Lt(n,i){if(kt)return n==="compositionend"||!di&&F(n,i)?(n=Al(),Ui=Dr=ui=null,kt=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return y&&i.locale!=="ko"?null:i.data;default:return null}}var ze={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oe(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!ze[n.type]:i==="textarea"}function zi(n,i,a,l){Pi?ki?ki.push(l):ki=[l]:Pi=l,i=_h(i,"onChange"),0<i.length&&(a=new Ua("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Ke=null,mi=null;function Dl(n){Mv(n,0)}function Pc(n){var i=Ar(n);if(yl(i))return n}function u_(n,i){if(n==="change")return i}var c_=!1;if(wn){var rd;if(wn){var sd="oninput"in document;if(!sd){var h_=document.createElement("div");h_.setAttribute("oninput","return;"),sd=typeof h_.oninput=="function"}rd=sd}else rd=!1;c_=rd&&(!document.documentMode||9<document.documentMode)}function f_(){Ke&&(Ke.detachEvent("onpropertychange",d_),mi=Ke=null)}function d_(n){if(n.propertyName==="value"&&Pc(mi)){var i=[];zi(i,mi,n,La(n)),Tc(Dl,i)}}function dw(n,i,a){n==="focusin"?(f_(),Ke=i,mi=a,Ke.attachEvent("onpropertychange",d_)):n==="focusout"&&f_()}function mw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Pc(mi)}function gw(n,i){if(n==="click")return Pc(i)}function pw(n,i){if(n==="input"||n==="change")return Pc(i)}function _w(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Sn=typeof Object.is=="function"?Object.is:_w;function Vl(n,i){if(Sn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Va.call(i,f)||!Sn(n[f],i[f]))return!1}return!0}function m_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function g_(n,i){var a=m_(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=m_(a)}}function p_(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?p_(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function __(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Pa(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Pa(n.document)}return i}function ad(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function yw(n,i){var a=__(i);i=n.focusedElem;var l=n.selectionRange;if(a!==i&&i&&i.ownerDocument&&p_(i.ownerDocument.documentElement,i)){if(l!==null&&ad(i)){if(n=l.start,a=l.end,a===void 0&&(a=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(a,i.value.length);else if(a=(n=i.ownerDocument||document)&&n.defaultView||window,a.getSelection){a=a.getSelection();var f=i.textContent.length,d=Math.min(l.start,f);l=l.end===void 0?d:Math.min(l.end,f),!a.extend&&d>l&&(f=l,l=d,d=f),f=g_(i,d);var v=g_(i,l);f&&v&&(a.rangeCount!==1||a.anchorNode!==f.node||a.anchorOffset!==f.offset||a.focusNode!==v.node||a.focusOffset!==v.offset)&&(n=n.createRange(),n.setStart(f.node,f.offset),a.removeAllRanges(),d>l?(a.addRange(n),a.extend(v.node,v.offset)):(n.setEnd(v.node,v.offset),a.addRange(n)))}}for(n=[],a=i;a=a.parentNode;)a.nodeType===1&&n.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)a=n[i],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var vw=wn&&"documentMode"in document&&11>=document.documentMode,Ka=null,od=null,Cl=null,ld=!1;function y_(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ld||Ka==null||Ka!==Pa(l)||(l=Ka,"selectionStart"in l&&ad(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Cl&&Vl(Cl,l)||(Cl=l,l=_h(od,"onSelect"),0<l.length&&(i=new Ua("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Ka)))}function ks(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Qa={animationend:ks("Animation","AnimationEnd"),animationiteration:ks("Animation","AnimationIteration"),animationstart:ks("Animation","AnimationStart"),transitionrun:ks("Transition","TransitionRun"),transitionstart:ks("Transition","TransitionStart"),transitioncancel:ks("Transition","TransitionCancel"),transitionend:ks("Transition","TransitionEnd")},ud={},v_={};wn&&(v_=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function Ls(n){if(ud[n])return ud[n];if(!Qa[n])return n;var i=Qa[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in v_)return ud[n]=i[a];return n}var E_=Ls("animationend"),T_=Ls("animationiteration"),A_=Ls("animationstart"),Ew=Ls("transitionrun"),Tw=Ls("transitionstart"),Aw=Ls("transitioncancel"),b_=Ls("transitionend"),w_=new Map,S_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Jn(n,i){w_.set(n,i),bn(i,[n])}var Bn=[],Ya=0,cd=0;function kc(){for(var n=Ya,i=cd=Ya=0;i<n;){var a=Bn[i];Bn[i++]=null;var l=Bn[i];Bn[i++]=null;var f=Bn[i];Bn[i++]=null;var d=Bn[i];if(Bn[i++]=null,l!==null&&f!==null){var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}d!==0&&R_(a,f,d)}}function Lc(n,i,a,l){Bn[Ya++]=n,Bn[Ya++]=i,Bn[Ya++]=a,Bn[Ya++]=l,cd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function hd(n,i,a,l){return Lc(n,i,a,l),Uc(n)}function Vr(n,i){return Lc(n,null,null,i),Uc(n)}function R_(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;f&&i!==null&&n.tag===3&&(d=n.stateNode,f=31-ln(a),d=d.hiddenUpdates,n=d[f],n===null?d[f]=[i]:n.push(i),i.lane=a|536870912)}function Uc(n){if(50<eu)throw eu=0,_m=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var $a={},I_=new WeakMap;function zn(n,i){if(typeof n=="object"&&n!==null){var a=I_.get(n);return a!==void 0?a:(i={value:n,source:i,stack:Tt(i)},I_.set(n,i),i)}return{value:n,source:i,stack:Tt(i)}}var Xa=[],Za=0,Bc=null,zc=0,qn=[],jn=0,Us=null,qi=1,ji="";function Bs(n,i){Xa[Za++]=zc,Xa[Za++]=Bc,Bc=n,zc=i}function D_(n,i,a){qn[jn++]=qi,qn[jn++]=ji,qn[jn++]=Us,Us=n;var l=qi;n=ji;var f=32-ln(l)-1;l&=~(1<<f),a+=1;var d=32-ln(i)+f;if(30<d){var v=f-f%5;d=(l&(1<<v)-1).toString(32),l>>=v,f-=v,qi=1<<32-ln(i)+f|a<<f|l,ji=d+n}else qi=1<<d|a<<f|l,ji=n}function fd(n){n.return!==null&&(Bs(n,1),D_(n,1,0))}function dd(n){for(;n===Bc;)Bc=Xa[--Za],Xa[Za]=null,zc=Xa[--Za],Xa[Za]=null;for(;n===Us;)Us=qn[--jn],qn[jn]=null,ji=qn[--jn],qn[jn]=null,qi=qn[--jn],qn[jn]=null}var hn=null,Qe=null,jt=!1,ti=null,gi=!1,md=Error(r(519));function zs(n){var i=Error(r(418,""));throw Ol(zn(i,n)),md}function V_(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Ue]=n,i[xe]=l,a){case"dialog":Mt("cancel",i),Mt("close",i);break;case"iframe":case"object":case"embed":Mt("load",i);break;case"video":case"audio":for(a=0;a<iu.length;a++)Mt(iu[a],i);break;case"source":Mt("error",i);break;case"img":case"image":case"link":Mt("error",i),Mt("load",i);break;case"details":Mt("toggle",i);break;case"input":Mt("invalid",i),Is(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Rs(i);break;case"select":Mt("invalid",i);break;case"textarea":Mt("invalid",i),Ir(i,l.value,l.defaultValue,l.children),Rs(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Uv(i.textContent,a)?(l.popover!=null&&(Mt("beforetoggle",i),Mt("toggle",i)),l.onScroll!=null&&Mt("scroll",i),l.onScrollEnd!=null&&Mt("scrollend",i),l.onClick!=null&&(i.onclick=yh),i=!0):i=!1,i||zs(n)}function C_(n){for(hn=n.return;hn;)switch(hn.tag){case 3:case 27:gi=!0;return;case 5:case 13:gi=!1;return;default:hn=hn.return}}function xl(n){if(n!==hn)return!1;if(!jt)return C_(n),jt=!0,!1;var i=!1,a;if((a=n.tag!==3&&n.tag!==27)&&((a=n.tag===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Mm(n.type,n.memoizedProps)),a=!a),a&&(i=!0),i&&Qe&&zs(n),C_(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));t:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(i===0){Qe=ni(n.nextSibling);break t}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;n=n.nextSibling}Qe=null}}else Qe=hn?ni(n.stateNode.nextSibling):null;return!0}function Nl(){Qe=hn=null,jt=!1}function Ol(n){ti===null?ti=[n]:ti.push(n)}var Ml=Error(r(460)),x_=Error(r(474)),gd={then:function(){}};function N_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function qc(){}function O_(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(qc,qc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,n===Ml?Error(r(483)):n;default:if(typeof i.status=="string")i.then(qc,qc);else{if(n=Jt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,n===Ml?Error(r(483)):n}throw Pl=i,Ml}}var Pl=null;function M_(){if(Pl===null)throw Error(r(459));var n=Pl;return Pl=null,n}var Wa=null,kl=0;function jc(n){var i=kl;return kl+=1,Wa===null&&(Wa=[]),O_(Wa,n,i)}function Ll(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Fc(n,i){throw i.$$typeof===u?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function P_(n){var i=n._init;return i(n._payload)}function k_(n){function i(k,x){if(n){var z=k.deletions;z===null?(k.deletions=[x],k.flags|=16):z.push(x)}}function a(k,x){if(!n)return null;for(;x!==null;)i(k,x),x=x.sibling;return null}function l(k){for(var x=new Map;k!==null;)k.key!==null?x.set(k.key,k):x.set(k.index,k),k=k.sibling;return x}function f(k,x){return k=qr(k,x),k.index=0,k.sibling=null,k}function d(k,x,z){return k.index=z,n?(z=k.alternate,z!==null?(z=z.index,z<x?(k.flags|=33554434,x):z):(k.flags|=33554434,x)):(k.flags|=1048576,x)}function v(k){return n&&k.alternate===null&&(k.flags|=33554434),k}function T(k,x,z,$){return x===null||x.tag!==6?(x=um(z,k.mode,$),x.return=k,x):(x=f(x,z),x.return=k,x)}function S(k,x,z,$){var lt=z.type;return lt===g?Q(k,x,z.props.children,$,z.key):x!==null&&(x.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===ft&&P_(lt)===x.type)?(x=f(x,z.props),Ll(x,z),x.return=k,x):(x=oh(z.type,z.key,z.props,null,k.mode,$),Ll(x,z),x.return=k,x)}function O(k,x,z,$){return x===null||x.tag!==4||x.stateNode.containerInfo!==z.containerInfo||x.stateNode.implementation!==z.implementation?(x=cm(z,k.mode,$),x.return=k,x):(x=f(x,z.children||[]),x.return=k,x)}function Q(k,x,z,$,lt){return x===null||x.tag!==7?(x=Xs(z,k.mode,$,lt),x.return=k,x):(x=f(x,z),x.return=k,x)}function W(k,x,z){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=um(""+x,k.mode,z),x.return=k,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case h:return z=oh(x.type,x.key,x.props,null,k.mode,z),Ll(z,x),z.return=k,z;case m:return x=cm(x,k.mode,z),x.return=k,x;case ft:var $=x._init;return x=$(x._payload),W(k,x,z)}if(at(x)||Et(x))return x=Xs(x,k.mode,z,null),x.return=k,x;if(typeof x.then=="function")return W(k,jc(x),z);if(x.$$typeof===P)return W(k,rh(k,x),z);Fc(k,x)}return null}function q(k,x,z,$){var lt=x!==null?x.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return lt!==null?null:T(k,x,""+z,$);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case h:return z.key===lt?S(k,x,z,$):null;case m:return z.key===lt?O(k,x,z,$):null;case ft:return lt=z._init,z=lt(z._payload),q(k,x,z,$)}if(at(z)||Et(z))return lt!==null?null:Q(k,x,z,$,null);if(typeof z.then=="function")return q(k,x,jc(z),$);if(z.$$typeof===P)return q(k,x,rh(k,z),$);Fc(k,z)}return null}function G(k,x,z,$,lt){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return k=k.get(z)||null,T(x,k,""+$,lt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case h:return k=k.get($.key===null?z:$.key)||null,S(x,k,$,lt);case m:return k=k.get($.key===null?z:$.key)||null,O(x,k,$,lt);case ft:var Ct=$._init;return $=Ct($._payload),G(k,x,z,$,lt)}if(at($)||Et($))return k=k.get(z)||null,Q(x,k,$,lt,null);if(typeof $.then=="function")return G(k,x,z,jc($),lt);if($.$$typeof===P)return G(k,x,z,rh(x,$),lt);Fc(x,$)}return null}function dt(k,x,z,$){for(var lt=null,Ct=null,_t=x,vt=x=0,Fe=null;_t!==null&&vt<z.length;vt++){_t.index>vt?(Fe=_t,_t=null):Fe=_t.sibling;var Ft=q(k,_t,z[vt],$);if(Ft===null){_t===null&&(_t=Fe);break}n&&_t&&Ft.alternate===null&&i(k,_t),x=d(Ft,x,vt),Ct===null?lt=Ft:Ct.sibling=Ft,Ct=Ft,_t=Fe}if(vt===z.length)return a(k,_t),jt&&Bs(k,vt),lt;if(_t===null){for(;vt<z.length;vt++)_t=W(k,z[vt],$),_t!==null&&(x=d(_t,x,vt),Ct===null?lt=_t:Ct.sibling=_t,Ct=_t);return jt&&Bs(k,vt),lt}for(_t=l(_t);vt<z.length;vt++)Fe=G(_t,k,vt,z[vt],$),Fe!==null&&(n&&Fe.alternate!==null&&_t.delete(Fe.key===null?vt:Fe.key),x=d(Fe,x,vt),Ct===null?lt=Fe:Ct.sibling=Fe,Ct=Fe);return n&&_t.forEach(function(Yr){return i(k,Yr)}),jt&&Bs(k,vt),lt}function bt(k,x,z,$){if(z==null)throw Error(r(151));for(var lt=null,Ct=null,_t=x,vt=x=0,Fe=null,Ft=z.next();_t!==null&&!Ft.done;vt++,Ft=z.next()){_t.index>vt?(Fe=_t,_t=null):Fe=_t.sibling;var Yr=q(k,_t,Ft.value,$);if(Yr===null){_t===null&&(_t=Fe);break}n&&_t&&Yr.alternate===null&&i(k,_t),x=d(Yr,x,vt),Ct===null?lt=Yr:Ct.sibling=Yr,Ct=Yr,_t=Fe}if(Ft.done)return a(k,_t),jt&&Bs(k,vt),lt;if(_t===null){for(;!Ft.done;vt++,Ft=z.next())Ft=W(k,Ft.value,$),Ft!==null&&(x=d(Ft,x,vt),Ct===null?lt=Ft:Ct.sibling=Ft,Ct=Ft);return jt&&Bs(k,vt),lt}for(_t=l(_t);!Ft.done;vt++,Ft=z.next())Ft=G(_t,k,vt,Ft.value,$),Ft!==null&&(n&&Ft.alternate!==null&&_t.delete(Ft.key===null?vt:Ft.key),x=d(Ft,x,vt),Ct===null?lt=Ft:Ct.sibling=Ft,Ct=Ft);return n&&_t.forEach(function(kS){return i(k,kS)}),jt&&Bs(k,vt),lt}function ge(k,x,z,$){if(typeof z=="object"&&z!==null&&z.type===g&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case h:t:{for(var lt=z.key;x!==null;){if(x.key===lt){if(lt=z.type,lt===g){if(x.tag===7){a(k,x.sibling),$=f(x,z.props.children),$.return=k,k=$;break t}}else if(x.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===ft&&P_(lt)===x.type){a(k,x.sibling),$=f(x,z.props),Ll($,z),$.return=k,k=$;break t}a(k,x);break}else i(k,x);x=x.sibling}z.type===g?($=Xs(z.props.children,k.mode,$,z.key),$.return=k,k=$):($=oh(z.type,z.key,z.props,null,k.mode,$),Ll($,z),$.return=k,k=$)}return v(k);case m:t:{for(lt=z.key;x!==null;){if(x.key===lt)if(x.tag===4&&x.stateNode.containerInfo===z.containerInfo&&x.stateNode.implementation===z.implementation){a(k,x.sibling),$=f(x,z.children||[]),$.return=k,k=$;break t}else{a(k,x);break}else i(k,x);x=x.sibling}$=cm(z,k.mode,$),$.return=k,k=$}return v(k);case ft:return lt=z._init,z=lt(z._payload),ge(k,x,z,$)}if(at(z))return dt(k,x,z,$);if(Et(z)){if(lt=Et(z),typeof lt!="function")throw Error(r(150));return z=lt.call(z),bt(k,x,z,$)}if(typeof z.then=="function")return ge(k,x,jc(z),$);if(z.$$typeof===P)return ge(k,x,rh(k,z),$);Fc(k,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,x!==null&&x.tag===6?(a(k,x.sibling),$=f(x,z),$.return=k,k=$):(a(k,x),$=um(z,k.mode,$),$.return=k,k=$),v(k)):a(k,x)}return function(k,x,z,$){try{kl=0;var lt=ge(k,x,z,$);return Wa=null,lt}catch(_t){if(_t===Ml)throw _t;var Ct=Kn(29,_t,null,k.mode);return Ct.lanes=$,Ct.return=k,Ct}finally{}}}var qs=k_(!0),L_=k_(!1),Ja=zt(null),Gc=zt(0);function U_(n,i){n=Ji,Qt(Gc,n),Qt(Ja,i),Ji=n|i.baseLanes}function pd(){Qt(Gc,Ji),Qt(Ja,Ja.current)}function _d(){Ji=Gc.current,he(Ja),he(Gc)}var Fn=zt(null),pi=null;function Cr(n){var i=n.alternate;Qt(Me,Me.current&1),Qt(Fn,n),pi===null&&(i===null||Ja.current!==null||i.memoizedState!==null)&&(pi=n)}function B_(n){if(n.tag===22){if(Qt(Me,Me.current),Qt(Fn,n),pi===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(pi=n)}}else xr()}function xr(){Qt(Me,Me.current),Qt(Fn,Fn.current)}function Fi(n){he(Fn),pi===n&&(pi=null),he(Me)}var Me=zt(0);function Hc(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var bw=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},ww=s.unstable_scheduleCallback,Sw=s.unstable_NormalPriority,Pe={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yd(){return{controller:new bw,data:new Map,refCount:0}}function Ul(n){n.refCount--,n.refCount===0&&ww(Sw,function(){n.controller.abort()})}var Bl=null,vd=0,to=0,eo=null;function Rw(n,i){if(Bl===null){var a=Bl=[];vd=0,to=Sm(),eo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return vd++,i.then(z_,z_),i}function z_(){if(--vd===0&&Bl!==null){eo!==null&&(eo.status="fulfilled");var n=Bl;Bl=null,to=0,eo=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Iw(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var q_=w.S;w.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Rw(n,i),q_!==null&&q_(n,i)};var js=zt(null);function Ed(){var n=js.current;return n!==null?n:Jt.pooledCache}function Kc(n,i){i===null?Qt(js,js.current):Qt(js,i.pool)}function j_(){var n=Ed();return n===null?null:{parent:Pe._currentValue,pool:n}}var Nr=0,Vt=null,Xt=null,we=null,Qc=!1,no=!1,Fs=!1,Yc=0,zl=0,io=null,Dw=0;function ye(){throw Error(r(321))}function Td(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Sn(n[a],i[a]))return!1;return!0}function Ad(n,i,a,l,f,d){return Nr=d,Vt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,w.H=n===null||n.memoizedState===null?Gs:Or,Fs=!1,d=a(l,f),Fs=!1,no&&(d=G_(i,a,l,f)),F_(n),d}function F_(n){w.H=_i;var i=Xt!==null&&Xt.next!==null;if(Nr=0,we=Xt=Vt=null,Qc=!1,zl=0,io=null,i)throw Error(r(300));n===null||qe||(n=n.dependencies,n!==null&&ih(n)&&(qe=!0))}function G_(n,i,a,l){Vt=n;var f=0;do{if(no&&(io=null),zl=0,no=!1,25<=f)throw Error(r(301));if(f+=1,we=Xt=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}w.H=Hs,d=i(a,l)}while(no);return d}function Vw(){var n=w.H,i=n.useState()[0];return i=typeof i.then=="function"?ql(i):i,n=n.useState()[0],(Xt!==null?Xt.memoizedState:null)!==n&&(Vt.flags|=1024),i}function bd(){var n=Yc!==0;return Yc=0,n}function wd(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Sd(n){if(Qc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Qc=!1}Nr=0,we=Xt=Vt=null,no=!1,zl=Yc=0,io=null}function vn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?Vt.memoizedState=we=n:we=we.next=n,we}function Se(){if(Xt===null){var n=Vt.alternate;n=n!==null?n.memoizedState:null}else n=Xt.next;var i=we===null?Vt.memoizedState:we.next;if(i!==null)we=i,Xt=n;else{if(n===null)throw Vt.alternate===null?Error(r(467)):Error(r(310));Xt=n,n={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},we===null?Vt.memoizedState=we=n:we=we.next=n}return we}var $c;$c=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function ql(n){var i=zl;return zl+=1,io===null&&(io=[]),n=O_(io,n,i),i=Vt,(we===null?i.memoizedState:we.next)===null&&(i=i.alternate,w.H=i===null||i.memoizedState===null?Gs:Or),n}function Xc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ql(n);if(n.$$typeof===P)return tn(n)}throw Error(r(438,String(n)))}function Rd(n){var i=null,a=Vt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Vt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=$c(),Vt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=It;return i.index++,a}function Gi(n,i){return typeof i=="function"?i(n):i}function Zc(n){var i=Se();return Id(i,Xt,n)}function Id(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var v=f.next;f.next=d.next,d.next=v}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var T=v=null,S=null,O=i,Q=!1;do{var W=O.lane&-536870913;if(W!==O.lane?(Ut&W)===W:(Nr&W)===W){var q=O.revertLane;if(q===0)S!==null&&(S=S.next={lane:0,revertLane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),W===to&&(Q=!0);else if((Nr&q)===q){O=O.next,q===to&&(Q=!0);continue}else W={lane:0,revertLane:O.revertLane,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},S===null?(T=S=W,v=d):S=S.next=W,Vt.lanes|=q,jr|=q;W=O.action,Fs&&a(d,W),d=O.hasEagerState?O.eagerState:a(d,W)}else q={lane:W,revertLane:O.revertLane,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},S===null?(T=S=q,v=d):S=S.next=q,Vt.lanes|=W,jr|=W;O=O.next}while(O!==null&&O!==i);if(S===null?v=d:S.next=T,!Sn(d,n.memoizedState)&&(qe=!0,Q&&(a=eo,a!==null)))throw a;n.memoizedState=d,n.baseState=v,n.baseQueue=S,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Dd(n){var i=Se(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do d=n(d,v.action),v=v.next;while(v!==f);Sn(d,i.memoizedState)||(qe=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function H_(n,i,a){var l=Vt,f=Se(),d=jt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var v=!Sn((Xt||f).memoizedState,a);if(v&&(f.memoizedState=a,qe=!0),f=f.queue,xd(Y_.bind(null,l,f,n),[n]),f.getSnapshot!==i||v||we!==null&&we.memoizedState.tag&1){if(l.flags|=2048,ro(9,Q_.bind(null,l,f,a,i),{destroy:void 0},null),Jt===null)throw Error(r(349));d||Nr&60||K_(l,i,a)}return a}function K_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Vt.updateQueue,i===null?(i=$c(),Vt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Q_(n,i,a,l){i.value=a,i.getSnapshot=l,$_(i)&&X_(n)}function Y_(n,i,a){return a(function(){$_(i)&&X_(n)})}function $_(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Sn(n,a)}catch{return!0}}function X_(n){var i=Vr(n,2);i!==null&&fn(i,n,2)}function Vd(n){var i=vn();if(typeof n=="function"){var a=n;if(n=a(),Fs){ri(!0);try{a()}finally{ri(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:n},i}function Z_(n,i,a,l){return n.baseState=a,Id(n,Xt,typeof l=="function"?l:Gi)}function Cw(n,i,a,l,f){if(th(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};w.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,W_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function W_(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=w.T,v={};w.T=v;try{var T=a(f,l),S=w.S;S!==null&&S(v,T),J_(n,i,T)}catch(O){Cd(n,i,O)}finally{w.T=d}}else try{d=a(f,l),J_(n,i,d)}catch(O){Cd(n,i,O)}}function J_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){ty(n,i,l)},function(l){return Cd(n,i,l)}):ty(n,i,a)}function ty(n,i,a){i.status="fulfilled",i.value=a,ey(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,W_(n,a)))}function Cd(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,ey(i),i=i.next;while(i!==l)}n.action=null}function ey(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function ny(n,i){return i}function iy(n,i){if(jt){var a=Jt.formState;if(a!==null){t:{var l=Vt;if(jt){if(Qe){e:{for(var f=Qe,d=gi;f.nodeType!==8;){if(!d){f=null;break e}if(f=ni(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){Qe=ni(f.nextSibling),l=f.data==="F!";break t}}zs(l)}l=!1}l&&(i=a[0])}}return a=vn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ny,lastRenderedState:i},a.queue=l,a=Ty.bind(null,Vt,l),l.dispatch=a,l=Vd(!1),d=kd.bind(null,Vt,!1,l.queue),l=vn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=Cw.bind(null,Vt,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function ry(n){var i=Se();return sy(i,Xt,n)}function sy(n,i,a){i=Id(n,i,ny)[0],n=Zc(Gi)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?ql(i):i;var l=Se(),f=l.queue,d=f.dispatch;return a!==l.memoizedState&&(Vt.flags|=2048,ro(9,xw.bind(null,f,a),{destroy:void 0},null)),[i,d,n]}function xw(n,i){n.action=i}function ay(n){var i=Se(),a=Xt;if(a!==null)return sy(i,a,n);Se(),i=i.memoizedState,a=Se();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function ro(n,i,a,l){return n={tag:n,create:i,inst:a,deps:l,next:null},i=Vt.updateQueue,i===null&&(i=$c(),Vt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function oy(){return Se().memoizedState}function Wc(n,i,a,l){var f=vn();Vt.flags|=n,f.memoizedState=ro(1|i,a,{destroy:void 0},l===void 0?null:l)}function Jc(n,i,a,l){var f=Se();l=l===void 0?null:l;var d=f.memoizedState.inst;Xt!==null&&l!==null&&Td(l,Xt.memoizedState.deps)?f.memoizedState=ro(i,a,d,l):(Vt.flags|=n,f.memoizedState=ro(1|i,a,d,l))}function ly(n,i){Wc(8390656,8,n,i)}function xd(n,i){Jc(2048,8,n,i)}function uy(n,i){return Jc(4,2,n,i)}function cy(n,i){return Jc(4,4,n,i)}function hy(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function fy(n,i,a){a=a!=null?a.concat([n]):null,Jc(4,4,hy.bind(null,i,n),a)}function Nd(){}function dy(n,i){var a=Se();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Td(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function my(n,i){var a=Se();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Td(i,l[1]))return l[0];if(l=n(),Fs){ri(!0);try{n()}finally{ri(!1)}}return a.memoizedState=[l,i],l}function Od(n,i,a){return a===void 0||Nr&1073741824?n.memoizedState=i:(n.memoizedState=a,n=pv(),Vt.lanes|=n,jr|=n,a)}function gy(n,i,a,l){return Sn(a,i)?a:Ja.current!==null?(n=Od(n,a,l),Sn(n,i)||(qe=!0),n):Nr&42?(n=pv(),Vt.lanes|=n,jr|=n,i):(qe=!0,n.memoizedState=a)}function py(n,i,a,l,f){var d=ot.p;ot.p=d!==0&&8>d?d:8;var v=w.T,T={};w.T=T,kd(n,!1,i,a);try{var S=f(),O=w.S;if(O!==null&&O(T,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var Q=Iw(S,l);jl(n,i,Q,Vn(n))}else jl(n,i,l,Vn(n))}catch(W){jl(n,i,{then:function(){},status:"rejected",reason:W},Vn())}finally{ot.p=d,w.T=v}}function Nw(){}function Md(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=_y(n).queue;py(n,f,i,Dt,a===null?Nw:function(){return yy(n),a(l)})}function _y(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Dt,baseState:Dt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:Dt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function yy(n){var i=_y(n).next.queue;jl(n,i,{},Vn())}function Pd(){return tn(lu)}function vy(){return Se().memoizedState}function Ey(){return Se().memoizedState}function Ow(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Vn();n=kr(a);var l=Lr(i,n,a);l!==null&&(fn(l,i,a),Hl(l,i,a)),i={cache:yd()},n.payload=i;return}i=i.return}}function Mw(n,i,a){var l=Vn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},th(n)?Ay(i,a):(a=hd(n,i,a,l),a!==null&&(fn(a,n,l),by(a,i,l)))}function Ty(n,i,a){var l=Vn();jl(n,i,a,l)}function jl(n,i,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(th(n))Ay(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,T=d(v,a);if(f.hasEagerState=!0,f.eagerState=T,Sn(T,v))return Lc(n,i,f,0),Jt===null&&kc(),!1}catch{}finally{}if(a=hd(n,i,f,l),a!==null)return fn(a,n,l),by(a,i,l),!0}return!1}function kd(n,i,a,l){if(l={lane:2,revertLane:Sm(),action:l,hasEagerState:!1,eagerState:null,next:null},th(n)){if(i)throw Error(r(479))}else i=hd(n,a,l,2),i!==null&&fn(i,n,2)}function th(n){var i=n.alternate;return n===Vt||i!==null&&i===Vt}function Ay(n,i){no=Qc=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function by(n,i,a){if(a&4194176){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,vr(n,a)}}var _i={readContext:tn,use:Xc,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye};_i.useCacheRefresh=ye,_i.useMemoCache=ye,_i.useHostTransitionStatus=ye,_i.useFormState=ye,_i.useActionState=ye,_i.useOptimistic=ye;var Gs={readContext:tn,use:Xc,useCallback:function(n,i){return vn().memoizedState=[n,i===void 0?null:i],n},useContext:tn,useEffect:ly,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,Wc(4194308,4,hy.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Wc(4194308,4,n,i)},useInsertionEffect:function(n,i){Wc(4,2,n,i)},useMemo:function(n,i){var a=vn();i=i===void 0?null:i;var l=n();if(Fs){ri(!0);try{n()}finally{ri(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=vn();if(a!==void 0){var f=a(i);if(Fs){ri(!0);try{a(i)}finally{ri(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=Mw.bind(null,Vt,n),[l.memoizedState,n]},useRef:function(n){var i=vn();return n={current:n},i.memoizedState=n},useState:function(n){n=Vd(n);var i=n.queue,a=Ty.bind(null,Vt,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Nd,useDeferredValue:function(n,i){var a=vn();return Od(a,n,i)},useTransition:function(){var n=Vd(!1);return n=py.bind(null,Vt,n.queue,!0,!1),vn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Vt,f=vn();if(jt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),Jt===null)throw Error(r(349));Ut&60||K_(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,ly(Y_.bind(null,l,d,n),[n]),l.flags|=2048,ro(9,Q_.bind(null,l,d,a,i),{destroy:void 0},null),a},useId:function(){var n=vn(),i=Jt.identifierPrefix;if(jt){var a=ji,l=qi;a=(l&~(1<<32-ln(l)-1)).toString(32)+a,i=":"+i+"R"+a,a=Yc++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=Dw++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},useCacheRefresh:function(){return vn().memoizedState=Ow.bind(null,Vt)}};Gs.useMemoCache=Rd,Gs.useHostTransitionStatus=Pd,Gs.useFormState=iy,Gs.useActionState=iy,Gs.useOptimistic=function(n){var i=vn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=kd.bind(null,Vt,!0,a),a.dispatch=i,[n,i]};var Or={readContext:tn,use:Xc,useCallback:dy,useContext:tn,useEffect:xd,useImperativeHandle:fy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:my,useReducer:Zc,useRef:oy,useState:function(){return Zc(Gi)},useDebugValue:Nd,useDeferredValue:function(n,i){var a=Se();return gy(a,Xt.memoizedState,n,i)},useTransition:function(){var n=Zc(Gi)[0],i=Se().memoizedState;return[typeof n=="boolean"?n:ql(n),i]},useSyncExternalStore:H_,useId:vy};Or.useCacheRefresh=Ey,Or.useMemoCache=Rd,Or.useHostTransitionStatus=Pd,Or.useFormState=ry,Or.useActionState=ry,Or.useOptimistic=function(n,i){var a=Se();return Z_(a,Xt,n,i)};var Hs={readContext:tn,use:Xc,useCallback:dy,useContext:tn,useEffect:xd,useImperativeHandle:fy,useInsertionEffect:uy,useLayoutEffect:cy,useMemo:my,useReducer:Dd,useRef:oy,useState:function(){return Dd(Gi)},useDebugValue:Nd,useDeferredValue:function(n,i){var a=Se();return Xt===null?Od(a,n,i):gy(a,Xt.memoizedState,n,i)},useTransition:function(){var n=Dd(Gi)[0],i=Se().memoizedState;return[typeof n=="boolean"?n:ql(n),i]},useSyncExternalStore:H_,useId:vy};Hs.useCacheRefresh=Ey,Hs.useMemoCache=Rd,Hs.useHostTransitionStatus=Pd,Hs.useFormState=ay,Hs.useActionState=ay,Hs.useOptimistic=function(n,i){var a=Se();return Xt!==null?Z_(a,Xt,n,i):(a.baseState=n,[n,a.queue.dispatch])};function Ld(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:V({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Ud={isMounted:function(n){return(n=n._reactInternals)?yt(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var l=Vn(),f=kr(l);f.payload=i,a!=null&&(f.callback=a),i=Lr(n,f,l),i!==null&&(fn(i,n,l),Hl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=Vn(),f=kr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Lr(n,f,l),i!==null&&(fn(i,n,l),Hl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Vn(),l=kr(a);l.tag=2,i!=null&&(l.callback=i),i=Lr(n,l,a),i!==null&&(fn(i,n,a),Hl(i,n,a))}};function wy(n,i,a,l,f,d,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!Vl(a,l)||!Vl(f,d):!0}function Sy(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&Ud.enqueueReplaceState(i,i.state,null)}function Ks(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=V({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var eh=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Ry(n){eh(n)}function Iy(n){console.error(n)}function Dy(n){eh(n)}function nh(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Vy(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Bd(n,i,a){return a=kr(a),a.tag=3,a.payload={element:null},a.callback=function(){nh(n,i)},a}function Cy(n){return n=kr(n),n.tag=3,n}function xy(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){Vy(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){Vy(i,a,l),typeof f!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function Pw(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Gl(i,a,f,!0),a=Fn.current,a!==null){switch(a.tag){case 13:return pi===null?Em():a.alternate===null&&me===0&&(me=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===gd?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Am(n,l,f)),!1;case 22:return a.flags|=65536,l===gd?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Am(n,l,f)),!1}throw Error(r(435,a.tag))}return Am(n,l,f),Em(),!1}if(jt)return i=Fn.current,i!==null?(!(i.flags&65536)&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==md&&(n=Error(r(422),{cause:l}),Ol(zn(n,a)))):(l!==md&&(i=Error(r(423),{cause:l}),Ol(zn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=zn(l,a),f=Bd(n.stateNode,l,f),tm(n,f),me!==4&&(me=2)),!1;var d=Error(r(520),{cause:l});if(d=zn(d,a),Jl===null?Jl=[d]:Jl.push(d),me!==4&&(me=2),i===null)return!0;l=zn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Bd(a.stateNode,l,n),tm(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Fr===null||!Fr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Cy(f),xy(f,n,a,l),tm(a,f),!1}a=a.return}while(a!==null);return!1}var Ny=Error(r(461)),qe=!1;function Ye(n,i,a,l){i.child=n===null?L_(i,null,a,l):qs(i,n.child,a,l)}function Oy(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var T in l)T!=="ref"&&(v[T]=l[T])}else v=l;return Ys(i),l=Ad(n,i,a,v,d,f),T=bd(),n!==null&&!qe?(wd(n,i,f),Hi(n,i,f)):(jt&&T&&fd(i),i.flags|=1,Ye(n,i,l,f),i.child)}function My(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!lm(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Py(n,i,d,l,f)):(n=oh(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!Yd(n,f)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Vl,a(v,l)&&n.ref===i.ref)return Hi(n,i,f)}return i.flags|=1,n=qr(d,l),n.ref=i.ref,n.return=i,i.child=n}function Py(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(Vl(d,l)&&n.ref===i.ref)if(qe=!1,i.pendingProps=l=d,Yd(n,f))n.flags&131072&&(qe=!0);else return i.lanes=n.lanes,Hi(n,i,f)}return zd(n,i,a,l,f)}function ky(n,i,a){var l=i.pendingProps,f=l.children,d=(i.stateNode._pendingVisibility&2)!==0,v=n!==null?n.memoizedState:null;if(Fl(n,i),l.mode==="hidden"||d){if(i.flags&128){if(l=v!==null?v.baseLanes|a:a,n!==null){for(f=i.child=n.child,d=0;f!==null;)d=d|f.lanes|f.childLanes,f=f.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return Ly(n,i,l,a)}if(a&536870912)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Kc(i,v!==null?v.cachePool:null),v!==null?U_(i,v):pd(),B_(i);else return i.lanes=i.childLanes=536870912,Ly(n,i,v!==null?v.baseLanes|a:a,a)}else v!==null?(Kc(i,v.cachePool),U_(i,v),xr(),i.memoizedState=null):(n!==null&&Kc(i,null),pd(),xr());return Ye(n,i,f,a),i.child}function Ly(n,i,a,l){var f=Ed();return f=f===null?null:{parent:Pe._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},n!==null&&Kc(i,null),pd(),B_(i),n!==null&&Gl(n,i,l,!0),null}function Fl(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=2097664);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=2097664)}}function zd(n,i,a,l,f){return Ys(i),a=Ad(n,i,a,l,void 0,f),l=bd(),n!==null&&!qe?(wd(n,i,f),Hi(n,i,f)):(jt&&l&&fd(i),i.flags|=1,Ye(n,i,a,f),i.child)}function Uy(n,i,a,l,f,d){return Ys(i),i.updateQueue=null,a=G_(i,l,a,f),F_(n),l=bd(),n!==null&&!qe?(wd(n,i,d),Hi(n,i,d)):(jt&&l&&fd(i),i.flags|=1,Ye(n,i,a,d),i.child)}function By(n,i,a,l,f){if(Ys(i),i.stateNode===null){var d=$a,v=a.contextType;typeof v=="object"&&v!==null&&(d=tn(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ud,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Wd(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?tn(v):$a,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Ld(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Ud.enqueueReplaceState(d,d.state,null),Ql(i,l,d,f),Kl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var T=i.memoizedProps,S=Ks(a,T);d.props=S;var O=d.context,Q=a.contextType;v=$a,typeof Q=="object"&&Q!==null&&(v=tn(Q));var W=a.getDerivedStateFromProps;Q=typeof W=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||O!==v)&&Sy(i,d,l,v),Pr=!1;var q=i.memoizedState;d.state=q,Ql(i,l,d,f),Kl(),O=i.memoizedState,T||q!==O||Pr?(typeof W=="function"&&(Ld(i,a,W,l),O=i.memoizedState),(S=Pr||wy(i,a,S,l,q,O,v))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=O),d.props=l,d.state=O,d.context=v,l=S):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Jd(n,i),v=i.memoizedProps,Q=Ks(a,v),d.props=Q,W=i.pendingProps,q=d.context,O=a.contextType,S=$a,typeof O=="object"&&O!==null&&(S=tn(O)),T=a.getDerivedStateFromProps,(O=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==W||q!==S)&&Sy(i,d,l,S),Pr=!1,q=i.memoizedState,d.state=q,Ql(i,l,d,f),Kl();var G=i.memoizedState;v!==W||q!==G||Pr||n!==null&&n.dependencies!==null&&ih(n.dependencies)?(typeof T=="function"&&(Ld(i,a,T,l),G=i.memoizedState),(Q=Pr||wy(i,a,Q,l,q,G,S)||n!==null&&n.dependencies!==null&&ih(n.dependencies))?(O||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,G,S),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,G,S)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=G),d.props=l,d.state=G,d.context=S,l=Q):(typeof d.componentDidUpdate!="function"||v===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,Fl(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=qs(i,n.child,null,f),i.child=qs(i,null,a,f)):Ye(n,i,a,f),i.memoizedState=d.state,n=i.child):n=Hi(n,i,f),n}function zy(n,i,a,l){return Nl(),i.flags|=256,Ye(n,i,a,l),i.child}var qd={dehydrated:null,treeContext:null,retryLane:0};function jd(n){return{baseLanes:n,cachePool:j_()}}function Fd(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Qn),n}function qy(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=n!==null&&n.memoizedState===null?!1:(Me.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,n===null){if(jt){if(f?Cr(i):xr(),jt){var T=Qe,S;if(S=T){t:{for(S=T,T=gi;S.nodeType!==8;){if(!T){T=null;break t}if(S=ni(S.nextSibling),S===null){T=null;break t}}T=S}T!==null?(i.memoizedState={dehydrated:T,treeContext:Us!==null?{id:qi,overflow:ji}:null,retryLane:536870912},S=Kn(18,null,null,0),S.stateNode=T,S.return=i,i.child=S,hn=i,Qe=null,S=!0):S=!1}S||zs(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return T.data==="$!"?i.lanes=16:i.lanes=536870912,null;Fi(i)}return T=l.children,l=l.fallback,f?(xr(),f=i.mode,T=Hd({mode:"hidden",children:T},f),l=Xs(l,f,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,f=i.child,f.memoizedState=jd(a),f.childLanes=Fd(n,v,a),i.memoizedState=qd,l):(Cr(i),Gd(i,T))}if(S=n.memoizedState,S!==null&&(T=S.dehydrated,T!==null)){if(d)i.flags&256?(Cr(i),i.flags&=-257,i=Kd(n,i,a)):i.memoizedState!==null?(xr(),i.child=n.child,i.flags|=128,i=null):(xr(),f=l.fallback,T=i.mode,l=Hd({mode:"visible",children:l.children},T),f=Xs(f,T,a,null),f.flags|=2,l.return=i,f.return=i,l.sibling=f,i.child=l,qs(i,n.child,null,a),l=i.child,l.memoizedState=jd(a),l.childLanes=Fd(n,v,a),i.memoizedState=qd,i=f);else if(Cr(i),T.data==="$!"){if(v=T.nextSibling&&T.nextSibling.dataset,v)var O=v.dgst;v=O,l=Error(r(419)),l.stack="",l.digest=v,Ol({value:l,source:null,stack:null}),i=Kd(n,i,a)}else if(qe||Gl(n,i,a,!1),v=(a&n.childLanes)!==0,qe||v){if(v=Jt,v!==null){if(l=a&-a,l&42)l=1;else switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=64;break;case 268435456:l=134217728;break;default:l=0}if(l=l&(v.suspendedLanes|a)?0:l,l!==0&&l!==S.retryLane)throw S.retryLane=l,Vr(n,l),fn(v,n,l),Ny}T.data==="$?"||Em(),i=Kd(n,i,a)}else T.data==="$?"?(i.flags|=128,i.child=n.child,i=Xw.bind(null,n),T._reactRetry=i,i=null):(n=S.treeContext,Qe=ni(T.nextSibling),hn=i,jt=!0,ti=null,gi=!1,n!==null&&(qn[jn++]=qi,qn[jn++]=ji,qn[jn++]=Us,qi=n.id,ji=n.overflow,Us=i),i=Gd(i,l.children),i.flags|=4096);return i}return f?(xr(),f=l.fallback,T=i.mode,S=n.child,O=S.sibling,l=qr(S,{mode:"hidden",children:l.children}),l.subtreeFlags=S.subtreeFlags&31457280,O!==null?f=qr(O,f):(f=Xs(f,T,a,null),f.flags|=2),f.return=i,l.return=i,l.sibling=f,i.child=l,l=f,f=i.child,T=n.child.memoizedState,T===null?T=jd(a):(S=T.cachePool,S!==null?(O=Pe._currentValue,S=S.parent!==O?{parent:O,pool:O}:S):S=j_(),T={baseLanes:T.baseLanes|a,cachePool:S}),f.memoizedState=T,f.childLanes=Fd(n,v,a),i.memoizedState=qd,l):(Cr(i),a=n.child,n=a.sibling,a=qr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(v=i.deletions,v===null?(i.deletions=[n],i.flags|=16):v.push(n)),i.child=a,i.memoizedState=null,a)}function Gd(n,i){return i=Hd({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Hd(n,i){return dv(n,i,0,null)}function Kd(n,i,a){return qs(i,n.child,null,a),n=Gd(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function jy(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),Xd(n.return,i,a)}function Qd(n,i,a,l,f){var d=n.memoizedState;d===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=f)}function Fy(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;if(Ye(n,i,l.children,a),l=Me.current,l&2)l=l&1|2,i.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&jy(n,a,i);else if(n.tag===19)jy(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(Qt(Me,l),f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&Hc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Qd(i,!1,f,a,d);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Hc(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Qd(i,!0,a,null,d);break;case"together":Qd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Hi(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),jr|=i.lanes,!(a&i.childLanes))if(n!==null){if(Gl(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=qr(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=qr(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Yd(n,i){return n.lanes&i?!0:(n=n.dependencies,!!(n!==null&&ih(n)))}function kw(n,i,a){switch(i.tag){case 3:dr(i,i.stateNode.containerInfo),Mr(i,Pe,n.memoizedState.cache),Nl();break;case 27:case 5:ll(i);break;case 4:dr(i,i.stateNode.containerInfo);break;case 10:Mr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Cr(i),i.flags|=128,null):a&i.child.childLanes?qy(n,i,a):(Cr(i),n=Hi(n,i,a),n!==null?n.sibling:null);Cr(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Gl(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return Fy(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Qt(Me,Me.current),l)break;return null;case 22:case 23:return i.lanes=0,ky(n,i,a);case 24:Mr(i,Pe,n.memoizedState.cache)}return Hi(n,i,a)}function Gy(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)qe=!0;else{if(!Yd(n,a)&&!(i.flags&128))return qe=!1,kw(n,i,a);qe=!!(n.flags&131072)}else qe=!1,jt&&i.flags&1048576&&D_(i,zc,i.index);switch(i.lanes=0,i.tag){case 16:t:{n=i.pendingProps;var l=i.elementType,f=l._init;if(l=f(l._payload),i.type=l,typeof l=="function")lm(l)?(n=Ks(l,n),i.tag=1,i=By(null,i,l,n,a)):(i.tag=0,i=zd(null,i,l,n,a));else{if(l!=null){if(f=l.$$typeof,f===Y){i.tag=11,i=Oy(null,i,l,n,a);break t}else if(f===ht){i.tag=14,i=My(null,i,l,n,a);break t}}throw i=I(l)||l,Error(r(306,i,""))}}return i;case 0:return zd(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Ks(l,i.pendingProps),By(n,i,l,f,a);case 3:t:{if(dr(i,i.stateNode.containerInfo),n===null)throw Error(r(387));var d=i.pendingProps;f=i.memoizedState,l=f.element,Jd(n,i),Ql(i,d,null,a);var v=i.memoizedState;if(d=v.cache,Mr(i,Pe,d),d!==f.cache&&Zd(i,[Pe],a,!0),Kl(),d=v.element,f.isDehydrated)if(f={element:d,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=zy(n,i,d,a);break t}else if(d!==l){l=zn(Error(r(424)),i),Ol(l),i=zy(n,i,d,a);break t}else for(Qe=ni(i.stateNode.containerInfo.firstChild),hn=i,jt=!0,ti=null,gi=!0,a=L_(i,null,d,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Nl(),d===l){i=Hi(n,i,a);break t}Ye(n,i,d,a)}i=i.child}return i;case 26:return Fl(n,i),n===null?(a=Qv(i.type,null,i.pendingProps,null))?i.memoizedState=a:jt||(a=i.type,n=i.pendingProps,l=vh(Nn.current).createElement(a),l[Ue]=i,l[xe]=n,$e(l,a,n),oe(l),i.stateNode=l):i.memoizedState=Qv(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return ll(i),n===null&&jt&&(l=i.stateNode=Gv(i.type,i.pendingProps,Nn.current),hn=i,gi=!0,Qe=ni(l.firstChild)),l=i.pendingProps.children,n!==null||jt?Ye(n,i,l,a):i.child=qs(i,null,l,a),Fl(n,i),i.child;case 5:return n===null&&jt&&((f=l=Qe)&&(l=fS(l,i.type,i.pendingProps,gi),l!==null?(i.stateNode=l,hn=i,Qe=ni(l.firstChild),gi=!1,f=!0):f=!1),f||zs(i)),ll(i),f=i.type,d=i.pendingProps,v=n!==null?n.memoizedProps:null,l=d.children,Mm(f,d)?l=null:v!==null&&Mm(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=Ad(n,i,Vw,null,null,a),lu._currentValue=f),Fl(n,i),Ye(n,i,l,a),i.child;case 6:return n===null&&jt&&((n=a=Qe)&&(a=dS(a,i.pendingProps,gi),a!==null?(i.stateNode=a,hn=i,Qe=null,n=!0):n=!1),n||zs(i)),null;case 13:return qy(n,i,a);case 4:return dr(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=qs(i,null,l,a):Ye(n,i,l,a),i.child;case 11:return Oy(n,i,i.type,i.pendingProps,a);case 7:return Ye(n,i,i.pendingProps,a),i.child;case 8:return Ye(n,i,i.pendingProps.children,a),i.child;case 12:return Ye(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Mr(i,i.type,l.value),Ye(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Ys(i),f=tn(f),l=l(f),i.flags|=1,Ye(n,i,l,a),i.child;case 14:return My(n,i,i.type,i.pendingProps,a);case 15:return Py(n,i,i.type,i.pendingProps,a);case 19:return Fy(n,i,a);case 22:return ky(n,i,a);case 24:return Ys(i),l=tn(Pe),n===null?(f=Ed(),f===null&&(f=Jt,d=yd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Wd(i),Mr(i,Pe,f)):(n.lanes&a&&(Jd(n,i),Ql(i,null,null,a),Kl()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Mr(i,Pe,l)):(l=d.cache,Mr(i,Pe,l),l!==f.cache&&Zd(i,[Pe],a,!0))),Ye(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}var $d=zt(null),Qs=null,Ki=null;function Mr(n,i,a){Qt($d,i._currentValue),i._currentValue=a}function Qi(n){n._currentValue=$d.current,he($d)}function Xd(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function Zd(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var v=f.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=f;for(var S=0;S<i.length;S++)if(T.context===i[S]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Xd(d.return,a,n),l||(v=null);break t}d=T.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Xd(v,a,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Gl(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if(f.flags&524288)d=!0;else if(f.flags&262144)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var T=f.type;Sn(f.pendingProps.value,v.value)||(n!==null?n.push(T):n=[T])}}else if(f===fr.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(lu):n=[lu])}f=f.return}n!==null&&Zd(i,n,a,l),i.flags|=262144}function ih(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ys(n){Qs=n,Ki=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function tn(n){return Hy(Qs,n)}function rh(n,i){return Qs===null&&Ys(n),Hy(n,i)}function Hy(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ki===null){if(n===null)throw Error(r(308));Ki=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Ki=Ki.next=i;return a}var Pr=!1;function Wd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function kr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Lr(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,ue&2){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Uc(n),R_(n,null,a),i}return Lc(n,l,i,a),Uc(n)}function Hl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194176)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,vr(n,a)}}function tm(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var em=!1;function Kl(){if(em){var n=eo;if(n!==null)throw n}}function Ql(n,i,a,l){em=!1;var f=n.updateQueue;Pr=!1;var d=f.firstBaseUpdate,v=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var S=T,O=S.next;S.next=null,v===null?d=O:v.next=O,v=S;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==v&&(T===null?Q.firstBaseUpdate=O:T.next=O,Q.lastBaseUpdate=S))}if(d!==null){var W=f.baseState;v=0,Q=O=S=null,T=d;do{var q=T.lane&-536870913,G=q!==T.lane;if(G?(Ut&q)===q:(l&q)===q){q!==0&&q===to&&(em=!0),Q!==null&&(Q=Q.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var dt=n,bt=T;q=i;var ge=a;switch(bt.tag){case 1:if(dt=bt.payload,typeof dt=="function"){W=dt.call(ge,W,q);break t}W=dt;break t;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=bt.payload,q=typeof dt=="function"?dt.call(ge,W,q):dt,q==null)break t;W=V({},W,q);break t;case 2:Pr=!0}}q=T.callback,q!==null&&(n.flags|=64,G&&(n.flags|=8192),G=f.callbacks,G===null?f.callbacks=[q]:G.push(q))}else G={lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(O=Q=G,S=W):Q=Q.next=G,v|=q;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;G=T,T=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);Q===null&&(S=W),f.baseState=S,f.firstBaseUpdate=O,f.lastBaseUpdate=Q,d===null&&(f.shared.lanes=0),jr|=v,n.lanes=v,n.memoizedState=W}}function Ky(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function Qy(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Ky(a[n],i)}function Yl(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==f)}}catch(T){Wt(i,i.return,T)}}function Ur(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var v=l.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,f=i;var S=a;try{T()}catch(O){Wt(f,S,O)}}}l=l.next}while(l!==d)}}catch(O){Wt(i,i.return,O)}}function Yy(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{Qy(i,a)}catch(l){Wt(n,n.return,l)}}}function $y(n,i,a){a.props=Ks(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){Wt(n,i,l)}}function $s(n,i){try{var a=n.ref;if(a!==null){var l=n.stateNode;switch(n.tag){case 26:case 27:case 5:var f=l;break;default:f=l}typeof a=="function"?n.refCleanup=a(f):a.current=f}}catch(d){Wt(n,i,d)}}function Rn(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Wt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Wt(n,i,f)}else a.current=null}function Xy(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Wt(n,n.return,f)}}function Zy(n,i,a){try{var l=n.stateNode;oS(l,n.type,a,i),l[xe]=i}catch(f){Wt(n,n.return,f)}}function Wy(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27||n.tag===4}function nm(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Wy(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==27&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function im(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=yh));else if(l!==4&&l!==27&&(n=n.child,n!==null))for(im(n,i,a),n=n.sibling;n!==null;)im(n,i,a),n=n.sibling}function sh(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&l!==27&&(n=n.child,n!==null))for(sh(n,i,a),n=n.sibling;n!==null;)sh(n,i,a),n=n.sibling}var Yi=!1,de=!1,rm=!1,Jy=typeof WeakSet=="function"?WeakSet:Set,je=null,tv=!1;function Lw(n,i){if(n=n.containerInfo,Nm=Sh,n=__(n),ad(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,T=-1,S=-1,O=0,Q=0,W=n,q=null;e:for(;;){for(var G;W!==a||f!==0&&W.nodeType!==3||(T=v+f),W!==d||l!==0&&W.nodeType!==3||(S=v+l),W.nodeType===3&&(v+=W.nodeValue.length),(G=W.firstChild)!==null;)q=W,W=G;for(;;){if(W===n)break e;if(q===a&&++O===f&&(T=v),q===d&&++Q===l&&(S=v),(G=W.nextSibling)!==null)break;W=q,q=W.parentNode}W=G}a=T===-1||S===-1?null:{start:T,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(Om={focusedElem:n,selectionRange:a},Sh=!1,je=i;je!==null;)if(i=je,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,je=n;else for(;je!==null;){switch(i=je,d=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if(n&1024&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var dt=Ks(a.type,f,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(dt,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(bt){Wt(a,a.return,bt)}}break;case 3:if(n&1024){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Lm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Lm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,je=n;break}je=i.return}return dt=tv,tv=!1,dt}function ev(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Xi(n,a),l&4&&Yl(5,a);break;case 1:if(Xi(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(T){Wt(a,a.return,T)}else{var f=Ks(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(T){Wt(a,a.return,T)}}l&64&&Yy(a),l&512&&$s(a,a.return);break;case 3:if(Xi(n,a),l&64&&(l=a.updateQueue,l!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Qy(l,n)}catch(T){Wt(a,a.return,T)}}break;case 26:Xi(n,a),l&512&&$s(a,a.return);break;case 27:case 5:Xi(n,a),i===null&&l&4&&Xy(a),l&512&&$s(a,a.return);break;case 12:Xi(n,a);break;case 13:Xi(n,a),l&4&&rv(n,a);break;case 22:if(f=a.memoizedState!==null||Yi,!f){i=i!==null&&i.memoizedState!==null||de;var d=Yi,v=de;Yi=f,(de=i)&&!v?Br(n,a,(a.subtreeFlags&8772)!==0):Xi(n,a),Yi=d,de=v}l&512&&(a.memoizedProps.mode==="manual"?$s(a,a.return):Rn(a,a.return));break;default:Xi(n,a)}}function nv(n){var i=n.alternate;i!==null&&(n.alternate=null,nv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ss(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Re=null,In=!1;function $i(n,i,a){for(a=a.child;a!==null;)iv(n,i,a),a=a.sibling}function iv(n,i,a){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(mr,a)}catch{}switch(a.tag){case 26:de||Rn(a,i),$i(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:de||Rn(a,i);var l=Re,f=In;for(Re=a.stateNode,$i(n,i,a),a=a.stateNode,i=a.attributes;i.length;)a.removeAttributeNode(i[0]);Ss(a),Re=l,In=f;break;case 5:de||Rn(a,i);case 6:f=Re;var d=In;if(Re=null,$i(n,i,a),Re=f,In=d,Re!==null)if(In)try{n=Re,l=a.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)}catch(v){Wt(a,i,v)}else try{Re.removeChild(a.stateNode)}catch(v){Wt(a,i,v)}break;case 18:Re!==null&&(In?(i=Re,a=a.stateNode,i.nodeType===8?km(i.parentNode,a):i.nodeType===1&&km(i,a),fu(i)):km(Re,a.stateNode));break;case 4:l=Re,f=In,Re=a.stateNode.containerInfo,In=!0,$i(n,i,a),Re=l,In=f;break;case 0:case 11:case 14:case 15:de||Ur(2,a,i),de||Ur(4,a,i),$i(n,i,a);break;case 1:de||(Rn(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&$y(a,i,l)),$i(n,i,a);break;case 21:$i(n,i,a);break;case 22:de||Rn(a,i),de=(l=de)||a.memoizedState!==null,$i(n,i,a),de=l;break;default:$i(n,i,a)}}function rv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{fu(n)}catch(a){Wt(i,i.return,a)}}function Uw(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Jy),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Jy),i;default:throw Error(r(435,n.tag))}}function sm(n,i){var a=Uw(n);i.forEach(function(l){var f=Zw.bind(null,n,l);a.has(l)||(a.add(l),l.then(f,f))})}function Gn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,v=i,T=v;t:for(;T!==null;){switch(T.tag){case 27:case 5:Re=T.stateNode,In=!1;break t;case 3:Re=T.stateNode.containerInfo,In=!0;break t;case 4:Re=T.stateNode.containerInfo,In=!0;break t}T=T.return}if(Re===null)throw Error(r(160));iv(d,v,f),Re=null,In=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)sv(i,n),i=i.sibling}var ei=null;function sv(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Gn(i,n),Hn(n),l&4&&(Ur(3,n,n.return),Yl(3,n),Ur(5,n,n.return));break;case 1:Gn(i,n),Hn(n),l&512&&(de||a===null||Rn(a,a.return)),l&64&&Yi&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ei;if(Gn(i,n),Hn(n),l&512&&(de||a===null||Rn(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Tr]||d[Ue]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),$e(d,l,a),d[Ue]=n,oe(d),l=d;break t;case"link":var v=Xv("link","href",f).get(l+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(d=v[T],d.getAttribute("href")===(a.href==null?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break e}}d=f.createElement(l),$e(d,l,a),f.head.appendChild(d);break;case"meta":if(v=Xv("meta","content",f).get(l+(a.content||""))){for(T=0;T<v.length;T++)if(d=v[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break e}}d=f.createElement(l),$e(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Ue]=n,oe(d),l=d}n.stateNode=l}else Zv(f,n.type,n.stateNode);else n.stateNode=$v(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Zv(f,n.type,n.stateNode):$v(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Zy(n,n.memoizedProps,a.memoizedProps)}break;case 27:if(l&4&&n.alternate===null){f=n.stateNode,d=n.memoizedProps;try{for(var S=f.firstChild;S;){var O=S.nextSibling,Q=S.nodeName;S[Tr]||Q==="HEAD"||Q==="BODY"||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&S.rel.toLowerCase()==="stylesheet"||f.removeChild(S),S=O}for(var W=n.type,q=f.attributes;q.length;)f.removeAttributeNode(q[0]);$e(f,W,d),f[Ue]=n,f[xe]=d}catch(dt){Wt(n,n.return,dt)}}case 5:if(Gn(i,n),Hn(n),l&512&&(de||a===null||Rn(a,a.return)),n.flags&32){f=n.stateNode;try{Pn(f,"")}catch(dt){Wt(n,n.return,dt)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Zy(n,f,a!==null?a.memoizedProps:f)),l&1024&&(rm=!0);break;case 6:if(Gn(i,n),Hn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(dt){Wt(n,n.return,dt)}}break;case 3:if(Ah=null,f=ei,ei=Eh(i.containerInfo),Gn(i,n),ei=f,Hn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{fu(i.containerInfo)}catch(dt){Wt(n,n.return,dt)}rm&&(rm=!1,av(n));break;case 4:l=ei,ei=Eh(n.stateNode.containerInfo),Gn(i,n),Hn(n),ei=l;break;case 12:Gn(i,n),Hn(n);break;case 13:Gn(i,n),Hn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(mm=_n()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,sm(n,l)));break;case 22:if(l&512&&(de||a===null||Rn(a,a.return)),S=n.memoizedState!==null,O=a!==null&&a.memoizedState!==null,Q=Yi,W=de,Yi=Q||S,de=W||O,Gn(i,n),de=W,Yi=Q,Hn(n),i=n.stateNode,i._current=n,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,l&8192&&(i._visibility=S?i._visibility&-2:i._visibility|1,S&&(i=Yi||de,a===null||O||i||so(n)),n.memoizedProps===null||n.memoizedProps.mode!=="manual"))t:for(a=null,i=n;;){if(i.tag===5||i.tag===26||i.tag===27){if(a===null){O=a=i;try{if(f=O.stateNode,S)d=f.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{v=O.stateNode,T=O.memoizedProps.style;var G=T!=null&&T.hasOwnProperty("display")?T.display:null;v.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(dt){Wt(O,O.return,dt)}}}else if(i.tag===6){if(a===null){O=i;try{O.stateNode.nodeValue=S?"":O.memoizedProps}catch(dt){Wt(O,O.return,dt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,sm(n,a))));break;case 19:Gn(i,n),Hn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,sm(n,l)));break;case 21:break;default:Gn(i,n),Hn(n)}}function Hn(n){var i=n.flags;if(i&2){try{if(n.tag!==27){t:{for(var a=n.return;a!==null;){if(Wy(a)){var l=a;break t}a=a.return}throw Error(r(160))}switch(l.tag){case 27:var f=l.stateNode,d=nm(n);sh(n,d,f);break;case 5:var v=l.stateNode;l.flags&32&&(Pn(v,""),l.flags&=-33);var T=nm(n);sh(n,T,v);break;case 3:case 4:var S=l.stateNode.containerInfo,O=nm(n);im(n,O,S);break;default:throw Error(r(161))}}}catch(Q){Wt(n,n.return,Q)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function av(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;av(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Xi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ev(n,i.alternate,i),i=i.sibling}function so(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Ur(4,i,i.return),so(i);break;case 1:Rn(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&$y(i,i.return,a),so(i);break;case 26:case 27:case 5:Rn(i,i.return),so(i);break;case 22:Rn(i,i.return),i.memoizedState===null&&so(i);break;default:so(i)}n=n.sibling}}function Br(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Br(f,d,a),Yl(4,d);break;case 1:if(Br(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(O){Wt(l,l.return,O)}if(l=d,f=l.updateQueue,f!==null){var T=l.stateNode;try{var S=f.shared.hiddenCallbacks;if(S!==null)for(f.shared.hiddenCallbacks=null,f=0;f<S.length;f++)Ky(S[f],T)}catch(O){Wt(l,l.return,O)}}a&&v&64&&Yy(d),$s(d,d.return);break;case 26:case 27:case 5:Br(f,d,a),a&&l===null&&v&4&&Xy(d),$s(d,d.return);break;case 12:Br(f,d,a);break;case 13:Br(f,d,a),a&&v&4&&rv(f,d);break;case 22:d.memoizedState===null&&Br(f,d,a),$s(d,d.return);break;default:Br(f,d,a)}i=i.sibling}}function am(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Ul(a))}function om(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ul(n))}function zr(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ov(n,i,a,l),i=i.sibling}function ov(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:zr(n,i,a,l),f&2048&&Yl(9,i);break;case 3:zr(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Ul(n)));break;case 12:if(f&2048){zr(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,v=d.id,T=d.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(S){Wt(i,i.return,S)}}else zr(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,i.memoizedState!==null?d._visibility&4?zr(n,i,a,l):$l(n,i):d._visibility&4?zr(n,i,a,l):(d._visibility|=4,ao(n,i,a,l,(i.subtreeFlags&10256)!==0)),f&2048&&am(i.alternate,i);break;case 24:zr(n,i,a,l),f&2048&&om(i.alternate,i);break;default:zr(n,i,a,l)}}function ao(n,i,a,l,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=n,v=i,T=a,S=l,O=v.flags;switch(v.tag){case 0:case 11:case 15:ao(d,v,T,S,f),Yl(8,v);break;case 23:break;case 22:var Q=v.stateNode;v.memoizedState!==null?Q._visibility&4?ao(d,v,T,S,f):$l(d,v):(Q._visibility|=4,ao(d,v,T,S,f)),f&&O&2048&&am(v.alternate,v);break;case 24:ao(d,v,T,S,f),f&&O&2048&&om(v.alternate,v);break;default:ao(d,v,T,S,f)}i=i.sibling}}function $l(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:$l(a,l),f&2048&&am(l.alternate,l);break;case 24:$l(a,l),f&2048&&om(l.alternate,l);break;default:$l(a,l)}i=i.sibling}}var Xl=8192;function oo(n){if(n.subtreeFlags&Xl)for(n=n.child;n!==null;)lv(n),n=n.sibling}function lv(n){switch(n.tag){case 26:oo(n),n.flags&Xl&&n.memoizedState!==null&&RS(ei,n.memoizedState,n.memoizedProps);break;case 5:oo(n);break;case 3:case 4:var i=ei;ei=Eh(n.stateNode.containerInfo),oo(n),ei=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Xl,Xl=16777216,oo(n),Xl=i):oo(n));break;default:oo(n)}}function uv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Zl(n){var i=n.deletions;if(n.flags&16){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];je=l,hv(l,n)}uv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)cv(n),n=n.sibling}function cv(n){switch(n.tag){case 0:case 11:case 15:Zl(n),n.flags&2048&&Ur(9,n,n.return);break;case 3:Zl(n);break;case 12:Zl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&4&&(n.return===null||n.return.tag!==13)?(i._visibility&=-5,ah(n)):Zl(n);break;default:Zl(n)}}function ah(n){var i=n.deletions;if(n.flags&16){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];je=l,hv(l,n)}uv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Ur(8,i,i.return),ah(i);break;case 22:a=i.stateNode,a._visibility&4&&(a._visibility&=-5,ah(i));break;default:ah(i)}n=n.sibling}}function hv(n,i){for(;je!==null;){var a=je;switch(a.tag){case 0:case 11:case 15:Ur(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ul(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,je=l;else t:for(a=n;je!==null;){l=je;var f=l.sibling,d=l.return;if(nv(l),l===a){je=null;break t}if(f!==null){f.return=d,je=f;break t}je=d}}}function Bw(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(n,i,a,l){return new Bw(n,i,a,l)}function lm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function qr(n,i){var a=n.alternate;return a===null?(a=Kn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&31457280,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function fv(n,i){n.flags&=31457282;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function oh(n,i,a,l,f,d){var v=0;if(l=n,typeof n=="function")lm(n)&&(v=1);else if(typeof n=="string")v=wS(n,a,on.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case g:return Xs(a.children,f,d,i);case _:v=8,f|=24;break;case E:return n=Kn(12,a,i,f|2),n.elementType=E,n.lanes=d,n;case K:return n=Kn(13,a,i,f),n.elementType=K,n.lanes=d,n;case X:return n=Kn(19,a,i,f),n.elementType=X,n.lanes=d,n;case ut:return dv(a,f,d,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case A:case P:v=10;break t;case R:v=9;break t;case Y:v=11;break t;case ht:v=14;break t;case ft:v=16,l=null;break t}v=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=Kn(v,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Xs(n,i,a,l){return n=Kn(7,n,l,i),n.lanes=a,n}function dv(n,i,a,l){n=Kn(22,n,l,i),n.elementType=ut,n.lanes=a;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var d=f._current;if(d===null)throw Error(r(456));if(!(f._pendingVisibility&2)){var v=Vr(d,2);v!==null&&(f._pendingVisibility|=2,fn(v,d,2))}},attach:function(){var d=f._current;if(d===null)throw Error(r(456));if(f._pendingVisibility&2){var v=Vr(d,2);v!==null&&(f._pendingVisibility&=-3,fn(v,d,2))}}};return n.stateNode=f,n}function um(n,i,a){return n=Kn(6,n,null,i),n.lanes=a,n}function cm(n,i,a){return i=Kn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function Zi(n){n.flags|=4}function mv(n,i){if(i.type!=="stylesheet"||i.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!Wv(i)){if(i=Fn.current,i!==null&&((Ut&4194176)===Ut?pi!==null:(Ut&62914560)!==Ut&&!(Ut&536870912)||i!==pi))throw Pl=gd,x_;n.flags|=8192}}function lh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?_r():536870912,n.lanes|=i,uo|=i)}function Wl(n,i){if(!jt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function le(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&31457280,l|=f.flags&31457280,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function zw(n,i,a){var l=i.pendingProps;switch(dd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return le(i),null;case 1:return le(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Qi(Pe),Ci(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(xl(i)?Zi(i):n===null||n.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,ti!==null&&(ym(ti),ti=null))),le(i),null;case 26:return a=i.memoizedState,n===null?(Zi(i),a!==null?(le(i),mv(i,a)):(le(i),i.flags&=-16777217)):a?a!==n.memoizedState?(Zi(i),le(i),mv(i,a)):(le(i),i.flags&=-16777217):(n.memoizedProps!==l&&Zi(i),le(i),i.flags&=-16777217),null;case 27:Da(i),a=Nn.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Zi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return le(i),null}n=on.current,xl(i)?V_(i):(n=Gv(f,l,a),i.stateNode=n,Zi(i))}return le(i),null;case 5:if(Da(i),a=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Zi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return le(i),null}if(n=on.current,xl(i))V_(i);else{switch(f=vh(Nn.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}n[Ue]=i,n[xe]=l;t:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break t;for(;f.sibling===null;){if(f.return===null||f.return===i)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;t:switch($e(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&Zi(i)}}return le(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&Zi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=Nn.current,xl(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=hn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Ue]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Uv(n.nodeValue,a)),n||zs(i)}else n=vh(n).createTextNode(l),n[Ue]=i,i.stateNode=n}return le(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=xl(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ue]=i}else Nl(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;le(i),f=!1}else ti!==null&&(ym(ti),ti=null),f=!0;if(!f)return i.flags&256?(Fi(i),i):(Fi(i),null)}if(Fi(i),i.flags&128)return i.lanes=a,i;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)}return a!==n&&a&&(i.child.flags|=8192),lh(i,i.updateQueue),le(i),null;case 4:return Ci(),n===null&&Vm(i.stateNode.containerInfo),le(i),null;case 10:return Qi(i.type),le(i),null;case 19:if(he(Me),f=i.memoizedState,f===null)return le(i),null;if(l=(i.flags&128)!==0,d=f.rendering,d===null)if(l)Wl(f,!1);else{if(me!==0||n!==null&&n.flags&128)for(n=i.child;n!==null;){if(d=Hc(n),d!==null){for(i.flags|=128,Wl(f,!1),n=d.updateQueue,i.updateQueue=n,lh(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)fv(a,n),a=a.sibling;return Qt(Me,Me.current&1|2),i.child}n=n.sibling}f.tail!==null&&_n()>uh&&(i.flags|=128,l=!0,Wl(f,!1),i.lanes=4194304)}else{if(!l)if(n=Hc(d),n!==null){if(i.flags|=128,l=!0,n=n.updateQueue,i.updateQueue=n,lh(i,n),Wl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!d.alternate&&!jt)return le(i),null}else 2*_n()-f.renderingStartTime>uh&&a!==536870912&&(i.flags|=128,l=!0,Wl(f,!1),i.lanes=4194304);f.isBackwards?(d.sibling=i.child,i.child=d):(n=f.last,n!==null?n.sibling=d:i.child=d,f.last=d)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=_n(),i.sibling=null,n=Me.current,Qt(Me,l?n&1|2:n&1),i):(le(i),null);case 22:case 23:return Fi(i),_d(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?a&536870912&&!(i.flags&128)&&(le(i),i.subtreeFlags&6&&(i.flags|=8192)):le(i),a=i.updateQueue,a!==null&&lh(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&he(js),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Qi(Pe),le(i),null;case 25:return null}throw Error(r(156,i.tag))}function qw(n,i){switch(dd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Qi(Pe),Ci(),n=i.flags,n&65536&&!(n&128)?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Da(i),null;case 13:if(Fi(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Nl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return he(Me),null;case 4:return Ci(),null;case 10:return Qi(i.type),null;case 22:case 23:return Fi(i),_d(),n!==null&&he(js),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Qi(Pe),null;case 25:return null;default:return null}}function gv(n,i){switch(dd(i),i.tag){case 3:Qi(Pe),Ci();break;case 26:case 27:case 5:Da(i);break;case 4:Ci();break;case 13:Fi(i);break;case 19:he(Me);break;case 10:Qi(i.type);break;case 22:case 23:Fi(i),_d(),n!==null&&he(js);break;case 24:Qi(Pe)}}var jw={getCacheForType:function(n){var i=tn(Pe),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a}},Fw=typeof WeakMap=="function"?WeakMap:Map,ue=0,Jt=null,xt=null,Ut=0,te=0,Dn=null,Wi=!1,lo=!1,hm=!1,Ji=0,me=0,jr=0,Zs=0,fm=0,Qn=0,uo=0,Jl=null,yi=null,dm=!1,mm=0,uh=1/0,ch=null,Fr=null,hh=!1,Ws=null,tu=0,gm=0,pm=null,eu=0,_m=null;function Vn(){if(ue&2&&Ut!==0)return Ut&-Ut;if(w.T!==null){var n=to;return n!==0?n:Sm()}return _c()}function pv(){Qn===0&&(Qn=!(Ut&536870912)||jt?dl():536870912);var n=Fn.current;return n!==null&&(n.flags|=32),Qn}function fn(n,i,a){(n===Jt&&te===2||n.cancelPendingCommit!==null)&&(co(n,0),tr(n,Ut,Qn,!1)),_e(n,a),(!(ue&2)||n!==Jt)&&(n===Jt&&(!(ue&2)&&(Zs|=a),me===4&&tr(n,Ut,Qn,!1)),vi(n))}function _v(n,i,a){if(ue&6)throw Error(r(327));var l=!a&&(i&60)===0&&(i&n.expiredLanes)===0||pr(n,i),f=l?Kw(n,i):Tm(n,i,!0),d=l;do{if(f===0){lo&&!l&&tr(n,i,0,!1);break}else if(f===6)tr(n,i,0,!Wi);else{if(a=n.current.alternate,d&&!Gw(a)){f=Tm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;t:{var T=n;f=Jl;var S=T.current.memoizedState.isDehydrated;if(S&&(co(T,v).flags|=256),v=Tm(T,v,!1),v!==2){if(hm&&!S){T.errorRecoveryDisabledLanes|=d,Zs|=d,f=4;break t}d=yi,yi=f,d!==null&&ym(d)}f=v}if(d=!1,f!==2)continue}}if(f===1){co(n,0),tr(n,i,0,!0);break}t:{switch(l=n,f){case 0:case 1:throw Error(r(345));case 4:if((i&4194176)===i){tr(l,i,Qn,!Wi);break t}break;case 2:yi=null;break;case 3:case 5:break;default:throw Error(r(329))}if(l.finishedWork=a,l.finishedLanes=i,(i&62914560)===i&&(d=mm+300-_n(),10<d)){if(tr(l,i,Qn,!Wi),On(l,0)!==0)break t;l.timeoutHandle=qv(yv.bind(null,l,a,yi,ch,dm,i,Qn,Zs,uo,Wi,2,-0,0),d);break t}yv(l,a,yi,ch,dm,i,Qn,Zs,uo,Wi,0,-0,0)}}break}while(!0);vi(n)}function ym(n){yi===null?yi=n:yi.push.apply(yi,n)}function yv(n,i,a,l,f,d,v,T,S,O,Q,W,q){var G=i.subtreeFlags;if((G&8192||(G&16785408)===16785408)&&(ou={stylesheets:null,count:0,unsuspend:SS},lv(i),i=IS(),i!==null)){n.cancelPendingCommit=i(Sv.bind(null,n,a,l,f,v,T,S,1,W,q)),tr(n,d,v,!O);return}Sv(n,a,l,f,v,T,S,Q,W,q)}function Gw(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Sn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function tr(n,i,a,l){i&=~fm,i&=~Zs,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-ln(f),v=1<<d;l[d]=-1,f&=~v}a!==0&&yr(n,a,i)}function fh(){return ue&6?!0:(nu(0),!1)}function vm(){if(xt!==null){if(te===0)var n=xt.return;else n=xt,Ki=Qs=null,Sd(n),Wa=null,kl=0,n=xt;for(;n!==null;)gv(n.alternate,n),n=n.return;xt=null}}function co(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,uS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),vm(),Jt=n,xt=a=qr(n.current,null),Ut=i,te=0,Dn=null,Wi=!1,lo=pr(n,i),hm=!1,uo=Qn=fm=Zs=jr=me=0,yi=Jl=null,dm=!1,i&8&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-ln(l),d=1<<f;i|=n[f],l&=~d}return Ji=i,kc(),a}function vv(n,i){Vt=null,w.H=_i,i===Ml?(i=M_(),te=3):i===x_?(i=M_(),te=4):te=i===Ny?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Dn=i,xt===null&&(me=1,nh(n,zn(i,n.current)))}function Ev(){var n=w.H;return w.H=_i,n===null?_i:n}function Tv(){var n=w.A;return w.A=jw,n}function Em(){me=4,Wi||(Ut&4194176)!==Ut&&Fn.current!==null||(lo=!0),!(jr&134217727)&&!(Zs&134217727)||Jt===null||tr(Jt,Ut,Qn,!1)}function Tm(n,i,a){var l=ue;ue|=2;var f=Ev(),d=Tv();(Jt!==n||Ut!==i)&&(ch=null,co(n,i)),i=!1;var v=me;t:do try{if(te!==0&&xt!==null){var T=xt,S=Dn;switch(te){case 8:vm(),v=6;break t;case 3:case 2:case 6:Fn.current===null&&(i=!0);var O=te;if(te=0,Dn=null,ho(n,T,S,O),a&&lo){v=0;break t}break;default:O=te,te=0,Dn=null,ho(n,T,S,O)}}Hw(),v=me;break}catch(Q){vv(n,Q)}while(!0);return i&&n.shellSuspendCounter++,Ki=Qs=null,ue=l,w.H=f,w.A=d,xt===null&&(Jt=null,Ut=0,kc()),v}function Hw(){for(;xt!==null;)Av(xt)}function Kw(n,i){var a=ue;ue|=2;var l=Ev(),f=Tv();Jt!==n||Ut!==i?(ch=null,uh=_n()+500,co(n,i)):lo=pr(n,i);t:do try{if(te!==0&&xt!==null){i=xt;var d=Dn;e:switch(te){case 1:te=0,Dn=null,ho(n,i,d,1);break;case 2:if(N_(d)){te=0,Dn=null,bv(i);break}i=function(){te===2&&Jt===n&&(te=7),vi(n)},d.then(i,i);break t;case 3:te=7;break t;case 4:te=5;break t;case 7:N_(d)?(te=0,Dn=null,bv(i)):(te=0,Dn=null,ho(n,i,d,7));break;case 5:var v=null;switch(xt.tag){case 26:v=xt.memoizedState;case 5:case 27:var T=xt;if(!v||Wv(v)){te=0,Dn=null;var S=T.sibling;if(S!==null)xt=S;else{var O=T.return;O!==null?(xt=O,dh(O)):xt=null}break e}}te=0,Dn=null,ho(n,i,d,5);break;case 6:te=0,Dn=null,ho(n,i,d,6);break;case 8:vm(),me=6;break t;default:throw Error(r(462))}}Qw();break}catch(Q){vv(n,Q)}while(!0);return Ki=Qs=null,w.H=l,w.A=f,ue=a,xt!==null?0:(Jt=null,Ut=0,kc(),me)}function Qw(){for(;xt!==null&&!$f();)Av(xt)}function Av(n){var i=Gy(n.alternate,n,Ji);n.memoizedProps=n.pendingProps,i===null?dh(n):xt=i}function bv(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=Uy(a,i,i.pendingProps,i.type,void 0,Ut);break;case 11:i=Uy(a,i,i.pendingProps,i.type.render,i.ref,Ut);break;case 5:Sd(i);default:gv(a,i),i=xt=fv(i,Ji),i=Gy(a,i,Ji)}n.memoizedProps=n.pendingProps,i===null?dh(n):xt=i}function ho(n,i,a,l){Ki=Qs=null,Sd(i),Wa=null,kl=0;var f=i.return;try{if(Pw(n,f,i,a,Ut)){me=1,nh(n,zn(a,n.current)),xt=null;return}}catch(d){if(f!==null)throw xt=f,d;me=1,nh(n,zn(a,n.current)),xt=null;return}i.flags&32768?(jt||l===1?n=!0:lo||Ut&536870912?n=!1:(Wi=n=!0,(l===2||l===3||l===6)&&(l=Fn.current,l!==null&&l.tag===13&&(l.flags|=16384))),wv(i,n)):dh(i)}function dh(n){var i=n;do{if(i.flags&32768){wv(i,Wi);return}n=i.return;var a=zw(i.alternate,i,Ji);if(a!==null){xt=a;return}if(i=i.sibling,i!==null){xt=i;return}xt=i=n}while(i!==null);me===0&&(me=5)}function wv(n,i){do{var a=qw(n.alternate,n);if(a!==null){a.flags&=32767,xt=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){xt=n;return}xt=n=a}while(n!==null);me=6,xt=null}function Sv(n,i,a,l,f,d,v,T,S,O){var Q=w.T,W=ot.p;try{ot.p=2,w.T=null,Yw(n,i,a,l,W,f,d,v,T,S,O)}finally{w.T=Q,ot.p=W}}function Yw(n,i,a,l,f,d,v,T){do fo();while(Ws!==null);if(ue&6)throw Error(r(327));var S=n.finishedWork;if(l=n.finishedLanes,S===null)return null;if(n.finishedWork=null,n.finishedLanes=0,S===n.current)throw Error(r(177));n.callbackNode=null,n.callbackPriority=0,n.cancelPendingCommit=null;var O=S.lanes|S.childLanes;if(O|=cd,gc(n,l,O,d,v,T),n===Jt&&(xt=Jt=null,Ut=0),!(S.subtreeFlags&10256)&&!(S.flags&10256)||hh||(hh=!0,gm=O,pm=a,Ww(xi,function(){return fo(),null})),a=(S.flags&15990)!==0,S.subtreeFlags&15990||a?(a=w.T,w.T=null,d=ot.p,ot.p=2,v=ue,ue|=4,Lw(n,S),sv(S,n),yw(Om,n.containerInfo),Sh=!!Nm,Om=Nm=null,n.current=S,ev(n,S.alternate,S),ul(),ue=v,ot.p=d,w.T=a):n.current=S,hh?(hh=!1,Ws=n,tu=l):Rv(n,O),O=n.pendingLanes,O===0&&(Fr=null),hl(S.stateNode),vi(n),i!==null)for(f=n.onRecoverableError,S=0;S<i.length;S++)O=i[S],f(O.value,{componentStack:O.stack});return tu&3&&fo(),O=n.pendingLanes,l&4194218&&O&42?n===_m?eu++:(eu=0,_m=n):eu=0,nu(0),null}function Rv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Ul(i)))}function fo(){if(Ws!==null){var n=Ws,i=gm;gm=0;var a=pc(tu),l=w.T,f=ot.p;try{if(ot.p=32>a?32:a,w.T=null,Ws===null)var d=!1;else{a=pm,pm=null;var v=Ws,T=tu;if(Ws=null,tu=0,ue&6)throw Error(r(331));var S=ue;if(ue|=4,cv(v.current),ov(v,v.current,T,a),ue=S,nu(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(mr,v)}catch{}d=!0}return d}finally{ot.p=f,w.T=l,Rv(n,i)}}return!1}function Iv(n,i,a){i=zn(a,i),i=Bd(n.stateNode,i,2),n=Lr(n,i,2),n!==null&&(_e(n,2),vi(n))}function Wt(n,i,a){if(n.tag===3)Iv(n,n,a);else for(;i!==null;){if(i.tag===3){Iv(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Fr===null||!Fr.has(l))){n=zn(a,n),a=Cy(2),l=Lr(i,a,2),l!==null&&(xy(a,l,i,n),_e(l,2),vi(l));break}}i=i.return}}function Am(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new Fw;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(hm=!0,f.add(a),n=$w.bind(null,n,i,a),i.then(n,n))}function $w(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,Jt===n&&(Ut&a)===a&&(me===4||me===3&&(Ut&62914560)===Ut&&300>_n()-mm?!(ue&2)&&co(n,0):fm|=a,uo===Ut&&(uo=0)),vi(n)}function Dv(n,i){i===0&&(i=_r()),n=Vr(n,i),n!==null&&(_e(n,i),vi(n))}function Xw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Dv(n,a)}function Zw(n,i){var a=0;switch(n.tag){case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Dv(n,a)}function Ww(n,i){return As(n,i)}var mh=null,mo=null,bm=!1,gh=!1,wm=!1,Js=0;function vi(n){n!==mo&&n.next===null&&(mo===null?mh=mo=n:mo=mo.next=n),gh=!0,bm||(bm=!0,tS(Jw))}function nu(n,i){if(!wm&&gh){wm=!0;do for(var a=!1,l=mh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var v=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-ln(42|n)+1)-1,d&=f&~(v&~T),d=d&201326677?d&201326677|1:d?d|2:0}d!==0&&(a=!0,xv(l,d))}else d=Ut,d=On(l,l===Jt?d:0),!(d&3)||pr(l,d)||(a=!0,xv(l,d));l=l.next}while(a);wm=!1}}function Jw(){gh=bm=!1;var n=0;Js!==0&&(lS()&&(n=Js),Js=0);for(var i=_n(),a=null,l=mh;l!==null;){var f=l.next,d=Vv(l,i);d===0?(l.next=null,a===null?mh=f:a.next=f,f===null&&(mo=a)):(a=l,(n!==0||d&3)&&(gh=!0)),l=f}nu(n)}function Vv(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var v=31-ln(d),T=1<<v,S=f[v];S===-1?(!(T&a)||T&l)&&(f[v]=xa(T,i)):S<=i&&(n.expiredLanes|=T),d&=~T}if(i=Jt,a=Ut,a=On(n,n===i?a:0),l=n.callbackNode,a===0||n===i&&te===2||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Ca(l),n.callbackNode=null,n.callbackPriority=0;if(!(a&3)||pr(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&Ca(l),pc(a)){case 2:case 8:a=Le;break;case 32:a=xi;break;case 268435456:a=cl;break;default:a=xi}return l=Cv.bind(null,n),a=As(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&Ca(l),n.callbackPriority=2,n.callbackNode=null,2}function Cv(n,i){var a=n.callbackNode;if(fo()&&n.callbackNode!==a)return null;var l=Ut;return l=On(n,n===Jt?l:0),l===0?null:(_v(n,l,i),Vv(n,_n()),n.callbackNode!=null&&n.callbackNode===a?Cv.bind(null,n):null)}function xv(n,i){if(fo())return null;_v(n,i,!0)}function tS(n){cS(function(){ue&6?As(Ce,n):n()})}function Sm(){return Js===0&&(Js=dl()),Js}function Nv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:li(""+n)}function Ov(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function eS(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=Nv((f[xe]||null).action),v=l.submitter;v&&(i=(i=v[xe]||null)?Nv(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var T=new Ua("action","action",null,l,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Js!==0){var S=v?Ov(f,v):new FormData(f);Md(a,{pending:!0,data:S,method:f.method,action:d},null,S)}}else typeof d=="function"&&(T.preventDefault(),S=v?Ov(f,v):new FormData(f),Md(a,{pending:!0,data:S,method:f.method,action:d},d,S))},currentTarget:f}]})}}for(var Rm=0;Rm<S_.length;Rm++){var Im=S_[Rm],nS=Im.toLowerCase(),iS=Im[0].toUpperCase()+Im.slice(1);Jn(nS,"on"+iS)}Jn(E_,"onAnimationEnd"),Jn(T_,"onAnimationIteration"),Jn(A_,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(Ew,"onTransitionRun"),Jn(Tw,"onTransitionStart"),Jn(Aw,"onTransitionCancel"),Jn(b_,"onTransitionEnd"),yn("onMouseEnter",["mouseout","mouseover"]),yn("onMouseLeave",["mouseout","mouseover"]),yn("onPointerEnter",["pointerout","pointerover"]),yn("onPointerLeave",["pointerout","pointerover"]),bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(iu));function Mv(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var T=l[v],S=T.instance,O=T.currentTarget;if(T=T.listener,S!==d&&f.isPropagationStopped())break t;d=T,f.currentTarget=O;try{d(f)}catch(Q){eh(Q)}f.currentTarget=null,d=S}else for(v=0;v<l.length;v++){if(T=l[v],S=T.instance,O=T.currentTarget,T=T.listener,S!==d&&f.isPropagationStopped())break t;d=T,f.currentTarget=O;try{d(f)}catch(Q){eh(Q)}f.currentTarget=null,d=S}}}}function Mt(n,i){var a=i[ws];a===void 0&&(a=i[ws]=new Set);var l=n+"__bubble";a.has(l)||(Pv(i,n,2,!1),a.add(l))}function Dm(n,i,a){var l=0;i&&(l|=4),Pv(a,n,l,i)}var ph="_reactListening"+Math.random().toString(36).slice(2);function Vm(n){if(!n[ph]){n[ph]=!0,gl.forEach(function(a){a!=="selectionchange"&&(rS.has(a)||Dm(a,!1,n),Dm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[ph]||(i[ph]=!0,Dm("selectionchange",!1,i))}}function Pv(n,i,a,l){switch(rE(i)){case 2:var f=CS;break;case 8:f=xS;break;default:f=jm}a=f.bind(null,i,a,n),f=void 0,!Ln||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Cm(n,i,a,l,f){var d=l;if(!(i&1)&&!(i&2)&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var T=l.stateNode.containerInfo;if(T===f||T.nodeType===8&&T.parentNode===f)break;if(v===4)for(v=l.return;v!==null;){var S=v.tag;if((S===3||S===4)&&(S=v.stateNode.containerInfo,S===f||S.nodeType===8&&S.parentNode===f))return;v=v.return}for(;T!==null;){if(v=Wn(T),v===null)return;if(S=v.tag,S===5||S===6||S===26||S===27){l=d=v;continue t}T=T.parentNode}}l=l.return}Tc(function(){var O=d,Q=La(a),W=[];t:{var q=w_.get(n);if(q!==void 0){var G=Ua,dt=n;switch(n){case"keypress":if(ci(a)===0)break t;case"keydown":case"keyup":G=Ga;break;case"focusin":dt="focus",G=qa;break;case"focusout":dt="blur",G=qa;break;case"beforeblur":case"afterblur":G=qa;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Un;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=nd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=Vc;break;case E_:case T_:case A_:G=ja;break;case b_:G=xc;break;case"scroll":case"scrollend":G=Ac;break;case"wheel":G=Ha;break;case"copy":case"cut":case"paste":G=Fa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Il;break;case"toggle":case"beforetoggle":G=Oc}var bt=(i&4)!==0,ge=!bt&&(n==="scroll"||n==="scrollend"),k=bt?q!==null?q+"Capture":null:q;bt=[];for(var x=O,z;x!==null;){var $=x;if(z=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||z===null||k===null||($=Vs(x,k),$!=null&&bt.push(ru(x,$,z))),ge)break;x=x.return}0<bt.length&&(q=new G(q,dt,null,a,Q),W.push({event:q,listeners:bt}))}}if(!(i&7)){t:{if(q=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",q&&a!==kn&&(dt=a.relatedTarget||a.fromElement)&&(Wn(dt)||dt[Ni]))break t;if((G||q)&&(q=Q.window===Q?Q:(q=Q.ownerDocument)?q.defaultView||q.parentWindow:window,G?(dt=a.relatedTarget||a.toElement,G=O,dt=dt?Wn(dt):null,dt!==null&&(ge=yt(dt),bt=dt.tag,dt!==ge||bt!==5&&bt!==27&&bt!==6)&&(dt=null)):(G=null,dt=O),G!==dt)){if(bt=Un,$="onMouseLeave",k="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(bt=Il,$="onPointerLeave",k="onPointerEnter",x="pointer"),ge=G==null?q:Ar(G),z=dt==null?q:Ar(dt),q=new bt($,x+"leave",G,a,Q),q.target=ge,q.relatedTarget=z,$=null,Wn(Q)===O&&(bt=new bt(k,x+"enter",dt,a,Q),bt.target=z,bt.relatedTarget=ge,$=bt),ge=$,G&&dt)e:{for(bt=G,k=dt,x=0,z=bt;z;z=go(z))x++;for(z=0,$=k;$;$=go($))z++;for(;0<x-z;)bt=go(bt),x--;for(;0<z-x;)k=go(k),z--;for(;x--;){if(bt===k||k!==null&&bt===k.alternate)break e;bt=go(bt),k=go(k)}bt=null}else bt=null;G!==null&&kv(W,q,G,bt,!1),dt!==null&&ge!==null&&kv(W,ge,dt,bt,!0)}}t:{if(q=O?Ar(O):window,G=q.nodeName&&q.nodeName.toLowerCase(),G==="select"||G==="input"&&q.type==="file")var lt=u_;else if(Oe(q))if(c_)lt=pw;else{lt=mw;var Ct=dw}else G=q.nodeName,!G||G.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?O&&El(O.elementType)&&(lt=u_):lt=gw;if(lt&&(lt=lt(n,O))){zi(W,lt,a,Q);break t}Ct&&Ct(n,q,O),n==="focusout"&&O&&q.type==="number"&&O.memoizedProps.value!=null&&ka(q,"number",q.value)}switch(Ct=O?Ar(O):window,n){case"focusin":(Oe(Ct)||Ct.contentEditable==="true")&&(Ka=Ct,od=O,Cl=null);break;case"focusout":Cl=od=Ka=null;break;case"mousedown":ld=!0;break;case"contextmenu":case"mouseup":case"dragend":ld=!1,y_(W,a,Q);break;case"selectionchange":if(vw)break;case"keydown":case"keyup":y_(W,a,Q)}var _t;if(di)t:{switch(n){case"compositionstart":var vt="onCompositionStart";break t;case"compositionend":vt="onCompositionEnd";break t;case"compositionupdate":vt="onCompositionUpdate";break t}vt=void 0}else kt?F(n,a)&&(vt="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(vt="onCompositionStart");vt&&(y&&a.locale!=="ko"&&(kt||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&kt&&(_t=Al()):(ui=Q,Dr="value"in ui?ui.value:ui.textContent,kt=!0)),Ct=_h(O,vt),0<Ct.length&&(vt=new Sl(vt,n,null,a,Q),W.push({event:vt,listeners:Ct}),_t?vt.data=_t:(_t=et(a),_t!==null&&(vt.data=_t)))),(_t=p?Ne(n,a):Lt(n,a))&&(vt=_h(O,"onBeforeInput"),0<vt.length&&(Ct=new Sl("onBeforeInput","beforeinput",null,a,Q),W.push({event:Ct,listeners:vt}),Ct.data=_t)),eS(W,n,O,a,Q)}Mv(W,i)})}function ru(n,i,a){return{instance:n,listener:i,currentTarget:a}}function _h(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Vs(n,a),f!=null&&l.unshift(ru(n,f,d)),f=Vs(n,i),f!=null&&l.push(ru(n,f,d))),n=n.return}return l}function go(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function kv(n,i,a,l,f){for(var d=i._reactName,v=[];a!==null&&a!==l;){var T=a,S=T.alternate,O=T.stateNode;if(T=T.tag,S!==null&&S===l)break;T!==5&&T!==26&&T!==27||O===null||(S=O,f?(O=Vs(a,d),O!=null&&v.unshift(ru(a,O,S))):f||(O=Vs(a,d),O!=null&&v.push(ru(a,O,S)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var sS=/\r\n?/g,aS=/\u0000|\uFFFD/g;function Lv(n){return(typeof n=="string"?n:""+n).replace(sS,`
`).replace(aS,"")}function Uv(n,i){return i=Lv(i),Lv(n)===i}function yh(){}function Zt(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Pn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Pn(n,""+l);break;case"className":Sr(n,"class",l);break;case"tabIndex":Sr(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Sr(n,a,l);break;case"style":Ec(n,l,d);break;case"data":if(i!=="object"){Sr(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=li(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Zt(n,i,"name",f.name,f,null),Zt(n,i,"formEncType",f.formEncType,f,null),Zt(n,i,"formMethod",f.formMethod,f,null),Zt(n,i,"formTarget",f.formTarget,f,null)):(Zt(n,i,"encType",f.encType,f,null),Zt(n,i,"method",f.method,f,null),Zt(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=li(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=yh);break;case"onScroll":l!=null&&Mt("scroll",n);break;case"onScrollEnd":l!=null&&Mt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=li(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Mt("beforetoggle",n),Mt("toggle",n),wr(n,"popover",l);break;case"xlinkActuate":Mn(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Mn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Mn(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Mn(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Mn(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Mn(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Mn(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Mn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Mn(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":wr(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=td.get(a)||a,wr(n,a,l))}}function xm(n,i,a,l,f,d){switch(a){case"style":Ec(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Pn(n,l):(typeof l=="number"||typeof l=="bigint")&&Pn(n,""+l);break;case"onScroll":l!=null&&Mt("scroll",n);break;case"onScrollEnd":l!=null&&Mt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=yh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ma.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[xe]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):wr(n,a,l)}}}function $e(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mt("error",n),Mt("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Zt(n,i,d,v,a,null)}}f&&Zt(n,i,"srcSet",a.srcSet,a,null),l&&Zt(n,i,"src",a.src,a,null);return;case"input":Mt("invalid",n);var T=d=v=f=null,S=null,O=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":f=Q;break;case"type":v=Q;break;case"checked":S=Q;break;case"defaultChecked":O=Q;break;case"value":d=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:Zt(n,i,l,Q,a,null)}}Is(n,d,T,S,O,v,f,!1),Rs(n);return;case"select":Mt("invalid",n),l=v=d=null;for(f in a)if(a.hasOwnProperty(f)&&(T=a[f],T!=null))switch(f){case"value":d=T;break;case"defaultValue":v=T;break;case"multiple":l=T;default:Zt(n,i,f,T,a,null)}i=d,a=v,n.multiple=!!l,i!=null?qt(n,!!l,i,!1):a!=null&&qt(n,!!l,a,!0);return;case"textarea":Mt("invalid",n),d=f=l=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":l=T;break;case"defaultValue":f=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:Zt(n,i,v,T,a,null)}Ir(n,l,f,d),Rs(n);return;case"option":for(S in a)if(a.hasOwnProperty(S)&&(l=a[S],l!=null))switch(S){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Zt(n,i,S,l,a,null)}return;case"dialog":Mt("cancel",n),Mt("close",n);break;case"iframe":case"object":Mt("load",n);break;case"video":case"audio":for(l=0;l<iu.length;l++)Mt(iu[l],n);break;case"image":Mt("error",n),Mt("load",n);break;case"details":Mt("toggle",n);break;case"embed":case"source":case"link":Mt("error",n),Mt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Zt(n,i,O,l,a,null)}return;default:if(El(i)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&xm(n,i,Q,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&Zt(n,i,T,l,a,null))}function oS(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,v=null,T=null,S=null,O=null,Q=null;for(G in a){var W=a[G];if(a.hasOwnProperty(G)&&W!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":S=W;default:l.hasOwnProperty(G)||Zt(n,i,G,null,l,W)}}for(var q in l){var G=l[q];if(W=a[q],l.hasOwnProperty(q)&&(G!=null||W!=null))switch(q){case"type":d=G;break;case"name":f=G;break;case"checked":O=G;break;case"defaultChecked":Q=G;break;case"value":v=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:G!==W&&Zt(n,i,q,G,l,W)}}Rr(n,v,T,S,O,Q,d,f);return;case"select":G=v=T=q=null;for(d in a)if(S=a[d],a.hasOwnProperty(d)&&S!=null)switch(d){case"value":break;case"multiple":G=S;default:l.hasOwnProperty(d)||Zt(n,i,d,null,l,S)}for(f in l)if(d=l[f],S=a[f],l.hasOwnProperty(f)&&(d!=null||S!=null))switch(f){case"value":q=d;break;case"defaultValue":T=d;break;case"multiple":v=d;default:d!==S&&Zt(n,i,f,d,l,S)}i=T,a=v,l=G,q!=null?qt(n,!!a,q,!1):!!l!=!!a&&(i!=null?qt(n,!!a,i,!0):qt(n,!!a,a?[]:"",!1));return;case"textarea":G=q=null;for(T in a)if(f=a[T],a.hasOwnProperty(T)&&f!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Zt(n,i,T,null,l,f)}for(v in l)if(f=l[v],d=a[v],l.hasOwnProperty(v)&&(f!=null||d!=null))switch(v){case"value":q=f;break;case"defaultValue":G=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&Zt(n,i,v,f,l,d)}Ds(n,q,G);return;case"option":for(var dt in a)if(q=a[dt],a.hasOwnProperty(dt)&&q!=null&&!l.hasOwnProperty(dt))switch(dt){case"selected":n.selected=!1;break;default:Zt(n,i,dt,null,l,q)}for(S in l)if(q=l[S],G=a[S],l.hasOwnProperty(S)&&q!==G&&(q!=null||G!=null))switch(S){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Zt(n,i,S,q,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var bt in a)q=a[bt],a.hasOwnProperty(bt)&&q!=null&&!l.hasOwnProperty(bt)&&Zt(n,i,bt,null,l,q);for(O in l)if(q=l[O],G=a[O],l.hasOwnProperty(O)&&q!==G&&(q!=null||G!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:Zt(n,i,O,q,l,G)}return;default:if(El(i)){for(var ge in a)q=a[ge],a.hasOwnProperty(ge)&&q!==void 0&&!l.hasOwnProperty(ge)&&xm(n,i,ge,void 0,l,q);for(Q in l)q=l[Q],G=a[Q],!l.hasOwnProperty(Q)||q===G||q===void 0&&G===void 0||xm(n,i,Q,q,l,G);return}}for(var k in a)q=a[k],a.hasOwnProperty(k)&&q!=null&&!l.hasOwnProperty(k)&&Zt(n,i,k,null,l,q);for(W in l)q=l[W],G=a[W],!l.hasOwnProperty(W)||q===G||q==null&&G==null||Zt(n,i,W,q,l,G)}var Nm=null,Om=null;function vh(n){return n.nodeType===9?n:n.ownerDocument}function Bv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Mm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Pm=null;function lS(){var n=window.event;return n&&n.type==="popstate"?n===Pm?!1:(Pm=n,!0):(Pm=null,!1)}var qv=typeof setTimeout=="function"?setTimeout:void 0,uS=typeof clearTimeout=="function"?clearTimeout:void 0,jv=typeof Promise=="function"?Promise:void 0,cS=typeof queueMicrotask=="function"?queueMicrotask:typeof jv<"u"?function(n){return jv.resolve(null).then(n).catch(hS)}:qv;function hS(n){setTimeout(function(){throw n})}function km(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(l===0){n.removeChild(f),fu(i);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=f}while(a);fu(i)}function Lm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Lm(a),Ss(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function fS(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Tr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=ni(n.nextSibling),n===null)break}return null}function dS(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ni(n.nextSibling),n===null))return null;return n}function ni(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}function Fv(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}function Gv(n,i,a){switch(i=vh(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}var Yn=new Map,Hv=new Set;function Eh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.ownerDocument}var er=ot.d;ot.d={f:mS,r:gS,D:pS,C:_S,L:yS,m:vS,X:TS,S:ES,M:AS};function mS(){var n=er.f(),i=fh();return n||i}function gS(n){var i=Oi(n);i!==null&&i.tag===5&&i.type==="form"?yy(i):er.r(n)}var po=typeof document>"u"?null:document;function Kv(n,i,a){var l=po;if(l&&typeof i=="string"&&i){var f=fe(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Hv.has(f)||(Hv.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),$e(i,"link",n),oe(i),l.head.appendChild(i)))}}function pS(n){er.D(n),Kv("dns-prefetch",n,null)}function _S(n,i){er.C(n,i),Kv("preconnect",n,i)}function yS(n,i,a){er.L(n,i,a);var l=po;if(l&&n&&i){var f='link[rel="preload"][as="'+fe(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+fe(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+fe(a.imageSizes)+'"]')):f+='[href="'+fe(n)+'"]';var d=f;switch(i){case"style":d=_o(n);break;case"script":d=yo(n)}Yn.has(d)||(n=V({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Yn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(su(d))||i==="script"&&l.querySelector(au(d))||(i=l.createElement("link"),$e(i,"link",n),oe(i),l.head.appendChild(i)))}}function vS(n,i){er.m(n,i);var a=po;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+fe(l)+'"][href="'+fe(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=yo(n)}if(!Yn.has(d)&&(n=V({rel:"modulepreload",href:n},i),Yn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(au(d)))return}l=a.createElement("link"),$e(l,"link",n),oe(l),a.head.appendChild(l)}}}function ES(n,i,a){er.S(n,i,a);var l=po;if(l&&n){var f=br(l).hoistableStyles,d=_o(n);i=i||"default";var v=f.get(d);if(!v){var T={loading:0,preload:null};if(v=l.querySelector(su(d)))T.loading=5;else{n=V({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Yn.get(d))&&Um(n,a);var S=v=l.createElement("link");oe(S),$e(S,"link",n),S._p=new Promise(function(O,Q){S.onload=O,S.onerror=Q}),S.addEventListener("load",function(){T.loading|=1}),S.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Th(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:T},f.set(d,v)}}}function TS(n,i){er.X(n,i);var a=po;if(a&&n){var l=br(a).hoistableScripts,f=yo(n),d=l.get(f);d||(d=a.querySelector(au(f)),d||(n=V({src:n,async:!0},i),(i=Yn.get(f))&&Bm(n,i),d=a.createElement("script"),oe(d),$e(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function AS(n,i){er.M(n,i);var a=po;if(a&&n){var l=br(a).hoistableScripts,f=yo(n),d=l.get(f);d||(d=a.querySelector(au(f)),d||(n=V({src:n,async:!0,type:"module"},i),(i=Yn.get(f))&&Bm(n,i),d=a.createElement("script"),oe(d),$e(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Qv(n,i,a,l){var f=(f=Nn.current)?Eh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=_o(a.href),a=br(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=_o(a.href);var d=br(f).hoistableStyles,v=d.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,v),(d=f.querySelector(su(n)))&&!d._p&&(v.instance=d,v.state.loading=5),Yn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(n,a),d||bS(f,n,a,v.state))),i&&l===null)throw Error(r(528,""));return v}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=yo(a),a=br(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function _o(n){return'href="'+fe(n)+'"'}function su(n){return'link[rel="stylesheet"]['+n+"]"}function Yv(n){return V({},n,{"data-precedence":n.precedence,precedence:null})}function bS(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),$e(i,"link",a),oe(i),n.head.appendChild(i))}function yo(n){return'[src="'+fe(n)+'"]'}function au(n){return"script[async]"+n}function $v(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+fe(a.href)+'"]');if(l)return i.instance=l,oe(l),l;var f=V({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),oe(l),$e(l,"style",f),Th(l,a.precedence,n),i.instance=l;case"stylesheet":f=_o(a.href);var d=n.querySelector(su(f));if(d)return i.state.loading|=4,i.instance=d,oe(d),d;l=Yv(a),(f=Yn.get(f))&&Um(l,f),d=(n.ownerDocument||n).createElement("link"),oe(d);var v=d;return v._p=new Promise(function(T,S){v.onload=T,v.onerror=S}),$e(d,"link",l),i.state.loading|=4,Th(d,a.precedence,n),i.instance=d;case"script":return d=yo(a.src),(f=n.querySelector(au(d)))?(i.instance=f,oe(f),f):(l=a,(f=Yn.get(d))&&(l=V({},a),Bm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),oe(f),$e(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&!(i.state.loading&4)&&(l=i.instance,i.state.loading|=4,Th(l,a.precedence,n));return i.instance}function Th(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,v=0;v<l.length;v++){var T=l[v];if(T.dataset.precedence===i)d=T;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function Um(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Bm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Ah=null;function Xv(n,i,a){if(Ah===null){var l=new Map,f=Ah=new Map;f.set(a,l)}else f=Ah,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[Tr]||d[Ue]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=n+v;var T=l.get(v);T?T.push(d):l.set(v,[d])}}return l}function Zv(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function wS(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Wv(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}var ou=null;function SS(){}function RS(n,i,a){if(ou===null)throw Error(r(475));var l=ou;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(i.state.loading&4)){if(i.instance===null){var f=_o(a.href),d=n.querySelector(su(f));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=bh.bind(l),n.then(l,l)),i.state.loading|=4,i.instance=d,oe(d);return}d=n.ownerDocument||n,a=Yv(a),(f=Yn.get(f))&&Um(a,f),d=d.createElement("link"),oe(d);var v=d;v._p=new Promise(function(T,S){v.onload=T,v.onerror=S}),$e(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,n),(n=i.state.preload)&&!(i.state.loading&3)&&(l.count++,i=bh.bind(l),n.addEventListener("load",i),n.addEventListener("error",i))}}function IS(){if(ou===null)throw Error(r(475));var n=ou;return n.stylesheets&&n.count===0&&zm(n,n.stylesheets),0<n.count?function(i){var a=setTimeout(function(){if(n.stylesheets&&zm(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(a)}}:null}function bh(){if(this.count--,this.count===0){if(this.stylesheets)zm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var wh=null;function zm(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,wh=new Map,i.forEach(DS,n),wh=null,bh.call(n))}function DS(n,i){if(!(i.state.loading&4)){var a=wh.get(n);if(a)var l=a.get(null);else{a=new Map,wh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var v=f[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}f=i.instance,v=f.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,f),a.set(v,f),this.count++,l=bh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var lu={$$typeof:P,Provider:null,Consumer:null,_currentValue:Dt,_currentValue2:Dt,_threadCount:0};function VS(n,i,a,l,f,d,v,T){this.tag=1,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Na(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Na(0),this.hiddenUpdates=Na(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Jv(n,i,a,l,f,d,v,T,S,O,Q,W){return n=new VS(n,i,a,v,T,S,O,W),i=1,d===!0&&(i|=24),d=Kn(3,null,null,i),n.current=d,d.stateNode=n,i=yd(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Wd(d),n}function tE(n){return n?(n=$a,n):$a}function eE(n,i,a,l,f,d){f=tE(f),l.context===null?l.context=f:l.pendingContext=f,l=kr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Lr(n,l,i),a!==null&&(fn(a,n,i),Hl(a,n,i))}function nE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function qm(n,i){nE(n,i),(n=n.alternate)&&nE(n,i)}function iE(n){if(n.tag===13){var i=Vr(n,67108864);i!==null&&fn(i,n,67108864),qm(n,67108864)}}var Sh=!0;function CS(n,i,a,l){var f=w.T;w.T=null;var d=ot.p;try{ot.p=2,jm(n,i,a,l)}finally{ot.p=d,w.T=f}}function xS(n,i,a,l){var f=w.T;w.T=null;var d=ot.p;try{ot.p=8,jm(n,i,a,l)}finally{ot.p=d,w.T=f}}function jm(n,i,a,l){if(Sh){var f=Fm(l);if(f===null)Cm(n,i,l,Rh,a),sE(n,l);else if(OS(f,n,i,a,l))l.stopPropagation();else if(sE(n,l),i&4&&-1<NS.indexOf(n)){for(;f!==null;){var d=Oi(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Zn(d.pendingLanes);if(v!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var S=1<<31-ln(v);T.entanglements[1]|=S,v&=~S}vi(d),!(ue&6)&&(uh=_n()+500,nu(0))}}break;case 13:T=Vr(d,2),T!==null&&fn(T,d,2),fh(),qm(d,2)}if(d=Fm(l),d===null&&Cm(n,i,l,Rh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Cm(n,i,l,null,a)}}function Fm(n){return n=La(n),Gm(n)}var Rh=null;function Gm(n){if(Rh=null,n=Wn(n),n!==null){var i=yt(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=Ht(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Rh=n,null}function rE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hc()){case Ce:return 2;case Le:return 8;case xi:case fc:return 32;case cl:return 268435456;default:return 32}default:return 32}}var Hm=!1,Gr=null,Hr=null,Kr=null,uu=new Map,cu=new Map,Qr=[],NS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sE(n,i){switch(n){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":uu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":cu.delete(i.pointerId)}}function hu(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Oi(i),i!==null&&iE(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function OS(n,i,a,l,f){switch(i){case"focusin":return Gr=hu(Gr,n,i,a,l,f),!0;case"dragenter":return Hr=hu(Hr,n,i,a,l,f),!0;case"mouseover":return Kr=hu(Kr,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return uu.set(d,hu(uu.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,cu.set(d,hu(cu.get(d)||null,n,i,a,l,f)),!0}return!1}function aE(n){var i=Wn(n.target);if(i!==null){var a=yt(i);if(a!==null){if(i=a.tag,i===13){if(i=Ht(a),i!==null){n.blockedOn=i,Er(n.priority,function(){if(a.tag===13){var l=Vn(),f=Vr(a,l);f!==null&&fn(f,a,l),qm(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ih(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Fm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);kn=l,a.target.dispatchEvent(l),kn=null}else return i=Oi(a),i!==null&&iE(i),n.blockedOn=a,!1;i.shift()}return!0}function oE(n,i,a){Ih(n)&&a.delete(i)}function MS(){Hm=!1,Gr!==null&&Ih(Gr)&&(Gr=null),Hr!==null&&Ih(Hr)&&(Hr=null),Kr!==null&&Ih(Kr)&&(Kr=null),uu.forEach(oE),cu.forEach(oE)}function Dh(n,i){n.blockedOn===i&&(n.blockedOn=null,Hm||(Hm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,MS)))}var Vh=null;function lE(n){Vh!==n&&(Vh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Vh===n&&(Vh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(Gm(l||a)===null)continue;break}var d=Oi(a);d!==null&&(n.splice(i,3),i-=3,Md(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function fu(n){function i(S){return Dh(S,n)}Gr!==null&&Dh(Gr,n),Hr!==null&&Dh(Hr,n),Kr!==null&&Dh(Kr,n),uu.forEach(i),cu.forEach(i);for(var a=0;a<Qr.length;a++){var l=Qr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Qr.length&&(a=Qr[0],a.blockedOn===null);)aE(a),a.blockedOn===null&&Qr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],v=f[xe]||null;if(typeof d=="function")v||lE(a);else if(v){var T=null;if(d&&d.hasAttribute("formAction")){if(f=d,v=d[xe]||null)T=v.formAction;else if(Gm(f)!==null)continue}else T=v.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),lE(a)}}}function Km(n){this._internalRoot=n}Ch.prototype.render=Km.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Vn();eE(a,l,n,i,null,null)},Ch.prototype.unmount=Km.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;n.tag===0&&fo(),eE(n.current,2,null,n,null,null),fh(),i[Ni]=null}};function Ch(n){this._internalRoot=n}Ch.prototype.unstable_scheduleHydration=function(n){if(n){var i=_c();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Qr.length&&i!==0&&i<Qr[a].priority;a++);Qr.splice(a,0,n),a===0&&aE(n)}};var uE=t.version;if(uE!=="19.0.0")throw Error(r(527,uE,"19.0.0"));ot.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=tt(i),n=n!==null?pt(n):null,n=n===null?null:n.stateNode,n};var PS={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:w,findFiberByHostInstance:Wn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xh.isDisabled&&xh.supportsFiber)try{mr=xh.inject(PS),Je=xh}catch{}}return mu.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=Ry,d=Iy,v=Dy,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=Jv(n,1,!1,null,null,a,l,f,d,v,T,null),n[Ni]=i.current,Vm(n.nodeType===8?n.parentNode:n),new Km(i)},mu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=Ry,v=Iy,T=Dy,S=null,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(S=a.unstable_transitionCallbacks),a.formState!==void 0&&(O=a.formState)),i=Jv(n,1,!0,i,a??null,l,f,d,v,T,S,O),i.context=tE(null),a=i.current,l=Vn(),f=kr(l),f.callback=null,Lr(a,f,l),i.current.lanes=l,_e(i,l),vi(i),n[Ni]=i.current,Vm(n),new Ch(i)},mu.version="19.0.0",mu}var vE;function HS(){if(vE)return $m.exports;vE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),$m.exports=GS(),$m.exports}var KS=HS();function QS(){return H.jsx("footer",{children:H.jsx("h1",{children:"Respalder Parroquial"})})}const YS="https://xipeRafa.github.io/rp-public/assets/title-CgV3gxTa.webp",$S="https://xipeRafa.github.io/rp-public/assets/titleMobil-BFbwG_4c.webp",XS="https://xipeRafa.github.io/rp-public/assets/footer-DosoVkMs.webp",ZS="https://xipeRafa.github.io/rp-public/assets/footerMobil-BTuwlHxR.webp";function WS(){return H.jsxs("div",{className:"snip1214",children:[H.jsxs("div",{className:"plan featured",children:[H.jsx("h3",{className:"plan-title",children:"1 mes"}),H.jsx("div",{className:"plan-cost",children:H.jsx("span",{className:"plan-price",children:"$123"})}),H.jsxs("ul",{className:"plan-features",children:[H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark",children:" "}),"Primer Semana Gratis"]}),H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark",children:" "}),"Tech Support"]}),H.jsx("li",{children:H.jsx("i",{className:"ion-checkmark transparent",children:" "})}),H.jsx("li",{children:H.jsx("i",{className:"ion-checkmark transparent",children:" "})}),H.jsx("li",{children:H.jsx("i",{className:"ion-checkmark transparent",children:" "})}),H.jsx("li",{children:H.jsx("i",{className:"ion-checkmark transparent",children:" "})})]}),H.jsx("div",{className:"plan-select",children:H.jsx("a",{href:"",children:"Solicitar"})})]}),H.jsxs("div",{className:"plan",children:[H.jsx("h3",{className:"plan-title",children:"1 Ao"}),H.jsx("div",{className:"plan-cost",children:H.jsx("span",{className:"plan-price",children:"$1,476"})}),H.jsxs("ul",{className:"plan-features",children:[H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark",children:" "})," Primer Mes Gratis"]}),H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark",children:" "})," $123 / Mensual"]}),H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark ",children:" "})," Tech Support"]}),H.jsx("li",{children:H.jsx("i",{className:"ion-checkmark transparent",children:" "})}),H.jsx("li",{children:H.jsx("i",{className:"ion-checkmark transparent",children:" "})}),H.jsx("li",{children:H.jsx("i",{className:"ion-checkmark transparent",children:" "})})]}),H.jsx("div",{className:"plan-select",children:H.jsx("a",{href:"",children:"Solicitar"})})]}),H.jsxs("div",{className:"plan featured",children:[H.jsx("h3",{className:"plan-title",children:"super"}),H.jsx("div",{className:"plan-cost",children:H.jsx("span",{className:"plan-price",children:"$4,400"})}),H.jsxs("ul",{className:"plan-features",children:[H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark",children:" "}),"  ",H.jsx("b",{children:"4 AOS"})]}),H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark",children:" "})," ",H.jsx("b",{children:"PRIMER AO GRATIS"})]}),H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark",children:" "}),"$1,100 Anual"]}),H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark",children:" "}),"$91.6 Mensual"]}),H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark",children:" "}),"Tech Support"]}),H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark",children:" "}),"5 AOS EN TU PRIMER PAGO"]})]}),H.jsx("div",{className:"plan-select",children:H.jsx("a",{href:"",children:"Solicitar"})})]}),H.jsxs("div",{className:"plan",children:[H.jsx("h3",{className:"plan-title",children:"Ultra"}),H.jsx("div",{className:"plan-cost",children:H.jsx("span",{className:"plan-price",children:"$12,000"})}),H.jsxs("ul",{className:"plan-features",children:[H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark",children:" "})," ",H.jsx("b",{children:"12 AOS"})]}),H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark",children:" "}),"PRIMER AO GRATIS"]}),H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark",children:" "}),"$1,000 Anual"]}),H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark",children:" "}),"$83.3 Mensual"]}),H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark",children:" "}),"Tech Support"]}),H.jsxs("li",{children:[H.jsx("i",{className:"ion-checkmark",children:" "}),"13 AOS EN TU PRIMER PAGO"]})]}),H.jsx("div",{className:"plan-select",children:H.jsx("a",{href:"",children:"Solicitar"})})]})]})}var EE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=function(s){const t=[];let e=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},JS=function(s){const t=[];let e=0,r=0;for(;e<s.length;){const o=s[e++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[e++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[e++],h=s[e++],m=s[e++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[e++],h=s[e++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return t.join("")},s0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,_=g?s[o+2]:0,E=u>>2,A=(u&3)<<4|m>>4;let R=(m&15)<<2|_>>6,P=_&63;g||(P=64,h||(R=64)),r.push(e[E],e[A],e[R],e[P])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(r0(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):JS(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=e[s.charAt(o++)],m=o<s.length?e[s.charAt(o)]:0;++o;const _=o<s.length?e[s.charAt(o)]:64;++o;const A=o<s.length?e[s.charAt(o)]:64;if(++o,u==null||m==null||_==null||A==null)throw new tR;const R=u<<2|m>>4;if(r.push(R),_!==64){const P=m<<4&240|_>>2;if(r.push(P),A!==64){const Y=_<<6&192|A;r.push(Y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class tR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eR=function(s){const t=r0(s);return s0.encodeByteArray(t,!0)},Xh=function(s){return eR(s).replace(/\./g,"")},a0=function(s){try{return s0.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Zh(s,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:s===void 0&&(s={});break;case Array:s=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!nR(e)||(s[e]=Zh(s[e],t[e]));return s}function nR(s){return s!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=()=>o0().__FIREBASE_DEFAULTS__,rR=()=>{if(typeof process>"u"||typeof EE>"u")return;const s=EE.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},sR=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&a0(s[1]);return t&&JSON.parse(t)},Gg=()=>{try{return iR()||rR()||sR()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},aR=s=>{var t,e;return(e=(t=Gg())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[s]},oR=s=>{const t=aR(s);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},l0=()=>{var s;return(s=Gg())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Xh(JSON.stringify(e)),Xh(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cR(){var s;const t=(s=Gg())===null||s===void 0?void 0:s.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hR(){return typeof window<"u"||u0()}function u0(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function c0(){return!cR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function h0(){try{return typeof indexedDB=="object"}catch{return!1}}function fR(){return new Promise((s,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{var u;t(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="FirebaseError";class ba extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=dR,Object.setPrototypeOf(this,ba.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tf.prototype.create)}}class Tf{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},o=`${this.service}/${t}`,u=this.errors[t],h=u?mR(u,r):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new ba(o,m,r)}}function mR(s,t){return s.replace(gR,(e,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const gR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function xu(s,t){if(s===t)return!0;const e=Object.keys(s),r=Object.keys(t);for(const o of e){if(!r.includes(o))return!1;const u=s[o],h=t[o];if(AE(u)&&AE(h)){if(!xu(u,h))return!1}else if(u!==h)return!1}for(const o of r)if(!e.includes(o))return!1;return!0}function AE(s){return s!==null&&typeof s=="object"}function pR(s,t){const e=new _R(s,t);return e.subscribe.bind(e)}class _R{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let o;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");yR(t,["next","error","complete"])?o=t:o={next:t,error:e,complete:r},o.next===void 0&&(o.next=Jm),o.error===void 0&&(o.error=Jm),o.complete===void 0&&(o.complete=Jm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yR(s,t){if(typeof s!="object"||s===null)return!1;for(const e of t)if(e in s&&typeof s[e]=="function")return!0;return!1}function Jm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(s){return s&&s._delegate?s._delegate:s}class da{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new lR;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:e});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(TR(t))try{this.getOrInitializeService({instanceIdentifier:ea})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=ea){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ea){return this.instances.has(t)}getOptions(t=ea){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&h.resolve(o)}return o}onInit(t,e){var r;const o=this.normalizeInstanceIdentifier(e),u=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;u.add(t),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&t(h,o),()=>{u.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const o of r)try{o(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ER(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ea){return this.component?this.component.multipleInstances?t:ea:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ER(s){return s===ea?void 0:s}function TR(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new vR(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg=[];var Pt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pt||(Pt={}));const d0={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},AR=Pt.INFO,bR={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},wR=(s,t,...e)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=bR[t];if(o)console[o](`[${r}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Kg{constructor(t){this.name=t,this._logLevel=AR,this._logHandler=wR,this._userLogHandler=null,Hg.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?d0[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}function SR(s){Hg.forEach(t=>{t.setLogLevel(s)})}function RR(s,t){for(const e of Hg){let r=null;t&&t.level&&(r=d0[t.level]),s===null?e.userLogHandler=null:e.userLogHandler=(o,u,...h)=>{const m=h.map(g=>{if(g==null)return null;if(typeof g=="string")return g;if(typeof g=="number"||typeof g=="boolean")return g.toString();if(g instanceof Error)return g.message;try{return JSON.stringify(g)}catch{return null}}).filter(g=>g).join(" ");u>=(r??o.logLevel)&&s({level:Pt[u].toLowerCase(),message:m,args:h,type:o.name})}}}const IR=(s,t)=>t.some(e=>s instanceof e);let bE,wE;function DR(){return bE||(bE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VR(){return wE||(wE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const m0=new WeakMap,fg=new WeakMap,g0=new WeakMap,tg=new WeakMap,Qg=new WeakMap;function CR(s){const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{e(ns(s.result)),o()},h=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return t.then(e=>{e instanceof IDBCursor&&m0.set(e,s)}).catch(()=>{}),Qg.set(t,s),t}function xR(s){if(fg.has(s))return;const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{e(),o()},h=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});fg.set(s,t)}let dg={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return fg.get(s);if(t==="objectStoreNames")return s.objectStoreNames||g0.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ns(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function NR(s){dg=s(dg)}function OR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=s.call(eg(this),t,...e);return g0.set(r,t.sort?t.sort():[t]),ns(r)}:VR().includes(s)?function(...t){return s.apply(eg(this),t),ns(m0.get(this))}:function(...t){return ns(s.apply(eg(this),t))}}function MR(s){return typeof s=="function"?OR(s):(s instanceof IDBTransaction&&xR(s),IR(s,DR())?new Proxy(s,dg):s)}function ns(s){if(s instanceof IDBRequest)return CR(s);if(tg.has(s))return tg.get(s);const t=MR(s);return t!==s&&(tg.set(s,t),Qg.set(t,s)),t}const eg=s=>Qg.get(s);function PR(s,t,{blocked:e,upgrade:r,blocking:o,terminated:u}={}){const h=indexedDB.open(s,t),m=ns(h);return r&&h.addEventListener("upgradeneeded",g=>{r(ns(h.result),g.oldVersion,g.newVersion,ns(h.transaction),g)}),e&&h.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const kR=["get","getKey","getAll","getAllKeys","count"],LR=["put","add","delete","clear"],ng=new Map;function SE(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(ng.get(t))return ng.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,o=LR.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(o||kR.includes(e)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return r&&(_=_.index(m.shift())),(await Promise.all([_[e](...m),o&&g.done]))[0]};return ng.set(t,u),u}NR(s=>({...s,get:(t,e,r)=>SE(t,e)||s.get(t,e,r),has:(t,e)=>!!SE(t,e)||s.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(BR(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function BR(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Jh="@firebase/app",mg="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new Kg("@firebase/app"),zR="@firebase/app-compat",qR="@firebase/analytics-compat",jR="@firebase/analytics",FR="@firebase/app-check-compat",GR="@firebase/app-check",HR="@firebase/auth",KR="@firebase/auth-compat",QR="@firebase/database",YR="@firebase/data-connect",$R="@firebase/database-compat",XR="@firebase/functions",ZR="@firebase/functions-compat",WR="@firebase/installations",JR="@firebase/installations-compat",tI="@firebase/messaging",eI="@firebase/messaging-compat",nI="@firebase/performance",iI="@firebase/performance-compat",rI="@firebase/remote-config",sI="@firebase/remote-config-compat",aI="@firebase/storage",oI="@firebase/storage-compat",lI="@firebase/firestore",uI="@firebase/vertexai",cI="@firebase/firestore-compat",hI="firebase",fI="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="[DEFAULT]",dI={[Jh]:"fire-core",[zR]:"fire-core-compat",[jR]:"fire-analytics",[qR]:"fire-analytics-compat",[GR]:"fire-app-check",[FR]:"fire-app-check-compat",[HR]:"fire-auth",[KR]:"fire-auth-compat",[QR]:"fire-rtdb",[YR]:"fire-data-connect",[$R]:"fire-rtdb-compat",[XR]:"fire-fn",[ZR]:"fire-fn-compat",[WR]:"fire-iid",[JR]:"fire-iid-compat",[tI]:"fire-fcm",[eI]:"fire-fcm-compat",[nI]:"fire-perf",[iI]:"fire-perf-compat",[rI]:"fire-rc",[sI]:"fire-rc-compat",[aI]:"fire-gcs",[oI]:"fire-gcs-compat",[lI]:"fire-fst",[cI]:"fire-fst-compat",[uI]:"fire-vertex","fire-js":"fire-js",[hI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=new Map,No=new Map,Oo=new Map;function Nu(s,t){try{s.container.addComponent(t)}catch(e){rr.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function p0(s,t){s.container.addOrOverwriteComponent(t)}function Mo(s){const t=s.name;if(Oo.has(t))return rr.debug(`There were multiple attempts to register component ${t}.`),!1;Oo.set(t,s);for(const e of os.values())Nu(e,s);for(const e of No.values())Nu(e,s);return!0}function Yg(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function mI(s,t,e=as){Yg(s,t).clearInstance(e)}function _0(s){return s.options!==void 0}function y0(s){return s==null?!1:s.settings!==void 0}function gI(){Oo.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xn=new Tf("app","Firebase",pI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v0=class{constructor(t,e,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new da("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Xn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(s,t){const e=a0(s.split(".")[1]);if(e===null){console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`);return}if(JSON.parse(e).exp===void 0){console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`);return}const o=JSON.parse(e).exp*1e3,u=new Date().getTime();o-u<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class _I extends v0{constructor(t,e,r,o){const u=e.automaticDataCollectionEnabled!==void 0?e.automaticDataCollectionEnabled:!1,h={name:r,automaticDataCollectionEnabled:u};if(t.apiKey!==void 0)super(t,h,o);else{const m=t;super(m.options,h,o)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:u},e),this._serverConfig.authIdToken&&RE(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&RE(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,e.releaseOnDeref=void 0,ir(Jh,mg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(t){this.isDeleted||(this._refCount++,t!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(t,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Zg(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Xn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g=fI;function Xg(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const r=Object.assign({name:as,automaticDataCollectionEnabled:!1},t),o=r.name;if(typeof o!="string"||!o)throw Xn.create("bad-app-name",{appName:String(o)});if(e||(e=l0()),!e)throw Xn.create("no-options");const u=os.get(o);if(u){if(xu(e,u.options)&&xu(r,u.config))return u;throw Xn.create("duplicate-app",{appName:o})}const h=new f0(o);for(const g of Oo.values())h.addComponent(g);const m=new v0(e,r,h);return os.set(o,m),m}function yI(s,t){if(hR()&&!u0())throw Xn.create("invalid-server-app-environment");t.automaticDataCollectionEnabled===void 0&&(t.automaticDataCollectionEnabled=!1);let e;_0(s)?e=s.options:e=s;const r=Object.assign(Object.assign({},t),e);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const o=_=>[..._].reduce((E,A)=>Math.imul(31,E)+A.charCodeAt(0)|0,0);if(t.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Xn.create("finalization-registry-not-supported",{});const u=""+o(JSON.stringify(r)),h=No.get(u);if(h)return h.incRefCount(t.releaseOnDeref),h;const m=new f0(u);for(const _ of Oo.values())m.addComponent(_);const g=new _I(e,t,u,m);return No.set(u,g),g}function E0(s=as){const t=os.get(s);if(!t&&s===as&&l0())return Xg();if(!t)throw Xn.create("no-app",{appName:s});return t}function vI(){return Array.from(os.values())}async function Zg(s){let t=!1;const e=s.name;os.has(e)?(t=!0,os.delete(e)):No.has(e)&&s.decRefCount()<=0&&(No.delete(e),t=!0),t&&(await Promise.all(s.container.getProviders().map(r=>r.delete())),s.isDeleted=!0)}function ir(s,t,e){var r;let o=(r=dI[s])!==null&&r!==void 0?r:s;e&&(o+=`-${e}`);const u=o.match(/\s|\//),h=t.match(/\s|\//);if(u||h){const m=[`Unable to register library "${o}" with version "${t}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&m.push("and"),h&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),rr.warn(m.join(" "));return}Mo(new da(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}function T0(s,t){if(s!==null&&typeof s!="function")throw Xn.create("invalid-log-argument");RR(s,t)}function A0(s){SR(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="firebase-heartbeat-database",TI=1,Ou="firebase-heartbeat-store";let ig=null;function b0(){return ig||(ig=PR(EI,TI,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Ou)}catch(e){console.warn(e)}}}}).catch(s=>{throw Xn.create("idb-open",{originalErrorMessage:s.message})})),ig}async function AI(s){try{const e=(await b0()).transaction(Ou),r=await e.objectStore(Ou).get(w0(s));return await e.done,r}catch(t){if(t instanceof ba)rr.warn(t.message);else{const e=Xn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});rr.warn(e.message)}}}async function IE(s,t){try{const r=(await b0()).transaction(Ou,"readwrite");await r.objectStore(Ou).put(t,w0(s)),await r.done}catch(e){if(e instanceof ba)rr.warn(e.message);else{const r=Xn.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});rr.warn(r.message)}}}function w0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=1024,wI=30;class SI{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new II(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=DE();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>wI){const h=DI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){rr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=DE(),{heartbeatsToSend:r,unsentEntries:o}=RI(this._heartbeatsCache.heartbeats),u=Xh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(e){return rr.warn(e),""}}}function DE(){return new Date().toISOString().substring(0,10)}function RI(s,t=bI){const e=[];let r=s.slice();for(const o of s){const u=e.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),VE(e)>t){u.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),VE(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class II{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return h0()?fR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await AI(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const o=await this.read();return IE(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const o=await this.read();return IE(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function VE(s){return Xh(JSON.stringify({version:2,heartbeats:s})).length}function DI(s){if(s.length===0)return-1;let t=0,e=s[0].date;for(let r=1;r<s.length;r++)s[r].date<e&&(e=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(s){Mo(new da("platform-logger",t=>new UR(t),"PRIVATE")),Mo(new da("heartbeat",t=>new SI(t),"PRIVATE")),ir(Jh,mg,s),ir(Jh,mg,"esm2017"),ir("fire-js","")}VI("");const CI=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ba,SDK_VERSION:$g,_DEFAULT_ENTRY_NAME:as,_addComponent:Nu,_addOrOverwriteComponent:p0,_apps:os,_clearComponents:gI,_components:Oo,_getProvider:Yg,_isFirebaseApp:_0,_isFirebaseServerApp:y0,_registerComponent:Mo,_removeServiceInstance:mI,_serverApps:No,deleteApp:Zg,getApp:E0,getApps:vI,initializeApp:Xg,initializeServerApp:yI,onLog:T0,registerVersion:ir,setLogLevel:A0},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(t,e){this._delegate=t,this.firebase=e,Nu(t,new da("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Zg(this._delegate)))}_getService(t,e=as){var r;this._delegate.checkDestroyed();const o=this._delegate.container.getProvider(t);return!o.isInitialized()&&((r=o.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&o.initialize(),o.getImmediate({identifier:e})}_removeServiceInstance(t,e=as){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){Nu(this._delegate,t)}_addOrOverwriteComponent(t){p0(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},CE=new Tf("app-compat","Firebase",NI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(s){const t={},e={__esModule:!0,initializeApp:u,app:o,registerVersion:ir,setLogLevel:A0,onLog:T0,apps:null,SDK_VERSION:$g,INTERNAL:{registerComponent:m,removeApp:r,useAsService:g,modularAPIs:CI}};e.default=e,Object.defineProperty(e,"apps",{get:h});function r(_){delete t[_]}function o(_){if(_=_||as,!TE(t,_))throw CE.create("no-app",{appName:_});return t[_]}o.App=s;function u(_,E={}){const A=Xg(_,E);if(TE(t,A.name))return t[A.name];const R=new s(A,e);return t[A.name]=R,R}function h(){return Object.keys(t).map(_=>t[_])}function m(_){const E=_.name,A=E.replace("-compat","");if(Mo(_)&&_.type==="PUBLIC"){const R=(P=o())=>{if(typeof P[A]!="function")throw CE.create("invalid-app-argument",{appName:E});return P[A]()};_.serviceProps!==void 0&&Zh(R,_.serviceProps),e[A]=R,s.prototype[A]=function(...P){return this._getService.bind(this,E).apply(this,_.multipleInstances?P:[])}}return _.type==="PUBLIC"?e[A]:null}function g(_,E){return E==="serverAuth"?null:E}return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(){const s=OI(xI);s.INTERNAL=Object.assign(Object.assign({},s.INTERNAL),{createFirebaseNamespace:S0,extendNamespace:t,createSubscribe:pR,ErrorFactory:Tf,deepExtend:Zh});function t(e){Zh(s,e)}return s}const MI=S0();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=new Kg("@firebase/app-compat"),PI="@firebase/app-compat",kI="0.2.50";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(s){ir(PI,kI,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const s=o0();if(s.firebase!==void 0){xE.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const t=s.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&xE.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Wg=MI;LI();var UI="firebase",BI="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wg.registerVersion(UI,BI,"app-compat");var NE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var is,R0;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(N,I){function w(){}w.prototype=I.prototype,N.D=I.prototype,N.prototype=new w,N.prototype.constructor=N,N.C=function(V,M,B){for(var D=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)D[Ve-2]=arguments[Ve];return I.prototype[M].apply(V,D)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,I,w){w||(w=0);var V=Array(16);if(typeof I=="string")for(var M=0;16>M;++M)V[M]=I.charCodeAt(w++)|I.charCodeAt(w++)<<8|I.charCodeAt(w++)<<16|I.charCodeAt(w++)<<24;else for(M=0;16>M;++M)V[M]=I[w++]|I[w++]<<8|I[w++]<<16|I[w++]<<24;I=N.g[0],w=N.g[1],M=N.g[2];var B=N.g[3],D=I+(B^w&(M^B))+V[0]+3614090360&4294967295;I=w+(D<<7&4294967295|D>>>25),D=B+(M^I&(w^M))+V[1]+3905402710&4294967295,B=I+(D<<12&4294967295|D>>>20),D=M+(w^B&(I^w))+V[2]+606105819&4294967295,M=B+(D<<17&4294967295|D>>>15),D=w+(I^M&(B^I))+V[3]+3250441966&4294967295,w=M+(D<<22&4294967295|D>>>10),D=I+(B^w&(M^B))+V[4]+4118548399&4294967295,I=w+(D<<7&4294967295|D>>>25),D=B+(M^I&(w^M))+V[5]+1200080426&4294967295,B=I+(D<<12&4294967295|D>>>20),D=M+(w^B&(I^w))+V[6]+2821735955&4294967295,M=B+(D<<17&4294967295|D>>>15),D=w+(I^M&(B^I))+V[7]+4249261313&4294967295,w=M+(D<<22&4294967295|D>>>10),D=I+(B^w&(M^B))+V[8]+1770035416&4294967295,I=w+(D<<7&4294967295|D>>>25),D=B+(M^I&(w^M))+V[9]+2336552879&4294967295,B=I+(D<<12&4294967295|D>>>20),D=M+(w^B&(I^w))+V[10]+4294925233&4294967295,M=B+(D<<17&4294967295|D>>>15),D=w+(I^M&(B^I))+V[11]+2304563134&4294967295,w=M+(D<<22&4294967295|D>>>10),D=I+(B^w&(M^B))+V[12]+1804603682&4294967295,I=w+(D<<7&4294967295|D>>>25),D=B+(M^I&(w^M))+V[13]+4254626195&4294967295,B=I+(D<<12&4294967295|D>>>20),D=M+(w^B&(I^w))+V[14]+2792965006&4294967295,M=B+(D<<17&4294967295|D>>>15),D=w+(I^M&(B^I))+V[15]+1236535329&4294967295,w=M+(D<<22&4294967295|D>>>10),D=I+(M^B&(w^M))+V[1]+4129170786&4294967295,I=w+(D<<5&4294967295|D>>>27),D=B+(w^M&(I^w))+V[6]+3225465664&4294967295,B=I+(D<<9&4294967295|D>>>23),D=M+(I^w&(B^I))+V[11]+643717713&4294967295,M=B+(D<<14&4294967295|D>>>18),D=w+(B^I&(M^B))+V[0]+3921069994&4294967295,w=M+(D<<20&4294967295|D>>>12),D=I+(M^B&(w^M))+V[5]+3593408605&4294967295,I=w+(D<<5&4294967295|D>>>27),D=B+(w^M&(I^w))+V[10]+38016083&4294967295,B=I+(D<<9&4294967295|D>>>23),D=M+(I^w&(B^I))+V[15]+3634488961&4294967295,M=B+(D<<14&4294967295|D>>>18),D=w+(B^I&(M^B))+V[4]+3889429448&4294967295,w=M+(D<<20&4294967295|D>>>12),D=I+(M^B&(w^M))+V[9]+568446438&4294967295,I=w+(D<<5&4294967295|D>>>27),D=B+(w^M&(I^w))+V[14]+3275163606&4294967295,B=I+(D<<9&4294967295|D>>>23),D=M+(I^w&(B^I))+V[3]+4107603335&4294967295,M=B+(D<<14&4294967295|D>>>18),D=w+(B^I&(M^B))+V[8]+1163531501&4294967295,w=M+(D<<20&4294967295|D>>>12),D=I+(M^B&(w^M))+V[13]+2850285829&4294967295,I=w+(D<<5&4294967295|D>>>27),D=B+(w^M&(I^w))+V[2]+4243563512&4294967295,B=I+(D<<9&4294967295|D>>>23),D=M+(I^w&(B^I))+V[7]+1735328473&4294967295,M=B+(D<<14&4294967295|D>>>18),D=w+(B^I&(M^B))+V[12]+2368359562&4294967295,w=M+(D<<20&4294967295|D>>>12),D=I+(w^M^B)+V[5]+4294588738&4294967295,I=w+(D<<4&4294967295|D>>>28),D=B+(I^w^M)+V[8]+2272392833&4294967295,B=I+(D<<11&4294967295|D>>>21),D=M+(B^I^w)+V[11]+1839030562&4294967295,M=B+(D<<16&4294967295|D>>>16),D=w+(M^B^I)+V[14]+4259657740&4294967295,w=M+(D<<23&4294967295|D>>>9),D=I+(w^M^B)+V[1]+2763975236&4294967295,I=w+(D<<4&4294967295|D>>>28),D=B+(I^w^M)+V[4]+1272893353&4294967295,B=I+(D<<11&4294967295|D>>>21),D=M+(B^I^w)+V[7]+4139469664&4294967295,M=B+(D<<16&4294967295|D>>>16),D=w+(M^B^I)+V[10]+3200236656&4294967295,w=M+(D<<23&4294967295|D>>>9),D=I+(w^M^B)+V[13]+681279174&4294967295,I=w+(D<<4&4294967295|D>>>28),D=B+(I^w^M)+V[0]+3936430074&4294967295,B=I+(D<<11&4294967295|D>>>21),D=M+(B^I^w)+V[3]+3572445317&4294967295,M=B+(D<<16&4294967295|D>>>16),D=w+(M^B^I)+V[6]+76029189&4294967295,w=M+(D<<23&4294967295|D>>>9),D=I+(w^M^B)+V[9]+3654602809&4294967295,I=w+(D<<4&4294967295|D>>>28),D=B+(I^w^M)+V[12]+3873151461&4294967295,B=I+(D<<11&4294967295|D>>>21),D=M+(B^I^w)+V[15]+530742520&4294967295,M=B+(D<<16&4294967295|D>>>16),D=w+(M^B^I)+V[2]+3299628645&4294967295,w=M+(D<<23&4294967295|D>>>9),D=I+(M^(w|~B))+V[0]+4096336452&4294967295,I=w+(D<<6&4294967295|D>>>26),D=B+(w^(I|~M))+V[7]+1126891415&4294967295,B=I+(D<<10&4294967295|D>>>22),D=M+(I^(B|~w))+V[14]+2878612391&4294967295,M=B+(D<<15&4294967295|D>>>17),D=w+(B^(M|~I))+V[5]+4237533241&4294967295,w=M+(D<<21&4294967295|D>>>11),D=I+(M^(w|~B))+V[12]+1700485571&4294967295,I=w+(D<<6&4294967295|D>>>26),D=B+(w^(I|~M))+V[3]+2399980690&4294967295,B=I+(D<<10&4294967295|D>>>22),D=M+(I^(B|~w))+V[10]+4293915773&4294967295,M=B+(D<<15&4294967295|D>>>17),D=w+(B^(M|~I))+V[1]+2240044497&4294967295,w=M+(D<<21&4294967295|D>>>11),D=I+(M^(w|~B))+V[8]+1873313359&4294967295,I=w+(D<<6&4294967295|D>>>26),D=B+(w^(I|~M))+V[15]+4264355552&4294967295,B=I+(D<<10&4294967295|D>>>22),D=M+(I^(B|~w))+V[6]+2734768916&4294967295,M=B+(D<<15&4294967295|D>>>17),D=w+(B^(M|~I))+V[13]+1309151649&4294967295,w=M+(D<<21&4294967295|D>>>11),D=I+(M^(w|~B))+V[4]+4149444226&4294967295,I=w+(D<<6&4294967295|D>>>26),D=B+(w^(I|~M))+V[11]+3174756917&4294967295,B=I+(D<<10&4294967295|D>>>22),D=M+(I^(B|~w))+V[2]+718787259&4294967295,M=B+(D<<15&4294967295|D>>>17),D=w+(B^(M|~I))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+M&4294967295,N.g[3]=N.g[3]+B&4294967295}r.prototype.u=function(N,I){I===void 0&&(I=N.length);for(var w=I-this.blockSize,V=this.B,M=this.h,B=0;B<I;){if(M==0)for(;B<=w;)o(this,N,B),B+=this.blockSize;if(typeof N=="string"){for(;B<I;)if(V[M++]=N.charCodeAt(B++),M==this.blockSize){o(this,V),M=0;break}}else for(;B<I;)if(V[M++]=N[B++],M==this.blockSize){o(this,V),M=0;break}}this.h=M,this.o+=I},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;var w=8*this.o;for(I=N.length-8;I<N.length;++I)N[I]=w&255,w/=256;for(this.u(N),N=Array(16),I=w=0;4>I;++I)for(var V=0;32>V;V+=8)N[w++]=this.g[I]>>>V&255;return N};function u(N,I){var w=m;return Object.prototype.hasOwnProperty.call(w,N)?w[N]:w[N]=I(N)}function h(N,I){this.h=I;for(var w=[],V=!0,M=N.length-1;0<=M;M--){var B=N[M]|0;V&&B==I||(w[M]=B,V=!1)}this.g=w}var m={};function g(N){return-128<=N&&128>N?u(N,function(I){return new h([I|0],0>I?-1:0)}):new h([N|0],0>N?-1:0)}function _(N){if(isNaN(N)||!isFinite(N))return A;if(0>N)return X(_(-N));for(var I=[],w=1,V=0;N>=w;V++)I[V]=N/w|0,w*=4294967296;return new h(I,0)}function E(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return X(E(N.substring(1),I));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=_(Math.pow(I,8)),V=A,M=0;M<N.length;M+=8){var B=Math.min(8,N.length-M),D=parseInt(N.substring(M,M+B),I);8>B?(B=_(Math.pow(I,B)),V=V.j(B).add(_(D))):(V=V.j(w),V=V.add(_(D)))}return V}var A=g(0),R=g(1),P=g(16777216);s=h.prototype,s.m=function(){if(K(this))return-X(this).m();for(var N=0,I=1,w=0;w<this.g.length;w++){var V=this.i(w);N+=(0<=V?V:4294967296+V)*I,I*=4294967296}return N},s.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(Y(this))return"0";if(K(this))return"-"+X(this).toString(N);for(var I=_(Math.pow(N,6)),w=this,V="";;){var M=It(w,I).g;w=ht(w,M.j(I));var B=((0<w.g.length?w.g[0]:w.h)>>>0).toString(N);if(w=M,Y(w))return B+V;for(;6>B.length;)B="0"+B;V=B+V}},s.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function Y(N){if(N.h!=0)return!1;for(var I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function K(N){return N.h==-1}s.l=function(N){return N=ht(this,N),K(N)?-1:Y(N)?0:1};function X(N){for(var I=N.g.length,w=[],V=0;V<I;V++)w[V]=~N.g[V];return new h(w,~N.h).add(R)}s.abs=function(){return K(this)?X(this):this},s.add=function(N){for(var I=Math.max(this.g.length,N.g.length),w=[],V=0,M=0;M<=I;M++){var B=V+(this.i(M)&65535)+(N.i(M)&65535),D=(B>>>16)+(this.i(M)>>>16)+(N.i(M)>>>16);V=D>>>16,B&=65535,D&=65535,w[M]=D<<16|B}return new h(w,w[w.length-1]&-2147483648?-1:0)};function ht(N,I){return N.add(X(I))}s.j=function(N){if(Y(this)||Y(N))return A;if(K(this))return K(N)?X(this).j(X(N)):X(X(this).j(N));if(K(N))return X(this.j(X(N)));if(0>this.l(P)&&0>N.l(P))return _(this.m()*N.m());for(var I=this.g.length+N.g.length,w=[],V=0;V<2*I;V++)w[V]=0;for(V=0;V<this.g.length;V++)for(var M=0;M<N.g.length;M++){var B=this.i(V)>>>16,D=this.i(V)&65535,Ve=N.i(M)>>>16,Ae=N.i(M)&65535;w[2*V+2*M]+=D*Ae,ft(w,2*V+2*M),w[2*V+2*M+1]+=B*Ae,ft(w,2*V+2*M+1),w[2*V+2*M+1]+=D*Ve,ft(w,2*V+2*M+1),w[2*V+2*M+2]+=B*Ve,ft(w,2*V+2*M+2)}for(V=0;V<I;V++)w[V]=w[2*V+1]<<16|w[2*V];for(V=I;V<2*I;V++)w[V]=0;return new h(w,0)};function ft(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function ut(N,I){this.g=N,this.h=I}function It(N,I){if(Y(I))throw Error("division by zero");if(Y(N))return new ut(A,A);if(K(N))return I=It(X(N),I),new ut(X(I.g),X(I.h));if(K(I))return I=It(N,X(I)),new ut(X(I.g),I.h);if(30<N.g.length){if(K(N)||K(I))throw Error("slowDivide_ only works with positive integers.");for(var w=R,V=I;0>=V.l(N);)w=gt(w),V=gt(V);var M=Et(w,1),B=Et(V,1);for(V=Et(V,2),w=Et(w,2);!Y(V);){var D=B.add(V);0>=D.l(N)&&(M=M.add(w),B=D),V=Et(V,1),w=Et(w,1)}return I=ht(N,M.j(I)),new ut(M,I)}for(M=A;0<=N.l(I);){for(w=Math.max(1,Math.floor(N.m()/I.m())),V=Math.ceil(Math.log(w)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),B=_(w),D=B.j(I);K(D)||0<D.l(N);)w-=V,B=_(w),D=B.j(I);Y(B)&&(B=R),M=M.add(B),N=ht(N,D)}return new ut(M,N)}s.A=function(N){return It(this,N).h},s.and=function(N){for(var I=Math.max(this.g.length,N.g.length),w=[],V=0;V<I;V++)w[V]=this.i(V)&N.i(V);return new h(w,this.h&N.h)},s.or=function(N){for(var I=Math.max(this.g.length,N.g.length),w=[],V=0;V<I;V++)w[V]=this.i(V)|N.i(V);return new h(w,this.h|N.h)},s.xor=function(N){for(var I=Math.max(this.g.length,N.g.length),w=[],V=0;V<I;V++)w[V]=this.i(V)^N.i(V);return new h(w,this.h^N.h)};function gt(N){for(var I=N.g.length+1,w=[],V=0;V<I;V++)w[V]=N.i(V)<<1|N.i(V-1)>>>31;return new h(w,N.h)}function Et(N,I){var w=I>>5;I%=32;for(var V=N.g.length-w,M=[],B=0;B<V;B++)M[B]=0<I?N.i(B+w)>>>I|N.i(B+w+1)<<32-I:N.i(B+w);return new h(M,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,R0=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=E,is=h}).apply(typeof NE<"u"?NE:typeof self<"u"?self:typeof window<"u"?window:{});var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var I0,Eu,D0,zh,gg,V0,C0,x0;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,y){return c==Array.prototype||c==Object.prototype||(c[p]=y.value),c};function e(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oh=="object"&&Oh];for(var p=0;p<c.length;++p){var y=c[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=e(this);function o(c,p){if(p)t:{var y=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var L=c[b];if(!(L in y))break t;y=y[L]}c=c[c.length-1],b=y[c],p=p(b),p!=b&&p!=null&&t(y,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var y=0,b=!1,L={next:function(){if(!b&&y<c.length){var F=y++;return{value:p(F,c[F]),done:!1}}return b=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function _(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function E(c,p,y){return c.call.apply(c.bind,arguments)}function A(c,p,y){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,b),c.apply(p,L)}}return function(){return c.apply(p,arguments)}}function R(c,p,y){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:A,R.apply(null,arguments)}function P(c,p){var y=Array.prototype.slice.call(arguments,1);return function(){var b=y.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function Y(c,p){function y(){}y.prototype=p.prototype,c.aa=p.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(b,L,F){for(var et=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)et[kt-2]=arguments[kt];return p.prototype[L].apply(b,et)}}function K(c){const p=c.length;if(0<p){const y=Array(p);for(let b=0;b<p;b++)y[b]=c[b];return y}return[]}function X(c,p){for(let y=1;y<arguments.length;y++){const b=arguments[y];if(g(b)){const L=c.length||0,F=b.length||0;c.length=L+F;for(let et=0;et<F;et++)c[L+et]=b[et]}else c.push(b)}}class ht{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ft(c){return/^[\s\xa0]*$/.test(c)}function ut(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function It(c){return It[" "](c),c}It[" "]=function(){};var gt=ut().indexOf("Gecko")!=-1&&!(ut().toLowerCase().indexOf("webkit")!=-1&&ut().indexOf("Edge")==-1)&&!(ut().indexOf("Trident")!=-1||ut().indexOf("MSIE")!=-1)&&ut().indexOf("Edge")==-1;function Et(c,p,y){for(const b in c)p.call(y,c[b],b,c)}function N(c,p){for(const y in c)p.call(void 0,c[y],y,c)}function I(c){const p={};for(const y in c)p[y]=c[y];return p}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(c,p){let y,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(y in b)c[y]=b[y];for(let F=0;F<w.length;F++)y=w[F],Object.prototype.hasOwnProperty.call(b,y)&&(c[y]=b[y])}}function M(c){var p=1;c=c.split(":");const y=[];for(;0<p&&c.length;)y.push(c.shift()),p--;return c.length&&y.push(c.join(":")),y}function B(c){m.setTimeout(()=>{throw c},0)}function D(){var c=Ht;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class Ve{constructor(){this.h=this.g=null}add(p,y){const b=Ae.get();b.set(p,y),this.h?this.h.next=b:this.g=b,this.h=b}}var Ae=new ht(()=>new rt,c=>c.reset());class rt{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Tt,yt=!1,Ht=new Ve,C=()=>{const c=m.Promise.resolve(void 0);Tt=()=>{c.then(tt)}};var tt=()=>{for(var c;c=D();){try{c.h.call(c.g)}catch(y){B(y)}var p=Ae;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}yt=!1};function pt(){this.s=this.s,this.C=this.C}pt.prototype.s=!1,pt.prototype.ma=function(){this.s||(this.s=!0,this.N())},pt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function at(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}at.prototype.h=function(){this.defaultPrevented=!0};var ot=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};m.addEventListener("test",y,p),m.removeEventListener("test",y,p)}catch{}return c}();function Dt(c,p){if(at.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(gt){t:{try{It(p.nodeName);var L=!0;break t}catch{}L=!1}L||(p=null)}}else y=="mouseover"?p=c.fromElement:y=="mouseout"&&(p=c.toElement);this.relatedTarget=p,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:St[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Dt.aa.h.call(this)}}Y(Dt,at);var St={2:"touch",3:"pen",4:"mouse"};Dt.prototype.h=function(){Dt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),zt=0;function he(c,p,y,b,L){this.listener=c,this.proxy=null,this.src=p,this.type=y,this.capture=!!b,this.ha=L,this.key=++zt,this.da=this.fa=!1}function Qt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function on(c){this.src=c,this.g={},this.h=0}on.prototype.add=function(c,p,y,b,L){var F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);var et=Nn(c,p,b,L);return-1<et?(p=c[et],y||(p.fa=!1)):(p=new he(p,this.src,F,!!b,L),p.fa=y,c.push(p)),p};function Vi(c,p){var y=p.type;if(y in c.g){var b=c.g[y],L=Array.prototype.indexOf.call(b,p,void 0),F;(F=0<=L)&&Array.prototype.splice.call(b,L,1),F&&(Qt(p),c.g[y].length==0&&(delete c.g[y],c.h--))}}function Nn(c,p,y,b){for(var L=0;L<c.length;++L){var F=c[L];if(!F.da&&F.listener==p&&F.capture==!!y&&F.ha==b)return L}return-1}var fr="closure_lm_"+(1e6*Math.random()|0),dr={};function Ci(c,p,y,b,L){if(Array.isArray(p)){for(var F=0;F<p.length;F++)Ci(c,p[F],y,b,L);return null}return y=hc(y),c&&c[be]?c.K(p,y,_(b)?!!b.capture:!1,L):ll(c,p,y,!1,b,L)}function ll(c,p,y,b,L,F){if(!p)throw Error("Invalid event type");var et=_(L)?!!L.capture:!!L,kt=ul(c);if(kt||(c[fr]=kt=new on(c)),y=kt.add(p,y,b,et,F),y.proxy)return y;if(b=Da(),y.proxy=b,b.src=c,b.listener=y,c.addEventListener)ot||(L=et),L===void 0&&(L=!1),c.addEventListener(p.toString(),b,L);else if(c.attachEvent)c.attachEvent(Ca(p.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Da(){function c(y){return p.call(c.src,c.listener,y)}const p=$f;return c}function Va(c,p,y,b,L){if(Array.isArray(p))for(var F=0;F<p.length;F++)Va(c,p[F],y,b,L);else b=_(b)?!!b.capture:!!b,y=hc(y),c&&c[be]?(c=c.i,p=String(p).toString(),p in c.g&&(F=c.g[p],y=Nn(F,y,b,L),-1<y&&(Qt(F[y]),Array.prototype.splice.call(F,y,1),F.length==0&&(delete c.g[p],c.h--)))):c&&(c=ul(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Nn(p,y,b,L)),(y=-1<c?p[c]:null)&&As(y))}function As(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[be])Vi(p.i,c);else{var y=c.type,b=c.proxy;p.removeEventListener?p.removeEventListener(y,b,c.capture):p.detachEvent?p.detachEvent(Ca(y),b):p.addListener&&p.removeListener&&p.removeListener(b),(y=ul(p))?(Vi(y,c),y.h==0&&(y.src=null,p[fr]=null)):Qt(c)}}}function Ca(c){return c in dr?dr[c]:dr[c]="on"+c}function $f(c,p){if(c.da)c=!0;else{p=new Dt(p,this);var y=c.listener,b=c.ha||c.src;c.fa&&As(c),c=y.call(b,p)}return c}function ul(c){return c=c[fr],c instanceof on?c:null}var _n="__closure_events_fn_"+(1e9*Math.random()>>>0);function hc(c){return typeof c=="function"?c:(c[_n]||(c[_n]=function(p){return c.handleEvent(p)}),c[_n])}function Ce(){pt.call(this),this.i=new on(this),this.M=this,this.F=null}Y(Ce,pt),Ce.prototype[be]=!0,Ce.prototype.removeEventListener=function(c,p,y,b){Va(this,c,p,y,b)};function Le(c,p){var y,b=c.F;if(b)for(y=[];b;b=b.F)y.push(b);if(c=c.M,b=p.type||p,typeof p=="string")p=new at(p,c);else if(p instanceof at)p.target=p.target||c;else{var L=p;p=new at(b,c),V(p,L)}if(L=!0,y)for(var F=y.length-1;0<=F;F--){var et=p.g=y[F];L=xi(et,b,!0,p)&&L}if(et=p.g=c,L=xi(et,b,!0,p)&&L,L=xi(et,b,!1,p)&&L,y)for(F=0;F<y.length;F++)et=p.g=y[F],L=xi(et,b,!1,p)&&L}Ce.prototype.N=function(){if(Ce.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var y=c.g[p],b=0;b<y.length;b++)Qt(y[b]);delete c.g[p],c.h--}}this.F=null},Ce.prototype.K=function(c,p,y,b){return this.i.add(String(c),p,!1,y,b)},Ce.prototype.L=function(c,p,y,b){return this.i.add(String(c),p,!0,y,b)};function xi(c,p,y,b){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,F=0;F<p.length;++F){var et=p[F];if(et&&!et.da&&et.capture==y){var kt=et.listener,Ne=et.ha||et.src;et.fa&&Vi(c.i,et),L=kt.call(Ne,b)!==!1&&L}}return L&&!b.defaultPrevented}function fc(c,p,y){if(typeof c=="function")y&&(c=R(c,y));else if(c&&typeof c.handleEvent=="function")c=R(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function cl(c){c.g=fc(()=>{c.g=null,c.i&&(c.i=!1,cl(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class Xf extends pt{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:cl(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bs(c){pt.call(this),this.h=c,this.g={}}Y(bs,pt);var mr=[];function Je(c){Et(c.g,function(p,y){this.g.hasOwnProperty(y)&&As(p)},c),c.g={}}bs.prototype.N=function(){bs.aa.N.call(this),Je(this)},bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hl=m.JSON.stringify,ri=m.JSON.parse,ln=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function fl(){}fl.prototype.h=null;function dc(c){return c.h||(c.h=c.i())}function mc(){}var si={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gr(){at.call(this,"d")}Y(gr,at);function Zn(){at.call(this,"c")}Y(Zn,at);var On={},pr=null;function xa(){return pr=pr||new Ce}On.La="serverreachability";function dl(c){at.call(this,On.La,c)}Y(dl,at);function _r(c){const p=xa();Le(p,new dl(p))}On.STAT_EVENT="statevent";function Na(c,p){at.call(this,On.STAT_EVENT,c),this.stat=p}Y(Na,at);function _e(c){const p=xa();Le(p,new Na(p,c))}On.Ma="timingevent";function gc(c,p){at.call(this,On.Ma,c),this.size=p}Y(gc,at);function yr(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function vr(){this.g=!0}vr.prototype.xa=function(){this.g=!1};function pc(c,p,y,b,L,F){c.info(function(){if(c.g)if(F)for(var et="",kt=F.split("&"),Ne=0;Ne<kt.length;Ne++){var Lt=kt[Ne].split("=");if(1<Lt.length){var ze=Lt[0];Lt=Lt[1];var Oe=ze.split("_");et=2<=Oe.length&&Oe[1]=="type"?et+(ze+"="+Lt+"&"):et+(ze+"=redacted&")}}else et=null;else et=F;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+p+`
`+y+`
`+et})}function _c(c,p,y,b,L,F,et){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+p+`
`+y+`
`+F+" "+et})}function Er(c,p,y,b){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ue(c,y)+(b?" "+b:"")})}function ai(c,p){c.info(function(){return"TIMEOUT: "+p})}vr.prototype.info=function(){};function Ue(c,p){if(!c.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var b=y[c];if(!(2>b.length)){var L=b[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var et=1;et<L.length;et++)L[et]=""}}}}return hl(y)}catch{return p}}var xe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ni={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ws;function Oa(){}Y(Oa,fl),Oa.prototype.g=function(){return new XMLHttpRequest},Oa.prototype.i=function(){return{}},ws=new Oa;function oi(c,p,y,b){this.j=c,this.i=p,this.l=y,this.R=b||1,this.U=new bs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ml}function ml(){this.i=null,this.g="",this.h=!1}var Tr={},Ss={};function Wn(c,p,y){c.L=1,c.v=Ds(fe(p)),c.m=y,c.P=!0,Oi(c,null)}function Oi(c,p){c.F=Date.now(),oe(c),c.A=fe(c.v);var y=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),ki(y.i,"t",b),c.C=0,y=c.j.J,c.h=new ml,c.g=xc(c.j,y?p:null,!c.m),0<c.O&&(c.M=new Xf(R(c.Y,c,c.g),c.O)),p=c.U,y=c.g,b=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(mr[0]=L.toString()),L=mr);for(var F=0;F<L.length;F++){var et=Ci(y,L[F],b||p.handleEvent,!1,p.h||p);if(!et)break;p.g[et.key]=et}p=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),_r(),pc(c.i,c.u,c.A,c.l,c.R,c.m)}oi.prototype.ca=function(c){c=c.target;const p=this.M;p&&Un(c)==3?p.j():this.Y(c)},oi.prototype.Y=function(c){try{if(c==this.g)t:{const Oe=Un(this.g);var p=this.g.Ba();const zi=this.g.Z();if(!(3>Oe)&&(Oe!=3||this.g&&(this.h.h||this.g.oa()||bc(this.g)))){this.J||Oe!=4||p==7||(p==8||0>=zi?_r(3):_r(2)),Ma(this);var y=this.g.Z();this.X=y;e:if(Ar(this)){var b=bc(this.g);c="";var L=b.length,F=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yn(this),bn(this);var et="";break e}this.h.i=new m.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,c+=this.h.i.decode(b[p],{stream:!(F&&p==L-1)});b.length=0,this.h.g+=c,this.C=0,et=this.h.g}else et=this.g.oa();if(this.o=y==200,_c(this.i,this.u,this.A,this.l,this.R,Oe,y),this.o){if(this.T&&!this.K){e:{if(this.g){var kt,Ne=this.g;if((kt=Ne.g?Ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ft(kt)){var Lt=kt;break e}}Lt=null}if(y=Lt)Er(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wn(this,y);else{this.o=!1,this.s=3,_e(12),yn(this),bn(this);break t}}if(this.P){y=!0;let Ke;for(;!this.J&&this.C<et.length;)if(Ke=br(this,et),Ke==Ss){Oe==4&&(this.s=4,_e(14),y=!1),Er(this.i,this.l,null,"[Incomplete Response]");break}else if(Ke==Tr){this.s=4,_e(15),Er(this.i,this.l,et,"[Invalid Chunk]"),y=!1;break}else Er(this.i,this.l,Ke,null),wn(this,Ke);if(Ar(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||et.length!=0||this.h.h||(this.s=1,_e(16),y=!1),this.o=this.o&&y,!y)Er(this.i,this.l,et,"[Invalid Chunked Response]"),yn(this),bn(this);else if(0<et.length&&!this.W){this.W=!0;var ze=this.j;ze.g==this&&ze.ba&&!ze.M&&(ze.j.info("Great, no buffering proxy detected. Bytes received: "+et.length),Ps(ze),ze.M=!0,_e(11))}}else Er(this.i,this.l,et,null),wn(this,et);Oe==4&&yn(this),this.o&&!this.J&&(Oe==4?Dc(this.j,this):(this.o=!1,oe(this)))}else nd(this.g),y==400&&0<et.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),yn(this),bn(this)}}}catch{}finally{}};function Ar(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function br(c,p){var y=c.C,b=p.indexOf(`
`,y);return b==-1?Ss:(y=Number(p.substring(y,b)),isNaN(y)?Tr:(b+=1,b+y>p.length?Ss:(p=p.slice(b,b+y),c.C=b+y,p)))}oi.prototype.cancel=function(){this.J=!0,yn(this)};function oe(c){c.S=Date.now()+c.I,gl(c,c.I)}function gl(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=yr(R(c.ba,c),p)}function Ma(c){c.B&&(m.clearTimeout(c.B),c.B=null)}oi.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ai(this.i,this.A),this.L!=2&&(_r(),_e(17)),yn(this),this.s=2,bn(this)):gl(this,this.S-c)};function bn(c){c.j.G==0||c.J||Dc(c.j,c)}function yn(c){Ma(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,Je(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function wn(c,p){try{var y=c.j;if(y.G!=0&&(y.g==c||wr(y.h,c))){if(!c.K&&wr(y.h,c)&&y.G==3){try{var b=y.Da.g.parse(p)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)Ga(y),ja(y);else break t;Rl(y),_e(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=yr(R(y.Za,y),6e3));if(1>=yc(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Bi(y,11)}else if((c.K||y.g==c)&&Ga(y),!ft(p))for(L=y.Da.g.parse(p),p=0;p<L.length;p++){let Lt=L[p];if(y.T=Lt[0],Lt=Lt[1],y.G==2)if(Lt[0]=="c"){y.K=Lt[1],y.ia=Lt[2];const ze=Lt[3];ze!=null&&(y.la=ze,y.j.info("VER="+y.la));const Oe=Lt[4];Oe!=null&&(y.Aa=Oe,y.j.info("SVER="+y.Aa));const zi=Lt[5];zi!=null&&typeof zi=="number"&&0<zi&&(b=1.5*zi,y.L=b,y.j.info("backChannelRequestTimeoutMs_="+b)),b=y;const Ke=c.g;if(Ke){const mi=Ke.g?Ke.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mi){var F=b.h;F.g||mi.indexOf("spdy")==-1&&mi.indexOf("quic")==-1&&mi.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Sr(F,F.h),F.h=null))}if(b.D){const Dl=Ke.g?Ke.g.getResponseHeader("X-HTTP-Session-Id"):null;Dl&&(b.ya=Dl,qt(b.I,b.D,Dl))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),b=y;var et=c;if(b.qa=Cc(b,b.J?b.ia:null,b.W),et.K){Mn(b.h,et);var kt=et,Ne=b.L;Ne&&(kt.I=Ne),kt.B&&(Ma(kt),oe(kt)),b.g=et}else Rc(b);0<y.i.length&&Fa(y)}else Lt[0]!="stop"&&Lt[0]!="close"||Bi(y,7);else y.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?Bi(y,7):wl(y):Lt[0]!="noop"&&y.l&&y.l.ta(Lt),y.v=0)}}_r(4)}catch{}}var Zf=class{constructor(c,p){this.g=c,this.map=p}};function pl(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _l(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function yc(c){return c.h?1:c.g?c.g.size:0}function wr(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Sr(c,p){c.g?c.g.add(p):c.h=p}function Mn(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}pl.prototype.cancel=function(){if(this.i=un(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function un(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const y of c.g.values())p=p.concat(y.D);return p}return K(c.i)}function vc(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(g(c)){for(var p=[],y=c.length,b=0;b<y;b++)p.push(c[b]);return p}p=[],y=0;for(b in c)p[y++]=c[b];return p}function Wf(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(g(c)||typeof c=="string"){var p=[];c=c.length;for(var y=0;y<c;y++)p.push(y);return p}p=[],y=0;for(const b in c)p[y++]=b;return p}}}function Rs(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(g(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var y=Wf(c),b=vc(c),L=b.length,F=0;F<L;F++)p.call(void 0,b[F],y&&y[F],c)}var yl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pa(c,p){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var b=c[y].indexOf("="),L=null;if(0<=b){var F=c[y].substring(0,b);L=c[y].substring(b+1)}else F=c[y];p(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Mi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Mi){this.h=c.h,Rr(this,c.j),this.o=c.o,this.g=c.g,Is(this,c.s),this.l=c.l;var p=c.i,y=new li;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),ka(this,y),this.m=c.m}else c&&(p=String(c).match(yl))?(this.h=!1,Rr(this,p[1]||"",!0),this.o=Ir(p[2]||""),this.g=Ir(p[3]||"",!0),Is(this,p[4]),this.l=Ir(p[5]||"",!0),ka(this,p[6]||"",!0),this.m=Ir(p[7]||"")):(this.h=!1,this.i=new li(null,this.h))}Mi.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Pn(p,vl,!0),":");var y=this.g;return(y||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Pn(p,vl,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(Pn(y,y.charAt(0)=="/"?El:Ec,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",Pn(y,ed)),c.join("")};function fe(c){return new Mi(c)}function Rr(c,p,y){c.j=y?Ir(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function Is(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function ka(c,p,y){p instanceof li?(c.i=p,Tl(c.i,c.h)):(y||(p=Pn(p,td)),c.i=new li(p,c.h))}function qt(c,p,y){c.i.set(p,y)}function Ds(c){return qt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ir(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Pn(c,p,y){return typeof c=="string"?(c=encodeURI(c).replace(p,Jf),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Jf(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var vl=/[#\/\?@]/g,Ec=/[#\?:]/g,El=/[#\?]/g,td=/[#\?@]/g,ed=/#/g;function li(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function kn(c){c.g||(c.g=new Map,c.h=0,c.i&&Pa(c.i,function(p,y){c.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}s=li.prototype,s.add=function(c,p){kn(this),this.i=null,c=Li(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(p),this.h+=1,this};function La(c,p){kn(c),p=Li(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Pi(c,p){return kn(c),p=Li(c,p),c.g.has(p)}s.forEach=function(c,p){kn(this),this.g.forEach(function(y,b){y.forEach(function(L){c.call(p,L,b,this)},this)},this)},s.na=function(){kn(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let b=0;b<p.length;b++){const L=c[b];for(let F=0;F<L.length;F++)y.push(p[b])}return y},s.V=function(c){kn(this);let p=[];if(typeof c=="string")Pi(this,c)&&(p=p.concat(this.g.get(Li(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)p=p.concat(c[y])}return p},s.set=function(c,p){return kn(this),this.i=null,c=Li(this,c),Pi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},s.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function ki(c,p,y){La(c,p),0<y.length&&(c.i=null,c.g.set(Li(c,p),K(y)),c.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var b=p[y];const F=encodeURIComponent(String(b)),et=this.V(b);for(b=0;b<et.length;b++){var L=F;et[b]!==""&&(L+="="+encodeURIComponent(String(et[b]))),c.push(L)}}return this.i=c.join("&")};function Li(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Tl(c,p){p&&!c.j&&(kn(c),c.i=null,c.g.forEach(function(y,b){var L=b.toLowerCase();b!=L&&(La(this,b),ki(this,L,y))},c)),c.j=p}function Tc(c,p){const y=new vr;if(m.Image){const b=new Image;b.onload=P(Ln,y,"TestLoadImage: loaded",!0,p,b),b.onerror=P(Ln,y,"TestLoadImage: error",!1,p,b),b.onabort=P(Ln,y,"TestLoadImage: abort",!1,p,b),b.ontimeout=P(Ln,y,"TestLoadImage: timeout",!1,p,b),m.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else p(!1)}function Vs(c,p){const y=new vr,b=new AbortController,L=setTimeout(()=>{b.abort(),Ln(y,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:b.signal}).then(F=>{clearTimeout(L),F.ok?Ln(y,"TestPingServer: ok",!0,p):Ln(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Ln(y,"TestPingServer: error",!1,p)})}function Ln(c,p,y,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(y)}catch{}}function Cs(){this.g=new ln}function ui(c,p,y){const b=y||"";try{Rs(c,function(L,F){let et=L;_(L)&&(et=hl(L)),p.push(b+F+"="+encodeURIComponent(et))})}catch(L){throw p.push(b+"type="+encodeURIComponent("_badmap")),L}}function Dr(c){this.l=c.Ub||null,this.j=c.eb||!1}Y(Dr,fl),Dr.prototype.g=function(){return new Ui(this.l,this.j)},Dr.prototype.i=function(c){return function(){return c}}({});function Ui(c,p){Ce.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Y(Ui,Ce),s=Ui.prototype,s.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,hi(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ci(this)),this.readyState=0},s.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Al(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Al(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}s.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?ci(this):hi(this),this.readyState==3&&Al(this)}},s.Ra=function(c){this.g&&(this.response=this.responseText=c,ci(this))},s.Qa=function(c){this.g&&(this.response=c,ci(this))},s.ga=function(){this.g&&ci(this)};function ci(c){c.readyState=4,c.l=null,c.j=null,c.v=null,hi(c)}s.setRequestHeader=function(c,p){this.u.append(c,p)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=p.next();return c.join(`\r
`)};function hi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function bl(c){let p="";return Et(c,function(y,b){p+=b,p+=":",p+=y,p+=`\r
`}),p}function Be(c,p,y){t:{for(b in y){var b=!1;break t}b=!0}b||(y=bl(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):qt(c,p,y))}function Kt(c){Ce.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Y(Kt,Ce);var Ua=/^https?$/i,xs=["POST","PUT"];s=Kt.prototype,s.Ha=function(c){this.J=c},s.ea=function(c,p,y,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ws.g(),this.v=this.o?dc(this.o):dc(ws),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(F){Ac(this,F);return}if(c=y||"",y=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)y.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const F of b.keys())y.set(F,b.get(F));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(y.keys()).find(F=>F.toLowerCase()=="content-type"),L=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(xs,p,void 0))||b||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,et]of y)this.g.setRequestHeader(F,et);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ns(this),this.u=!0,this.g.send(c),this.u=!1}catch(F){Ac(this,F)}};function Ac(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,Ba(c),fi(c)}function Ba(c){c.A||(c.A=!0,Le(c,"complete"),Le(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Le(this,"complete"),Le(this,"abort"),fi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fi(this,!0)),Kt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?za(this):this.bb())},s.bb=function(){za(this)};function za(c){if(c.h&&typeof h<"u"&&(!c.v[1]||Un(c)!=4||c.Z()!=2)){if(c.u&&Un(c)==4)fc(c.Ea,0,c);else if(Le(c,"readystatechange"),Un(c)==4){c.h=!1;try{const et=c.Z();t:switch(et){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var y;if(!(y=p)){var b;if(b=et===0){var L=String(c.D).match(yl)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),b=!Ua.test(L?L.toLowerCase():"")}y=b}if(y)Le(c,"complete"),Le(c,"success");else{c.m=6;try{var F=2<Un(c)?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.Z()+"]",Ba(c)}}finally{fi(c)}}}}function fi(c,p){if(c.g){Ns(c);const y=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Le(c,"ready");try{y.onreadystatechange=b}catch{}}}function Ns(c){c.I&&(m.clearTimeout(c.I),c.I=null)}s.isActive=function(){return!!this.g};function Un(c){return c.g?c.g.readyState:0}s.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),ri(p)}};function bc(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function nd(c){const p={};c=(c.g&&2<=Un(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(ft(c[b]))continue;var y=M(c[b]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const F=p[L]||[];p[L]=F,F.push(y)}N(p,function(b){return b.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(c,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||p}function qa(c){this.Aa=0,this.i=[],this.j=new vr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Os("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Os("baseRetryDelayMs",5e3,c),this.cb=Os("retryDelaySeedMs",1e4,c),this.Wa=Os("forwardChannelMaxRetries",2,c),this.wa=Os("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new pl(c&&c.concurrentRequestLimit),this.Da=new Cs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=qa.prototype,s.la=8,s.G=1,s.connect=function(c,p,y,b){_e(0),this.W=c,this.H=p||{},y&&b!==void 0&&(this.H.OSID=y,this.H.OAID=b),this.F=this.X,this.I=Cc(this,null,this.W),Fa(this)};function wl(c){if(wc(c),c.G==3){var p=c.U++,y=fe(c.I);if(qt(y,"SID",c.K),qt(y,"RID",p),qt(y,"TYPE","terminate"),Ms(c,y),p=new oi(c,c.j,p),p.L=2,p.v=Ds(fe(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=p.v,y=!0),y||(p.g=xc(p.j,null),p.g.ea(p.v)),p.F=Date.now(),oe(p)}Vc(c)}function ja(c){c.g&&(Ps(c),c.g.cancel(),c.g=null)}function wc(c){ja(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ga(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Fa(c){if(!_l(c.h)&&!c.s){c.s=!0;var p=c.Ga;Tt||C(),yt||(Tt(),yt=!0),Ht.add(p,c),c.B=0}}function id(c,p){return yc(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=yr(R(c.Ga,c,p),Il(c,c.B)),c.B++,!0)}s.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new oi(this,this.j,c);let F=this.o;if(this.S&&(F?(F=I(F),V(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)t:{for(var p=0,y=0;y<this.i.length;y++){e:{var b=this.i[y];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break e}b=void 0}if(b===void 0)break;if(p+=b,4096<p){p=y;break t}if(p===4096||y===this.i.length-1){p=y+1;break t}}p=1e3}else p=1e3;p=Sc(this,L,p),y=fe(this.I),qt(y,"RID",c),qt(y,"CVER",22),this.D&&qt(y,"X-HTTP-Session-Id",this.D),Ms(this,y),F&&(this.O?p="headers="+encodeURIComponent(String(bl(F)))+"&"+p:this.m&&Be(y,this.m,F)),Sr(this.h,L),this.Ua&&qt(y,"TYPE","init"),this.P?(qt(y,"$req",p),qt(y,"SID","null"),L.T=!0,Wn(L,y,null)):Wn(L,y,p),this.G=2}}else this.G==3&&(c?Sl(this,c):this.i.length==0||_l(this.h)||Sl(this))};function Sl(c,p){var y;p?y=p.l:y=c.U++;const b=fe(c.I);qt(b,"SID",c.K),qt(b,"RID",y),qt(b,"AID",c.T),Ms(c,b),c.m&&c.o&&Be(b,c.m,c.o),y=new oi(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Sc(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Sr(c.h,y),Wn(y,b,p)}function Ms(c,p){c.H&&Et(c.H,function(y,b){qt(p,b,y)}),c.l&&Rs({},function(y,b){qt(p,b,y)})}function Sc(c,p,y){y=Math.min(c.i.length,y);var b=c.l?R(c.l.Na,c.l,c):null;t:{var L=c.i;let F=-1;for(;;){const et=["count="+y];F==-1?0<y?(F=L[0].g,et.push("ofs="+F)):F=0:et.push("ofs="+F);let kt=!0;for(let Ne=0;Ne<y;Ne++){let Lt=L[Ne].g;const ze=L[Ne].map;if(Lt-=F,0>Lt)F=Math.max(0,L[Ne].g-100),kt=!1;else try{ui(ze,et,"req"+Lt+"_")}catch{b&&b(ze)}}if(kt){b=et.join("&");break t}}}return c=c.i.splice(0,y),p.D=c,b}function Rc(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;Tt||C(),yt||(Tt(),yt=!0),Ht.add(p,c),c.v=0}}function Rl(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=yr(R(c.Fa,c),Il(c,c.v)),c.v++,!0)}s.Fa=function(){if(this.u=null,Ic(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=yr(R(this.ab,this),c)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),ja(this),Ic(this))};function Ps(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Ic(c){c.g=new oi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=fe(c.qa);qt(p,"RID","rpc"),qt(p,"SID",c.K),qt(p,"AID",c.T),qt(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&qt(p,"TO",c.ja),qt(p,"TYPE","xmlhttp"),Ms(c,p),c.m&&c.o&&Be(p,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=Ds(fe(p)),y.m=null,y.P=!0,Oi(y,c)}s.Za=function(){this.C!=null&&(this.C=null,ja(this),Rl(this),_e(19))};function Ga(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Dc(c,p){var y=null;if(c.g==p){Ga(c),Ps(c),c.g=null;var b=2}else if(wr(c.h,p))y=p.D,Mn(c.h,p),b=1;else return;if(c.G!=0){if(p.o)if(b==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var L=c.B;b=xa(),Le(b,new gc(b,y)),Fa(c)}else Rc(c);else if(L=p.s,L==3||L==0&&0<p.X||!(b==1&&id(c,p)||b==2&&Rl(c)))switch(y&&0<y.length&&(p=c.h,p.i=p.i.concat(y)),L){case 1:Bi(c,5);break;case 4:Bi(c,10);break;case 3:Bi(c,6);break;default:Bi(c,2)}}}function Il(c,p){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*p}function Bi(c,p){if(c.j.info("Error code "+p),p==2){var y=R(c.fb,c),b=c.Xa;const L=!b;b=new Mi(b||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Rr(b,"https"),Ds(b),L?Tc(b.toString(),y):Vs(b.toString(),y)}else _e(2);c.G=0,c.l&&c.l.sa(p),Vc(c),wc(c)}s.fb=function(c){c?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))};function Vc(c){if(c.G=0,c.ka=[],c.l){const p=un(c.h);(p.length!=0||c.i.length!=0)&&(X(c.ka,p),X(c.ka,c.i),c.h.i.length=0,K(c.i),c.i.length=0),c.l.ra()}}function Cc(c,p,y){var b=y instanceof Mi?fe(y):new Mi(y);if(b.g!="")p&&(b.g=p+"."+b.g),Is(b,b.s);else{var L=m.location;b=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var F=new Mi(null);b&&Rr(F,b),p&&(F.g=p),L&&Is(F,L),y&&(F.l=y),b=F}return y=c.D,p=c.ya,y&&p&&qt(b,y,p),qt(b,"VER",c.la),Ms(c,b),b}function xc(c,p,y){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Kt(new Dr({eb:y})):new Kt(c.pa),p.Ha(c.J),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nc(){}s=Nc.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ha(){}Ha.prototype.g=function(c,p){return new cn(c,p)};function cn(c,p){Ce.call(this),this.g=new qa(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!ft(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ft(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new di(this)}Y(cn,Ce),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){wl(this.g)},cn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=hl(c),c=y);p.i.push(new Zf(p.Ya++,c)),p.G==3&&Fa(p)},cn.prototype.N=function(){this.g.l=null,delete this.j,wl(this.g),delete this.g,cn.aa.N.call(this)};function Oc(c){gr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const y in p){c=y;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}Y(Oc,gr);function Mc(){Zn.call(this),this.status=1}Y(Mc,Zn);function di(c){this.g=c}Y(di,Nc),di.prototype.ua=function(){Le(this.g,"a")},di.prototype.ta=function(c){Le(this.g,new Oc(c))},di.prototype.sa=function(c){Le(this.g,new Mc)},di.prototype.ra=function(){Le(this.g,"b")},Ha.prototype.createWebChannel=Ha.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,x0=function(){return new Ha},C0=function(){return xa()},V0=On,gg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xe.NO_ERROR=0,xe.TIMEOUT=8,xe.HTTP_ERROR=6,zh=xe,Ni.COMPLETE="complete",D0=Ni,mc.EventType=si,si.OPEN="a",si.CLOSE="b",si.ERROR="c",si.MESSAGE="d",Ce.prototype.listen=Ce.prototype.K,Eu=mc,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,I0=Kt}).apply(typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{});const OE="@firebase/firestore",ME="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new Kg("@firebase/firestore");function So(){return ls.logLevel}function zI(s){ls.setLogLevel(s)}function J(s,...t){if(ls.logLevel<=Pt.DEBUG){const e=t.map(Jg);ls.debug(`Firestore (${tl}): ${s}`,...e)}}function ve(s,...t){if(ls.logLevel<=Pt.ERROR){const e=t.map(Jg);ls.error(`Firestore (${tl}): ${s}`,...e)}}function Ri(s,...t){if(ls.logLevel<=Pt.WARN){const e=t.map(Jg);ls.warn(`Firestore (${tl}): ${s}`,...e)}}function Jg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(s="Unexpected state"){const t=`FIRESTORE (${tl}) INTERNAL ASSERTION FAILED: `+s;throw ve(t),new Error(t)}function ct(s,t){s||st()}function qI(s,t){s||st()}function it(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends ba{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class jI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(He.UNAUTHENTICATED))}shutdown(){}}class FI{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class GI{constructor(t){this.t=t,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ct(this.o===void 0);let r=this.i;const o=g=>this.i!==r?(r=this.i,e(g)):Promise.resolve();let u=new We;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new We,t.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=u;t.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new We)}},0),h()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct(typeof r.accessToken=="string"),new N0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ct(t===null||typeof t=="string"),new He(t)}}class HI{constructor(t,e,r){this.l=t,this.h=e,this.P=r,this.type="FirstParty",this.user=He.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class KI{constructor(t,e,r){this.l=t,this.h=e,this.P=r}getToken(){return Promise.resolve(new HI(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class PE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QI{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,y0(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){ct(this.o===void 0);const r=u=>{u.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,J("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable(()=>r(u))};const o=u=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new PE(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ct(typeof e.token=="string"),this.R=e.token,new PE(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<s;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=YI(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<e&&(r+=t.charAt(o[u]%62))}return r}}function At(s,t){return s<t?-1:s>t?1:0}function Po(s,t,e){return s.length===t.length&&s.every((r,o)=>e(r,t[o]))}function M0(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=-62135596800,LE=1e6;class ae{static now(){return ae.fromMillis(Date.now())}static fromDate(t){return ae.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*LE);return new ae(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Z(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Z(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<kE)throw new Z(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Z(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/LE}_compareTo(t){return this.seconds===t.seconds?At(this.nanoseconds,t.nanoseconds):At(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-kE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{static fromTimestamp(t){return new mt(t)}static min(){return new mt(new ae(0,0))}static max(){return new mt(new ae(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="__name__";class Ei{constructor(t,e,r){e===void 0?e=0:e>t.length&&st(),r===void 0?r=t.length-e:r>t.length-e&&st(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Ei.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Ei?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let o=0;o<r;o++){const u=Ei.compareSegments(t.get(o),e.get(o));if(u!==0)return u}return Math.sign(t.length-e.length)}static compareSegments(t,e){const r=Ei.isNumericId(t),o=Ei.isNumericId(e);return r&&!o?-1:!r&&o?1:r&&o?Ei.extractNumericId(t).compare(Ei.extractNumericId(e)):t<e?-1:t>e?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return is.fromString(t.substring(4,t.length-2))}}class Nt extends Ei{construct(t,e,r){return new Nt(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new Z(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(o=>o.length>0))}return new Nt(e)}static emptyPath(){return new Nt([])}}const $I=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class re extends Ei{construct(t,e,r){return new re(t,e,r)}static isValidIdentifier(t){return $I.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),re.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UE}static keyField(){return new re([UE])}static fromServerFormat(t){const e=[];let r="",o=0;const u=()=>{if(r.length===0)throw new Z(j.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let h=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new Z(j.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Z(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new Z(j.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new re(e)}static emptyPath(){return new re([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(t){this.path=t}static fromPath(t){return new nt(Nt.fromString(t))}static fromName(t){return new nt(Nt.fromString(t).popFirst(5))}static empty(){return new nt(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Nt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Nt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new nt(new Nt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=-1;class tf{constructor(t,e,r,o){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=o}}function pg(s){return s.fields.find(t=>t.kind===2)}function na(s){return s.fields.filter(t=>t.kind!==2)}tf.UNKNOWN_ID=-1;class qh{constructor(t,e){this.fieldPath=t,this.kind=e}}class Mu{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Mu(0,xn.min())}}function P0(s,t){const e=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=mt.fromTimestamp(r===1e9?new ae(e+1,0):new ae(e,r));return new xn(o,nt.empty(),t)}function k0(s){return new xn(s.readTime,s.key,ko)}class xn{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new xn(mt.min(),nt.empty(),ko)}static max(){return new xn(mt.max(),nt.empty(),ko)}}function tp(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=nt.comparator(s.documentKey,t.documentKey),e!==0?e:At(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class U0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _s(s){if(s.code!==j.FAILED_PRECONDITION||s.message!==L0)throw s;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new U((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(e,u).next(r,o)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof U?e:U.resolve(e)}catch(e){return U.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):U.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):U.reject(e)}static resolve(t){return new U((e,r)=>{e(t)})}static reject(t){return new U((e,r)=>{r(t)})}static waitFor(t){return new U((e,r)=>{let o=0,u=0,h=!1;t.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&e()},g=>r(g))}),h=!0,u===o&&e()})}static or(t){let e=U.resolve(!1);for(const r of t)e=e.next(o=>o?U.resolve(o):r());return e}static forEach(t,e){const r=[];return t.forEach((o,u)=>{r.push(e.call(this,o,u))}),this.waitFor(r)}static mapArray(t,e){return new U((r,o)=>{const u=t.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const _=g;e(t[_]).next(E=>{h[_]=E,++m,m===u&&r(h)},E=>o(E))}})}static doWhile(t,e){return new U((r,o)=>{const u=()=>{t()===!0?e().next(()=>{u()},o):r()};u()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="SimpleDb";class Af{static open(t,e,r,o){try{return new Af(e,t.transaction(o,r))}catch(u){throw new wu(e,u)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.m=new We,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{e.error?this.m.reject(new wu(t,e.error)):this.m.resolve()},this.transaction.onerror=r=>{const o=ep(r.target.error);this.m.reject(new wu(t,o))}}get p(){return this.m.promise}abort(t){t&&this.m.reject(t),this.aborted||(J(Cn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new ZI(e)}}class wi{static delete(t){return J(Cn,"Removing database:",t),ra(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!h0())return!1;if(wi.v())return!0;const t=Wh(),e=wi.C(t),r=0<e&&e<10,o=B0(t),u=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)}static v(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,e){return t.store(e)}static C(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.O=r,wi.C(Wh())===12.2&&ve("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(t){return this.db||(J(Cn,"Opening database:",this.name),this.db=await new Promise((e,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const h=u.target.result;e(h)},o.onblocked=()=>{r(new wu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const h=u.target.error;h.name==="VersionError"?r(new Z(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):h.name==="InvalidStateError"?r(new Z(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h)):r(new wu(t,h))},o.onupgradeneeded=u=>{J(Cn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const h=u.target.result;this.O.B(h,o.transaction,u.oldVersion,this.version).next(()=>{J(Cn,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}k(t){this.L=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,o){const u=e==="readonly";let h=0;for(;;){++h;try{this.db=await this.N(t);const m=Af.open(this.db,t,u?"readonly":"readwrite",r),g=o(m).next(_=>(m.S(),_)).catch(_=>(m.abort(_),U.reject(_))).toPromise();return g.catch(()=>{}),await m.p,g}catch(m){const g=m,_=g.name!=="FirebaseError"&&h<3;if(J(Cn,"Transaction failed with error:",g.message,"Retrying:",_),this.close(),!_)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function B0(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class XI{constructor(t){this.q=t,this.$=!1,this.K=null}get isDone(){return this.$}get U(){return this.K}set cursor(t){this.q=t}done(){this.$=!0}W(t){this.K=t}delete(){return ra(this.q.delete())}}class wu extends Z{constructor(t,e){super(j.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function ys(s){return s.name==="IndexedDbTransactionError"}class ZI{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(J(Cn,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(J(Cn,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ra(r)}add(t){return J(Cn,"ADD",this.store.name,t,t),ra(this.store.add(t))}get(t){return ra(this.store.get(t)).next(e=>(e===void 0&&(e=null),J(Cn,"GET",this.store.name,t,e),e))}delete(t){return J(Cn,"DELETE",this.store.name,t),ra(this.store.delete(t))}count(){return J(Cn,"COUNT",this.store.name),ra(this.store.count())}G(t,e){const r=this.options(t,e),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new U((h,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{h(g.target.result)}})}{const u=this.cursor(r),h=[];return this.j(u,(m,g)=>{h.push(g)}).next(()=>h)}}H(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new U((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}J(t,e){J(Cn,"DELETE ALL",this.store.name);const r=this.options(t,e);r.Y=!1;const o=this.cursor(r);return this.j(o,(u,h,m)=>m.delete())}Z(t,e){let r;e?r=t:(r={},e=t);const o=this.cursor(r);return this.j(o,e)}X(t){const e=this.cursor({});return new U((r,o)=>{e.onerror=u=>{const h=ep(u.target.error);o(h)},e.onsuccess=u=>{const h=u.target.result;h?t(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}j(t,e){const r=[];return new U((o,u)=>{t.onerror=h=>{u(h.target.error)},t.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const g=new XI(m),_=e(m.primaryKey,m.value,g);if(_ instanceof U){const E=_.catch(A=>(g.done(),U.reject(A)));r.push(E)}g.isDone?o():g.U===null?m.continue():m.continue(g.U)}}).next(()=>U.waitFor(r))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.Y?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function ra(s){return new U((t,e)=>{s.onsuccess=r=>{const o=r.target.result;t(o)},s.onerror=r=>{const o=ep(r.target.error);e(o)}})}let BE=!1;function ep(s){const t=wi.C(Wh());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(e)>=0){const r=new Z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return BE||(BE=!0,setTimeout(()=>{throw r},0)),r}}return s}const Su="IndexBackfiller";class WI{constructor(t,e){this.asyncQueue=t,this.ee=e,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(t){J(Su,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,async()=>{this.task=null;try{const e=await this.ee.ne();J(Su,`Documents written: ${e}`)}catch(e){ys(e)?J(Su,"Ignoring IndexedDB error during index backfill: ",e):await _s(e)}await this.te(6e4)})}}class JI{constructor(t,e){this.localStore=t,this.persistence=e}async ne(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.re(e,t))}re(t,e){const r=new Set;let o=e,u=!0;return U.doWhile(()=>u===!0&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(h=>{if(h!==null&&!r.has(h))return J(Su,`Processing collection: ${h}`),this.ie(t,h,o).next(m=>{o-=m,r.add(h)});u=!1})).next(()=>e-o)}ie(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(o=>this.localStore.localDocuments.getNextDocuments(t,e,o,r).next(u=>{const h=u.changes;return this.localStore.indexManager.updateIndexEntries(t,h).next(()=>this.se(o,u)).next(m=>(J(Su,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(t,e,m))).next(()=>h.size)}))}se(t,e){let r=t;return e.changes.forEach((o,u)=>{const h=k0(u);tp(h,r)>0&&(r=h)}),new xn(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.oe(r),this._e=r=>e.writeSequenceNumber(r))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}En.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=-1;function Zu(s){return s==null}function Pu(s){return s===0&&1/s==-1/0}function z0(s){return typeof s=="number"&&Number.isInteger(s)&&!Pu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="";function sn(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=zE(t)),t=t1(s.get(e),t);return zE(t)}function t1(s,t){let e=t;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":e+="";break;case ef:e+="";break;default:e+=u}}return e}function zE(s){return s+ef+""}function Ai(s){const t=s.length;if(ct(t>=2),t===2)return ct(s.charAt(0)===ef&&s.charAt(1)===""),Nt.emptyPath();const e=t-2,r=[];let o="";for(let u=0;u<t;){const h=s.indexOf(ef,u);switch((h<0||h>e)&&st(),s.charAt(h+1)){case"":const m=s.substring(u,h);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,h),o+="\0";break;case"":o+=s.substring(u,h+1);break;default:st()}u=h+2}return new Nt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="remoteDocuments",Wu="owner",vo="owner",ku="mutationQueues",e1="userId",ii="mutations",qE="batchId",ua="userMutationsIndex",jE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(s,t){return[s,sn(t)]}function q0(s,t,e){return[s,sn(t),e]}const n1={},Lo="documentMutations",nf="remoteDocumentsV14",i1=["prefixPath","collectionGroup","readTime","documentId"],Fh="documentKeyIndex",r1=["prefixPath","collectionGroup","documentId"],j0="collectionGroupIndex",s1=["collectionGroup","readTime","prefixPath","documentId"],Lu="remoteDocumentGlobal",_g="remoteDocumentGlobalKey",Uo="targets",F0="queryTargetsIndex",a1=["canonicalId","targetId"],Bo="targetDocuments",o1=["targetId","path"],np="documentTargetsIndex",l1=["path","targetId"],rf="targetGlobalKey",fa="targetGlobal",Uu="collectionParents",u1=["collectionId","parent"],zo="clientMetadata",c1="clientId",bf="bundles",h1="bundleId",wf="namedQueries",f1="name",ip="indexConfiguration",d1="indexId",yg="collectionGroupIndex",m1="collectionGroup",sf="indexState",g1=["indexId","uid"],G0="sequenceNumberIndex",p1=["uid","sequenceNumber"],af="indexEntries",_1=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],H0="documentKeyIndex",y1=["indexId","uid","orderedDocumentKey"],Sf="documentOverlays",v1=["userId","collectionPath","documentId"],vg="collectionPathOverlayIndex",E1=["userId","collectionPath","largestBatchId"],K0="collectionGroupOverlayIndex",T1=["userId","collectionGroup","largestBatchId"],rp="globals",A1="name",Q0=[ku,ii,Lo,ia,Uo,Wu,fa,Bo,zo,Lu,Uu,bf,wf],b1=[...Q0,Sf],Y0=[ku,ii,Lo,nf,Uo,Wu,fa,Bo,zo,Lu,Uu,bf,wf,Sf],$0=Y0,sp=[...$0,ip,sf,af],w1=sp,S1=[...sp,rp];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg extends U0{constructor(t,e){super(),this.ue=t,this.currentSequenceNumber=e}}function ke(s,t){const e=it(s);return wi.M(e.ue,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function vs(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function X0(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t,e){this.comparator=t,this.root=e||Xe.EMPTY}insert(t,e){return new ee(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(t){return new ee(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return e+r.left.size;o<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Mh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Mh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Mh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Mh(this.root,t,this.comparator,!0)}}class Mh{constructor(t,e,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?r(t.key,e):1,e&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Xe{constructor(t,e,r,o,u){this.key=t,this.value=e,this.color=r??Xe.RED,this.left=o??Xe.EMPTY,this.right=u??Xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,o,u){return new Xe(t??this.key,e??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,e,r),null):u===0?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),e(t,o.key)===0){if(o.right.isEmpty())return Xe.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const t=this.left.check();if(t!==this.right.check())throw st();return t+(this.isRed()?0:1)}}Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1;Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(t,e,r,o,u){return this}insert(t,e,r){return new Xe(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t){this.comparator=t,this.data=new ee(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new GE(this.data.getIterator())}getIteratorFrom(t){return new GE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof $t)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new $t(this.comparator);return e.data=t,e}}class GE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Eo(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t){this.fields=t,t.sort(re.comparator)}static empty(){return new Tn([])}unionWith(t){let e=new $t(re.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new Tn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Po(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Z0("Invalid base64 string: "+u):u}}(t);return new pe(e)}static fromUint8Array(t){const e=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(t);return new pe(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return At(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}pe.EMPTY_BYTE_STRING=new pe("");const I1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sr(s){if(ct(!!s),typeof s=="string"){let t=0;const e=I1.exec(s);if(ct(!!e),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ie(s.seconds),nanos:ie(s.nanos)}}function ie(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ar(s){return typeof s=="string"?pe.fromBase64String(s):pe.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="server_timestamp",J0="__type__",tA="__previous_value__",eA="__local_write_time__";function Rf(s){var t,e;return((e=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[J0])===null||e===void 0?void 0:e.stringValue)===W0}function If(s){const t=s.mapValue.fields[tA];return Rf(t)?If(t):t}function Bu(s){const t=sr(s.mapValue.fields[eA].timestampValue);return new ae(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(t,e,r,o,u,h,m,g,_){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_}}const of="(default)";class us{constructor(t,e){this.projectId=t,this.database=e||of}static empty(){return new us("","")}get isDefaultDatabase(){return this.database===of}isEqual(t){return t instanceof us&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="__type__",nA="__max__",ts={mapValue:{fields:{__type__:{stringValue:nA}}}},op="__vector__",qo="value",Gh={nullValue:"NULL_VALUE"};function cs(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Rf(s)?4:iA(s)?9007199254740991:Df(s)?10:11:st()}function Ii(s,t){if(s===t)return!0;const e=cs(s);if(e!==cs(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Bu(s).isEqual(Bu(t));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=sr(o.timestampValue),m=sr(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(s,t);case 5:return s.stringValue===t.stringValue;case 6:return function(o,u){return ar(o.bytesValue).isEqual(ar(u.bytesValue))}(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return function(o,u){return ie(o.geoPointValue.latitude)===ie(u.geoPointValue.latitude)&&ie(o.geoPointValue.longitude)===ie(u.geoPointValue.longitude)}(s,t);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return ie(o.integerValue)===ie(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=ie(o.doubleValue),m=ie(u.doubleValue);return h===m?Pu(h)===Pu(m):isNaN(h)&&isNaN(m)}return!1}(s,t);case 9:return Po(s.arrayValue.values||[],t.arrayValue.values||[],Ii);case 10:case 11:return function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(FE(h)!==FE(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!Ii(h[g],m[g])))return!1;return!0}(s,t);default:return st()}}function zu(s,t){return(s.values||[]).find(e=>Ii(e,t))!==void 0}function hs(s,t){if(s===t)return 0;const e=cs(s),r=cs(t);if(e!==r)return At(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return At(s.booleanValue,t.booleanValue);case 2:return function(u,h){const m=ie(u.integerValue||u.doubleValue),g=ie(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(s,t);case 3:return HE(s.timestampValue,t.timestampValue);case 4:return HE(Bu(s),Bu(t));case 5:return At(s.stringValue,t.stringValue);case 6:return function(u,h){const m=ar(u),g=ar(h);return m.compareTo(g)}(s.bytesValue,t.bytesValue);case 7:return function(u,h){const m=u.split("/"),g=h.split("/");for(let _=0;_<m.length&&_<g.length;_++){const E=At(m[_],g[_]);if(E!==0)return E}return At(m.length,g.length)}(s.referenceValue,t.referenceValue);case 8:return function(u,h){const m=At(ie(u.latitude),ie(h.latitude));return m!==0?m:At(ie(u.longitude),ie(h.longitude))}(s.geoPointValue,t.geoPointValue);case 9:return KE(s.arrayValue,t.arrayValue);case 10:return function(u,h){var m,g,_,E;const A=u.fields||{},R=h.fields||{},P=(m=A[qo])===null||m===void 0?void 0:m.arrayValue,Y=(g=R[qo])===null||g===void 0?void 0:g.arrayValue,K=At(((_=P==null?void 0:P.values)===null||_===void 0?void 0:_.length)||0,((E=Y==null?void 0:Y.values)===null||E===void 0?void 0:E.length)||0);return K!==0?K:KE(P,Y)}(s.mapValue,t.mapValue);case 11:return function(u,h){if(u===ts.mapValue&&h===ts.mapValue)return 0;if(u===ts.mapValue)return 1;if(h===ts.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),_=h.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let A=0;A<g.length&&A<E.length;++A){const R=At(g[A],E[A]);if(R!==0)return R;const P=hs(m[g[A]],_[E[A]]);if(P!==0)return P}return At(g.length,E.length)}(s.mapValue,t.mapValue);default:throw st()}}function HE(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return At(s,t);const e=sr(s),r=sr(t),o=At(e.seconds,r.seconds);return o!==0?o:At(e.nanos,r.nanos)}function KE(s,t){const e=s.values||[],r=t.values||[];for(let o=0;o<e.length&&o<r.length;++o){const u=hs(e[o],r[o]);if(u)return u}return At(e.length,r.length)}function jo(s){return Tg(s)}function Tg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(e){const r=sr(e);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(e){return ar(e).toBase64()}(s.bytesValue):"referenceValue"in s?function(e){return nt.fromName(e).toString()}(s.referenceValue):"geoPointValue"in s?function(e){return`geo(${e.latitude},${e.longitude})`}(s.geoPointValue):"arrayValue"in s?function(e){let r="[",o=!0;for(const u of e.values||[])o?o=!1:r+=",",r+=Tg(u);return r+"]"}(s.arrayValue):"mapValue"in s?function(e){const r=Object.keys(e.fields||{}).sort();let o="{",u=!0;for(const h of r)u?u=!1:o+=",",o+=`${h}:${Tg(e.fields[h])}`;return o+"}"}(s.mapValue):st()}function Hh(s){switch(cs(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=If(s);return t?16+Hh(t):16;case 5:return 2*s.stringValue.length;case 6:return ar(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,u)=>o+Hh(u),0)}(s.arrayValue);case 10:case 11:return function(r){let o=0;return vs(r.fields,(u,h)=>{o+=u.length+Hh(h)}),o}(s.mapValue);default:throw st()}}function ma(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function Ag(s){return!!s&&"integerValue"in s}function qu(s){return!!s&&"arrayValue"in s}function QE(s){return!!s&&"nullValue"in s}function YE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Kh(s){return!!s&&"mapValue"in s}function Df(s){var t,e;return((e=(((t=s==null?void 0:s.mapValue)===null||t===void 0?void 0:t.fields)||{})[ap])===null||e===void 0?void 0:e.stringValue)===op}function Ru(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const t={mapValue:{fields:{}}};return vs(s.mapValue.fields,(e,r)=>t.mapValue.fields[e]=Ru(r)),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Ru(s.arrayValue.values[e]);return t}return Object.assign({},s)}function iA(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===nA}const rA={mapValue:{fields:{[ap]:{stringValue:op},[qo]:{arrayValue:{}}}}};function V1(s){return"nullValue"in s?Gh:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?ma(us.empty(),nt.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?Df(s)?rA:{mapValue:{}}:st()}function C1(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?ma(us.empty(),nt.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?rA:"mapValue"in s?Df(s)?{mapValue:{}}:ts:st()}function $E(s,t){const e=hs(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function XE(s,t){const e=hs(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t){this.value=t}static empty(){return new Ze({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!Kh(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ru(e)}setAll(t){let e=re.emptyPath(),r={},o=[];t.forEach((h,m)=>{if(!e.isImmediateParentOf(m)){const g=this.getFieldsMap(e);this.applyChanges(g,r,o),r={},o=[],e=m.popLast()}h?r[m.lastSegment()]=Ru(h):o.push(m.lastSegment())});const u=this.getFieldsMap(e);this.applyChanges(u,r,o)}delete(t){const e=this.field(t.popLast());Kh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ii(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=e.mapValue.fields[t.get(r)];Kh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=o),e=o}return e.mapValue.fields}applyChanges(t,e,r){vs(e,(o,u)=>t[o]=u);for(const o of r)delete t[o]}clone(){return new Ze(Ru(this.value))}}function sA(s){const t=[];return vs(s.fields,(e,r)=>{const o=new re([e]);if(Kh(r)){const u=sA(r.mapValue).fields;if(u.length===0)t.push(o);else for(const h of u)t.push(o.child(h))}else t.push(o)}),new Tn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t,e,r,o,u,h,m){this.key=t,this.documentType=e,this.version=r,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(t){return new ne(t,0,mt.min(),mt.min(),mt.min(),Ze.empty(),0)}static newFoundDocument(t,e,r,o){return new ne(t,1,e,mt.min(),r,o,0)}static newNoDocument(t,e){return new ne(t,2,e,mt.min(),mt.min(),Ze.empty(),0)}static newUnknownDocument(t,e){return new ne(t,3,e,mt.min(),mt.min(),Ze.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(mt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ze.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ze.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ne&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ne(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(t,e){this.position=t,this.inclusive=e}}function ZE(s,t,e){let r=0;for(let o=0;o<s.position.length;o++){const u=t[o],h=s.position[o];if(u.field.isKeyField()?r=nt.comparator(nt.fromName(h.referenceValue),e.key):r=hs(h,e.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function WE(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!Ii(s.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(t,e="asc"){this.field=t,this.dir=e}}function x1(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{}class Ot extends aA{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new N1(t,e,r):e==="array-contains"?new P1(t,r):e==="in"?new fA(t,r):e==="not-in"?new k1(t,r):e==="array-contains-any"?new L1(t,r):new Ot(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new O1(t,r):new M1(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(hs(e,this.value)):e!==null&&cs(this.value)===cs(e)&&this.matchesComparison(hs(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yt extends aA{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new Yt(t,e)}matches(t){return Fo(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Fo(s){return s.op==="and"}function bg(s){return s.op==="or"}function lp(s){return oA(s)&&Fo(s)}function oA(s){for(const t of s.filters)if(t instanceof Yt)return!1;return!0}function wg(s){if(s instanceof Ot)return s.field.canonicalString()+s.op.toString()+jo(s.value);if(lp(s))return s.filters.map(t=>wg(t)).join(",");{const t=s.filters.map(e=>wg(e)).join(",");return`${s.op}(${t})`}}function lA(s,t){return s instanceof Ot?function(r,o){return o instanceof Ot&&r.op===o.op&&r.field.isEqual(o.field)&&Ii(r.value,o.value)}(s,t):s instanceof Yt?function(r,o){return o instanceof Yt&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((u,h,m)=>u&&lA(h,o.filters[m]),!0):!1}(s,t):void st()}function uA(s,t){const e=s.filters.concat(t);return Yt.create(e,s.op)}function cA(s){return s instanceof Ot?function(e){return`${e.field.canonicalString()} ${e.op} ${jo(e.value)}`}(s):s instanceof Yt?function(e){return e.op.toString()+" {"+e.getFilters().map(cA).join(" ,")+"}"}(s):"Filter"}class N1 extends Ot{constructor(t,e,r){super(t,e,r),this.key=nt.fromName(r.referenceValue)}matches(t){const e=nt.comparator(t.key,this.key);return this.matchesComparison(e)}}class O1 extends Ot{constructor(t,e){super(t,"in",e),this.keys=hA("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class M1 extends Ot{constructor(t,e){super(t,"not-in",e),this.keys=hA("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function hA(s,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(r=>nt.fromName(r.referenceValue))}class P1 extends Ot{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return qu(e)&&zu(e.arrayValue,this.value)}}class fA extends Ot{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&zu(this.value.arrayValue,e)}}class k1 extends Ot{constructor(t,e){super(t,"not-in",e)}matches(t){if(zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!zu(this.value.arrayValue,e)}}class L1 extends Ot{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!qu(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>zu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(t,e=null,r=[],o=[],u=null,h=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.le=null}}function Sg(s,t=null,e=[],r=[],o=null,u=null,h=null){return new U1(s,t,e,r,o,u,h)}function ga(s){const t=it(s);if(t.le===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>wg(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),Zu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>jo(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>jo(r)).join(",")),t.le=e}return t.le}function Ju(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!x1(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!lA(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!WE(s.startAt,t.startAt)&&WE(s.endAt,t.endAt)}function lf(s){return nt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function uf(s,t){return s.filters.filter(e=>e instanceof Ot&&e.field.isEqual(t))}function JE(s,t,e){let r=Gh,o=!0;for(const u of uf(s,t)){let h=Gh,m=!0;switch(u.op){case"<":case"<=":h=V1(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,m=!1;break;case"!=":case"not-in":h=Gh}$E({value:r,inclusive:o},{value:h,inclusive:m})<0&&(r=h,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const h=e.position[u];$E({value:r,inclusive:o},{value:h,inclusive:e.inclusive})<0&&(r=h,o=e.inclusive);break}}return{value:r,inclusive:o}}function tT(s,t,e){let r=ts,o=!0;for(const u of uf(s,t)){let h=ts,m=!0;switch(u.op){case">=":case">":h=C1(u.value),m=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,m=!1;break;case"!=":case"not-in":h=ts}XE({value:r,inclusive:o},{value:h,inclusive:m})>0&&(r=h,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const h=e.position[u];XE({value:r,inclusive:o},{value:h,inclusive:e.inclusive})>0&&(r=h,o=e.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(t,e=null,r=[],o=[],u=null,h="F",m=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function dA(s,t,e,r,o,u,h,m){return new lr(s,t,e,r,o,u,h,m)}function el(s){return new lr(s)}function eT(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function up(s){return s.collectionGroup!==null}function Co(s){const t=it(s);if(t.he===null){t.he=[];const e=new Set;for(const u of t.explicitOrderBy)t.he.push(u),e.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new $t(re.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(_=>{_.isInequality()&&(m=m.add(_.field))})}),m})(t).forEach(u=>{e.has(u.canonicalString())||u.isKeyField()||t.he.push(new ju(u,r))}),e.has(re.keyField().canonicalString())||t.he.push(new ju(re.keyField(),r))}return t.he}function gn(s){const t=it(s);return t.Pe||(t.Pe=B1(t,Co(s))),t.Pe}function B1(s,t){if(s.limitType==="F")return Sg(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new ju(o.field,u)});const e=s.endAt?new fs(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new fs(s.startAt.position,s.startAt.inclusive):null;return Sg(s.path,s.collectionGroup,t,s.filters,s.limit,e,r)}}function Rg(s,t){const e=s.filters.concat([t]);return new lr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),e,s.limit,s.limitType,s.startAt,s.endAt)}function cf(s,t,e){return new lr(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function tc(s,t){return Ju(gn(s),gn(t))&&s.limitType===t.limitType}function mA(s){return`${ga(gn(s))}|lt:${s.limitType}`}function Ro(s){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(o=>cA(o)).join(", ")}]`),Zu(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(o=>jo(o)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(o=>jo(o)).join(",")),`Target(${r})`}(gn(s))}; limitType=${s.limitType})`}function ec(s,t){return t.isFoundDocument()&&function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):nt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(s,t)&&function(r,o){for(const u of Co(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(s,t)&&function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0}(s,t)&&function(r,o){return!(r.startAt&&!function(h,m,g){const _=ZE(h,m,g);return h.inclusive?_<=0:_<0}(r.startAt,Co(r),o)||r.endAt&&!function(h,m,g){const _=ZE(h,m,g);return h.inclusive?_>=0:_>0}(r.endAt,Co(r),o))}(s,t)}function gA(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function pA(s){return(t,e)=>{let r=!1;for(const o of Co(s)){const u=z1(o,t,e);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function z1(s,t,e){const r=s.field.isKeyField()?nt.comparator(t.key,e.key):function(u,h,m){const g=h.data.field(u),_=m.data.field(u);return g!==null&&_!==null?hs(g,_):st()}(s.field,t,e);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,e]);o.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[e]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){vs(this.inner,(e,r)=>{for(const[o,u]of r)t(o,u)})}isEmpty(){return X0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=new ee(nt.comparator);function An(){return q1}const _A=new ee(nt.comparator);function Tu(...s){let t=_A;for(const e of s)t=t.insert(e.key,e);return t}function yA(s){let t=_A;return s.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function bi(){return Iu()}function vA(){return Iu()}function Iu(){return new ur(s=>s.toString(),(s,t)=>s.isEqual(t))}const j1=new ee(nt.comparator),F1=new $t(nt.comparator);function wt(...s){let t=F1;for(const e of s)t=t.add(e);return t}const G1=new $t(At);function cp(){return G1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pu(t)?"-0":t}}function EA(s){return{integerValue:""+s}}function TA(s,t){return z0(t)?EA(t):hp(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(){this._=void 0}}function H1(s,t,e){return s instanceof Go?function(o,u){const h={fields:{[J0]:{stringValue:W0},[eA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Rf(u)&&(u=If(u)),u&&(h.fields[tA]=u),{mapValue:h}}(e,t):s instanceof pa?bA(s,t):s instanceof _a?wA(s,t):function(o,u){const h=AA(o,u),m=nT(h)+nT(o.Ie);return Ag(h)&&Ag(o.Ie)?EA(m):hp(o.serializer,m)}(s,t)}function K1(s,t,e){return s instanceof pa?bA(s,t):s instanceof _a?wA(s,t):e}function AA(s,t){return s instanceof Ho?function(r){return Ag(r)||function(u){return!!u&&"doubleValue"in u}(r)}(t)?t:{integerValue:0}:null}class Go extends Vf{}class pa extends Vf{constructor(t){super(),this.elements=t}}function bA(s,t){const e=SA(t);for(const r of s.elements)e.some(o=>Ii(o,r))||e.push(r);return{arrayValue:{values:e}}}class _a extends Vf{constructor(t){super(),this.elements=t}}function wA(s,t){let e=SA(t);for(const r of s.elements)e=e.filter(o=>!Ii(o,r));return{arrayValue:{values:e}}}class Ho extends Vf{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function nT(s){return ie(s.integerValue||s.doubleValue)}function SA(s){return qu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(t,e){this.field=t,this.transform=e}}function Q1(s,t){return s.field.isEqual(t.field)&&function(r,o){return r instanceof pa&&o instanceof pa||r instanceof _a&&o instanceof _a?Po(r.elements,o.elements,Ii):r instanceof Ho&&o instanceof Ho?Ii(r.Ie,o.Ie):r instanceof Go&&o instanceof Go}(s.transform,t.transform)}class Y1{constructor(t,e){this.version=t,this.transformResults=e}}class se{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new se}static exists(t){return new se(void 0,t)}static updateTime(t){return new se(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Qh(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Cf{}function RA(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new il(s.key,se.none()):new nl(s.key,s.data,se.none());{const e=s.data,r=Ze.empty();let o=new $t(re.comparator);for(let u of t.fields)if(!o.has(u)){let h=e.field(u);h===null&&u.length>1&&(u=u.popLast(),h=e.field(u)),h===null?r.delete(u):r.set(u,h),o=o.add(u)}return new cr(s.key,r,new Tn(o.toArray()),se.none())}}function $1(s,t,e){s instanceof nl?function(o,u,h){const m=o.value.clone(),g=rT(o.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(s,t,e):s instanceof cr?function(o,u,h){if(!Qh(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=rT(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(IA(o)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(s,t,e):function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,t,e)}function Du(s,t,e,r){return s instanceof nl?function(u,h,m,g){if(!Qh(u.precondition,h))return m;const _=u.value.clone(),E=sT(u.fieldTransforms,g,h);return _.setAll(E),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null}(s,t,e,r):s instanceof cr?function(u,h,m,g){if(!Qh(u.precondition,h))return m;const _=sT(u.fieldTransforms,g,h),E=h.data;return E.setAll(IA(u)),E.setAll(_),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(A=>A.field))}(s,t,e,r):function(u,h,m){return Qh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(s,t,e)}function X1(s,t){let e=null;for(const r of s.fieldTransforms){const o=t.data.field(r.field),u=AA(r.transform,o||null);u!=null&&(e===null&&(e=Ze.empty()),e.set(r.field,u))}return e||null}function iT(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Po(r,o,(u,h)=>Q1(u,h))}(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class nl extends Cf{constructor(t,e,r,o=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class cr extends Cf{constructor(t,e,r,o,u=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function IA(s){const t=new Map;return s.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=s.data.field(e);t.set(e,r)}}),t}function rT(s,t,e){const r=new Map;ct(s.length===e.length);for(let o=0;o<e.length;o++){const u=s[o],h=u.transform,m=t.data.field(u.field);r.set(u.field,K1(h,m,e[o]))}return r}function sT(s,t,e){const r=new Map;for(const o of s){const u=o.transform,h=e.data.field(o.field);r.set(o.field,H1(u,h,t))}return r}class il extends Cf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fp extends Cf{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(t,e,r,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&$1(u,t,r[o])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=Du(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=Du(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=vA();return this.mutations.forEach(o=>{const u=t.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=e.has(o.key)?null:m;const g=RA(h,m);g!==null&&r.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(mt.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),wt())}isEqual(t){return this.batchId===t.batchId&&Po(this.mutations,t.mutations,(e,r)=>iT(e,r))&&Po(this.baseMutations,t.baseMutations,(e,r)=>iT(e,r))}}class mp{constructor(t,e,r,o){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=o}static from(t,e,r){ct(t.mutations.length===r.length);let o=function(){return j1}();const u=t.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new mp(t,e,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie,Bt;function DA(s){switch(s){case j.OK:return st();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return st()}}function VA(s){if(s===void 0)return ve("GRPC error has no .code"),j.UNKNOWN;switch(s){case Ie.OK:return j.OK;case Ie.CANCELLED:return j.CANCELLED;case Ie.UNKNOWN:return j.UNKNOWN;case Ie.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case Ie.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case Ie.INTERNAL:return j.INTERNAL;case Ie.UNAVAILABLE:return j.UNAVAILABLE;case Ie.UNAUTHENTICATED:return j.UNAUTHENTICATED;case Ie.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case Ie.NOT_FOUND:return j.NOT_FOUND;case Ie.ALREADY_EXISTS:return j.ALREADY_EXISTS;case Ie.PERMISSION_DENIED:return j.PERMISSION_DENIED;case Ie.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case Ie.ABORTED:return j.ABORTED;case Ie.OUT_OF_RANGE:return j.OUT_OF_RANGE;case Ie.UNIMPLEMENTED:return j.UNIMPLEMENTED;case Ie.DATA_LOSS:return j.DATA_LOSS;default:return st()}}(Bt=Ie||(Ie={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=new is([4294967295,4294967295],0);function aT(s){const t=CA().encode(s),e=new R0;return e.update(t),new Uint8Array(e.digest())}function oT(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new is([e,r],0),new is([o,u],0)]}class pp{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new Au(`Invalid padding: ${e}`);if(r<0)throw new Au(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Au(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new Au(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=is.fromNumber(this.Ee)}Ae(t,e,r){let o=t.add(e.multiply(is.fromNumber(r)));return o.compare(W1)===1&&(o=new is([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const e=aT(t),[r,o]=oT(e);for(let u=0;u<this.hashCount;u++){const h=this.Ae(r,o,u);if(!this.Re(h))return!1}return!0}static create(t,e,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),h=new pp(u,o,e);return r.forEach(m=>h.insert(m)),h}insert(t){if(this.Ee===0)return;const e=aT(t),[r,o]=oT(e);for(let u=0;u<this.hashCount;u++){const h=this.Ae(r,o,u);this.Ve(h)}}Ve(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class Au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(t,e,r,o,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const o=new Map;return o.set(t,rc.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new ic(mt.min(),o,new ee(At),An(),wt())}}class rc{constructor(t,e,r,o,u){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new rc(r,e,wt(),wt(),wt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(t,e,r,o){this.me=t,this.removedTargetIds=e,this.key=r,this.fe=o}}class xA{constructor(t,e){this.targetId=t,this.ge=e}}class NA{constructor(t,e,r=pe.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=o}}class lT{constructor(){this.pe=0,this.ye=uT(),this.we=pe.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=wt(),e=wt(),r=wt();return this.ye.forEach((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:r=r.add(o);break;default:st()}}),new rc(this.we,this.Se,t,e,r)}Me(){this.be=!1,this.ye=uT()}xe(t,e){this.be=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,ct(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class J1{constructor(t){this.ke=t,this.qe=new Map,this.Qe=An(),this.$e=Ph(),this.Ke=Ph(),this.Ue=new ee(At)}We(t){for(const e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(const e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,e=>{const r=this.He(e);switch(t.state){case 0:this.Je(e)&&r.Ce(t.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(t.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(e);break;case 3:this.Je(e)&&(r.Le(),r.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),r.Ce(t.resumeToken));break;default:st()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((r,o)=>{this.Je(o)&&e(o)})}Ze(t){const e=t.targetId,r=t.ge.count,o=this.Xe(e);if(o){const u=o.target;if(lf(u))if(r===0){const h=new nt(u.path);this.ze(e,h,ne.newNoDocument(h,mt.min()))}else ct(r===1);else{const h=this.et(e);if(h!==r){const m=this.tt(t),g=m?this.nt(m,t,h):1;if(g!==0){this.Ye(e);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(e,_)}}}}}tt(t){const e=t.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=e;let h,m;try{h=ar(r).toUint8Array()}catch(g){if(g instanceof Z0)return Ri("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new pp(h,o,u)}catch(g){return Ri(g instanceof Au?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ee===0?null:m}nt(t,e,r){return e.ge.count===r-this.st(t,e.targetId)?0:2}st(t,e){const r=this.ke.getRemoteKeysForTarget(e);let o=0;return r.forEach(u=>{const h=this.ke.it(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.ze(e,u,null),o++)}),o}ot(t){const e=new Map;this.qe.forEach((u,h)=>{const m=this.Xe(h);if(m){if(u.current&&lf(m.target)){const g=new nt(m.target.path);this._t(g).has(h)||this.ut(h,g)||this.ze(h,g,ne.newNoDocument(g,t))}u.ve&&(e.set(h,u.Fe()),u.Me())}});let r=wt();this.Ke.forEach((u,h)=>{let m=!0;h.forEachWhile(g=>{const _=this.Xe(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(u))}),this.Qe.forEach((u,h)=>h.setReadTime(t));const o=new ic(t,e,this.Ue,this.Qe,r);return this.Qe=An(),this.$e=Ph(),this.Ke=Ph(),this.Ue=new ee(At),o}Ge(t,e){if(!this.Je(t))return;const r=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,r),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ke=this.Ke.insert(e.key,this.ct(e.key).add(t))}ze(t,e,r){if(!this.Je(t))return;const o=this.He(t);this.ut(t,e)?o.xe(e,1):o.Oe(e),this.Ke=this.Ke.insert(e,this.ct(e).delete(t)),this.Ke=this.Ke.insert(e,this.ct(e).add(t)),r&&(this.Qe=this.Qe.insert(e,r))}removeTarget(t){this.qe.delete(t)}et(t){const e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new lT,this.qe.set(t,e)),e}ct(t){let e=this.Ke.get(t);return e||(e=new $t(At),this.Ke=this.Ke.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new $t(At),this.$e=this.$e.insert(t,e)),e}Je(t){const e=this.Xe(t)!==null;return e||J("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){const e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new lT),this.ke.getRemoteKeysForTarget(t).forEach(e=>{this.ze(t,e,null)})}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}}function Ph(){return new ee(nt.comparator)}function uT(){return new ee(nt.comparator)}const tD={asc:"ASCENDING",desc:"DESCENDING"},eD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nD={and:"AND",or:"OR"};class iD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Ig(s,t){return s.useProto3Json||Zu(t)?t:{value:t}}function Ko(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function OA(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function rD(s,t){return Ko(s,t.toTimestamp())}function Ee(s){return ct(!!s),mt.fromTimestamp(function(e){const r=sr(e);return new ae(r.seconds,r.nanos)}(s))}function _p(s,t){return Dg(s,t).canonicalString()}function Dg(s,t){const e=function(o){return new Nt(["projects",o.projectId,"databases",o.database])}(s).child("documents");return t===void 0?e:e.child(t)}function MA(s){const t=Nt.fromString(s);return ct(GA(t)),t}function Fu(s,t){return _p(s.databaseId,t.path)}function Si(s,t){const e=MA(t);if(e.get(1)!==s.databaseId.projectId)throw new Z(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new Z(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new nt(LA(e))}function PA(s,t){return _p(s.databaseId,t)}function kA(s){const t=MA(s);return t.length===4?Nt.emptyPath():LA(t)}function Vg(s){return new Nt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function LA(s){return ct(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function cT(s,t,e){return{name:Fu(s,t),fields:e.value.mapValue.fields}}function UA(s,t,e){const r=Si(s,t.name),o=Ee(t.updateTime),u=t.createTime?Ee(t.createTime):mt.min(),h=new Ze({mapValue:{fields:t.fields}}),m=ne.newFoundDocument(r,o,u,h);return e&&m.setHasCommittedMutations(),e?m.setHasCommittedMutations():m}function sD(s,t){return"found"in t?function(r,o){ct(!!o.found),o.found.name,o.found.updateTime;const u=Si(r,o.found.name),h=Ee(o.found.updateTime),m=o.found.createTime?Ee(o.found.createTime):mt.min(),g=new Ze({mapValue:{fields:o.found.fields}});return ne.newFoundDocument(u,h,m,g)}(s,t):"missing"in t?function(r,o){ct(!!o.missing),ct(!!o.readTime);const u=Si(r,o.missing),h=Ee(o.readTime);return ne.newNoDocument(u,h)}(s,t):st()}function aD(s,t){let e;if("targetChange"in t){t.targetChange;const r=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:st()}(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=function(_,E){return _.useProto3Json?(ct(E===void 0||typeof E=="string"),pe.fromBase64String(E||"")):(ct(E===void 0||E instanceof Buffer||E instanceof Uint8Array),pe.fromUint8Array(E||new Uint8Array))}(s,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&function(_){const E=_.code===void 0?j.UNKNOWN:VA(_.code);return new Z(E,_.message||"")}(h);e=new NA(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=Si(s,r.document.name),u=Ee(r.document.updateTime),h=r.document.createTime?Ee(r.document.createTime):mt.min(),m=new Ze({mapValue:{fields:r.document.fields}}),g=ne.newFoundDocument(o,u,h,m),_=r.targetIds||[],E=r.removedTargetIds||[];e=new Yh(_,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=Si(s,r.document),u=r.readTime?Ee(r.readTime):mt.min(),h=ne.newNoDocument(o,u),m=r.removedTargetIds||[];e=new Yh([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=Si(s,r.document),u=r.removedTargetIds||[];e=new Yh([],u,o,null)}else{if(!("filter"in t))return st();{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,h=new Z1(o,u),m=r.targetId;e=new xA(m,h)}}return e}function Gu(s,t){let e;if(t instanceof nl)e={update:cT(s,t.key,t.value)};else if(t instanceof il)e={delete:Fu(s,t.key)};else if(t instanceof cr)e={update:cT(s,t.key,t.data),updateMask:fD(t.fieldMask)};else{if(!(t instanceof fp))return st();e={verify:Fu(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(u,h){const m=h.transform;if(m instanceof Go)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof pa)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof _a)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Ho)return{fieldPath:h.field.canonicalString(),increment:m.Ie};throw st()}(0,r))),t.precondition.isNone||(e.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:rD(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:st()}(s,t.precondition)),e}function Cg(s,t){const e=t.currentDocument?function(u){return u.updateTime!==void 0?se.updateTime(Ee(u.updateTime)):u.exists!==void 0?se.exists(u.exists):se.none()}(t.currentDocument):se.none(),r=t.updateTransforms?t.updateTransforms.map(o=>function(h,m){let g=null;if("setToServerValue"in m)ct(m.setToServerValue==="REQUEST_TIME"),g=new Go;else if("appendMissingElements"in m){const E=m.appendMissingElements.values||[];g=new pa(E)}else if("removeAllFromArray"in m){const E=m.removeAllFromArray.values||[];g=new _a(E)}else"increment"in m?g=new Ho(h,m.increment):st();const _=re.fromServerFormat(m.fieldPath);return new nc(_,g)}(s,o)):[];if(t.update){t.update.name;const o=Si(s,t.update.name),u=new Ze({mapValue:{fields:t.update.fields}});if(t.updateMask){const h=function(g){const _=g.fieldPaths||[];return new Tn(_.map(E=>re.fromServerFormat(E)))}(t.updateMask);return new cr(o,u,h,e,r)}return new nl(o,u,e,r)}if(t.delete){const o=Si(s,t.delete);return new il(o,e)}if(t.verify){const o=Si(s,t.verify);return new fp(o,e)}return st()}function oD(s,t){return s&&s.length>0?(ct(t!==void 0),s.map(e=>function(o,u){let h=o.updateTime?Ee(o.updateTime):Ee(u);return h.isEqual(mt.min())&&(h=Ee(u)),new Y1(h,o.transformResults||[])}(e,t))):[]}function BA(s,t){return{documents:[PA(s,t.path)]}}function zA(s,t){const e={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=PA(s,o);const u=function(_){if(_.length!==0)return FA(Yt.create(_,"and"))}(t.filters);u&&(e.structuredQuery.where=u);const h=function(_){if(_.length!==0)return _.map(E=>function(R){return{field:Io(R.field),direction:uD(R.dir)}}(E))}(t.orderBy);h&&(e.structuredQuery.orderBy=h);const m=Ig(s,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(t.endAt)),{ht:e,parent:o}}function qA(s){let t=kA(s.parent);const e=s.structuredQuery,r=e.from?e.from.length:0;let o=null;if(r>0){ct(r===1);const E=e.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];e.where&&(u=function(A){const R=jA(A);return R instanceof Yt&&lp(R)?R.getFilters():[R]}(e.where));let h=[];e.orderBy&&(h=function(A){return A.map(R=>function(Y){return new ju(Do(Y.field),function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Y.direction))}(R))}(e.orderBy));let m=null;e.limit&&(m=function(A){let R;return R=typeof A=="object"?A.value:A,Zu(R)?null:R}(e.limit));let g=null;e.startAt&&(g=function(A){const R=!!A.before,P=A.values||[];return new fs(P,R)}(e.startAt));let _=null;return e.endAt&&(_=function(A){const R=!A.before,P=A.values||[];return new fs(P,R)}(e.endAt)),dA(t,o,h,u,m,"F",g,_)}function lD(s,t){const e=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function jA(s){return s.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Do(e.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Do(e.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Do(e.unaryFilter.field);return Ot.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Do(e.unaryFilter.field);return Ot.create(h,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(s):s.fieldFilter!==void 0?function(e){return Ot.create(Do(e.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(e.fieldFilter.op),e.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(e){return Yt.create(e.compositeFilter.filters.map(r=>jA(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return st()}}(e.compositeFilter.op))}(s):st()}function uD(s){return tD[s]}function cD(s){return eD[s]}function hD(s){return nD[s]}function Io(s){return{fieldPath:s.canonicalString()}}function Do(s){return re.fromServerFormat(s.fieldPath)}function FA(s){return s instanceof Ot?function(e){if(e.op==="=="){if(YE(e.value))return{unaryFilter:{field:Io(e.field),op:"IS_NAN"}};if(QE(e.value))return{unaryFilter:{field:Io(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(YE(e.value))return{unaryFilter:{field:Io(e.field),op:"IS_NOT_NAN"}};if(QE(e.value))return{unaryFilter:{field:Io(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(e.field),op:cD(e.op),value:e.value}}}(s):s instanceof Yt?function(e){const r=e.getFilters().map(o=>FA(o));return r.length===1?r[0]:{compositeFilter:{op:hD(e.op),filters:r}}}(s):st()}function fD(s){const t=[];return s.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function GA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(t,e,r,o,u=mt.min(),h=mt.min(),m=pe.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new nr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(t){this.Tt=t}}function dD(s,t){let e;if(t.document)e=UA(s.Tt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=nt.fromSegments(t.noDocument.path),o=va(t.noDocument.readTime);e=ne.newNoDocument(r,o),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return st();{const r=nt.fromSegments(t.unknownDocument.path),o=va(t.unknownDocument.version);e=ne.newUnknownDocument(r,o)}}return t.readTime&&e.setReadTime(function(o){const u=new ae(o[0],o[1]);return mt.fromTimestamp(u)}(t.readTime)),e}function hT(s,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:hf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(u,h){return{name:Fu(u,h.key),fields:h.data.value.mapValue.fields,updateTime:Ko(u,h.version.toTimestamp()),createTime:Ko(u,h.createTime.toTimestamp())}}(s.Tt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:ya(t.version)};else{if(!t.isUnknownDocument())return st();r.unknownDocument={path:e.path.toArray(),version:ya(t.version)}}return r}function hf(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function ya(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function va(s){const t=new ae(s.seconds,s.nanoseconds);return mt.fromTimestamp(t)}function sa(s,t){const e=(t.baseMutations||[]).map(u=>Cg(s.Tt,u));for(let u=0;u<t.mutations.length-1;++u){const h=t.mutations[u];if(u+1<t.mutations.length&&t.mutations[u+1].transform!==void 0){const m=t.mutations[u+1];h.updateTransforms=m.transform.fieldTransforms,t.mutations.splice(u+1,1),++u}}const r=t.mutations.map(u=>Cg(s.Tt,u)),o=ae.fromMillis(t.localWriteTimeMs);return new dp(t.batchId,o,e,r)}function bu(s){const t=va(s.readTime),e=s.lastLimboFreeSnapshotVersion!==void 0?va(s.lastLimboFreeSnapshotVersion):mt.min();let r;return r=function(u){return u.documents!==void 0}(s.query)?function(u){return ct(u.documents.length===1),gn(el(kA(u.documents[0])))}(s.query):function(u){return gn(qA(u))}(s.query),new nr(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,e,pe.fromBase64String(s.resumeToken))}function KA(s,t){const e=ya(t.snapshotVersion),r=ya(t.lastLimboFreeSnapshotVersion);let o;o=lf(t.target)?BA(s.Tt,t.target):zA(s.Tt,t.target).ht;const u=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ga(t.target),readTime:e,resumeToken:u,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function yp(s){const t=qA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?cf(t,t.limit,"L"):t}function rg(s,t){return new gp(t.largestBatchId,Cg(s.Tt,t.overlayMutation))}function fT(s,t){const e=t.path.lastSegment();return[s,sn(t.path.popLast()),e]}function dT(s,t,e,r){return{indexId:s,uid:t,sequenceNumber:e,readTime:ya(r.readTime),documentKey:sn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{getBundleMetadata(t,e){return mT(t).get(e).next(r=>{if(r)return function(u){return{id:u.bundleId,createTime:va(u.createTime),version:u.version}}(r)})}saveBundleMetadata(t,e){return mT(t).put(function(o){return{bundleId:o.id,createTime:ya(Ee(o.createTime)),version:o.version}}(e))}getNamedQuery(t,e){return gT(t).get(e).next(r=>{if(r)return function(u){return{name:u.name,query:yp(u.bundledQuery),readTime:va(u.readTime)}}(r)})}saveNamedQuery(t,e){return gT(t).put(function(o){return{name:o.name,readTime:ya(Ee(o.readTime)),bundledQuery:o.bundledQuery}}(e))}}function mT(s){return ke(s,bf)}function gT(s){return ke(s,wf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(t,e){this.serializer=t,this.userId=e}static It(t,e){const r=e.uid||"";return new xf(t,r)}getOverlay(t,e){return gu(t).get(fT(this.userId,e)).next(r=>r?rg(this.serializer,r):null)}getOverlays(t,e){const r=bi();return U.forEach(e,o=>this.getOverlay(t,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(t,e,r){const o=[];return r.forEach((u,h)=>{const m=new gp(e,h);o.push(this.Et(t,m))}),U.waitFor(o)}removeOverlaysForBatchId(t,e,r){const o=new Set;e.forEach(h=>o.add(sn(h.getCollectionPath())));const u=[];return o.forEach(h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(gu(t).J(vg,m))}),U.waitFor(u)}getOverlaysForCollection(t,e,r){const o=bi(),u=sn(e),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return gu(t).G(vg,h).next(m=>{for(const g of m){const _=rg(this.serializer,g);o.set(_.getKey(),_)}return o})}getOverlaysForCollectionGroup(t,e,r,o){const u=bi();let h;const m=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return gu(t).Z({index:K0,range:m},(g,_,E)=>{const A=rg(this.serializer,_);u.size()<o||A.largestBatchId===h?(u.set(A.getKey(),A),h=A.largestBatchId):E.done()}).next(()=>u)}Et(t,e){return gu(t).put(function(o,u,h){const[m,g,_]=fT(u,h.mutation.key);return{userId:u,collectionPath:g,documentId:_,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:Gu(o.Tt,h.mutation)}}(this.serializer,this.userId,e))}}function gu(s){return ke(s,Sf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{dt(t){return ke(t,rp)}getSessionToken(t){return this.dt(t).get("sessionToken").next(e=>{const r=e==null?void 0:e.value;return r?pe.fromUint8Array(r):pe.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.dt(t).put({name:"sessionToken",value:e.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){}At(t,e){this.Rt(t,e),e.Vt()}Rt(t,e){if("nullValue"in t)this.ft(e,5);else if("booleanValue"in t)this.ft(e,10),e.gt(t.booleanValue?1:0);else if("integerValue"in t)this.ft(e,15),e.gt(ie(t.integerValue));else if("doubleValue"in t){const r=ie(t.doubleValue);isNaN(r)?this.ft(e,13):(this.ft(e,15),Pu(r)?e.gt(0):e.gt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.ft(e,20),typeof r=="string"&&(r=sr(r)),e.yt(`${r.seconds||""}`),e.gt(r.nanos||0)}else if("stringValue"in t)this.wt(t.stringValue,e),this.St(e);else if("bytesValue"in t)this.ft(e,30),e.bt(ar(t.bytesValue)),this.St(e);else if("referenceValue"in t)this.Dt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.ft(e,45),e.gt(r.latitude||0),e.gt(r.longitude||0)}else"mapValue"in t?iA(t)?this.ft(e,Number.MAX_SAFE_INTEGER):Df(t)?this.vt(t.mapValue,e):(this.Ct(t.mapValue,e),this.St(e)):"arrayValue"in t?(this.Ft(t.arrayValue,e),this.St(e)):st()}wt(t,e){this.ft(e,25),this.Mt(t,e)}Mt(t,e){e.yt(t)}Ct(t,e){const r=t.fields||{};this.ft(e,55);for(const o of Object.keys(r))this.wt(o,e),this.Rt(r[o],e)}vt(t,e){var r,o;const u=t.fields||{};this.ft(e,53);const h=qo,m=((o=(r=u[h].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.length)||0;this.ft(e,15),e.gt(ie(m)),this.wt(h,e),this.Rt(u[h],e)}Ft(t,e){const r=t.values||[];this.ft(e,50);for(const o of r)this.Rt(o,e)}Dt(t,e){this.ft(e,37),nt.fromName(t).path.forEach(r=>{this.ft(e,60),this.Mt(r,e)})}ft(t,e){t.gt(e)}St(t){t.gt(2)}}aa.xt=new aa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=255;function pD(s){if(s===0)return 8;let t=0;return s>>4||(t+=4,s<<=4),s>>6||(t+=2,s<<=2),s>>7||(t+=1),t}function pT(s){const t=64-function(r){let o=0;for(let u=0;u<8;++u){const h=pD(255&r[u]);if(o+=h,h!==8)break}return o}(s);return Math.ceil(t/8)}class _D{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Nt(r.value),r=e.next();this.Bt()}Lt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.kt(r.value),r=e.next();this.qt()}Qt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const o=e.codePointAt(0);this.Nt(240|o>>>18),this.Nt(128|63&o>>>12),this.Nt(128|63&o>>>6),this.Nt(128|63&o)}}this.Bt()}$t(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const o=e.codePointAt(0);this.kt(240|o>>>18),this.kt(128|63&o>>>12),this.kt(128|63&o>>>6),this.kt(128|63&o)}}this.qt()}Kt(t){const e=this.Ut(t),r=pT(e);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=255&e[o]}Gt(t){const e=this.Ut(t),r=pT(e);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=~(255&e[o])}zt(){this.jt(To),this.jt(255)}Ht(){this.Jt(To),this.Jt(255)}reset(){this.position=0}seed(t){this.Wt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Yt(){return this.buffer.slice(0,this.position)}Ut(t){const e=function(u){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,u,!1),new Uint8Array(h.buffer)}(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let o=1;o<e.length;++o)e[o]^=r?255:0;return e}Nt(t){const e=255&t;e===0?(this.jt(0),this.jt(255)):e===To?(this.jt(To),this.jt(0)):this.jt(e)}kt(t){const e=255&t;e===0?(this.Jt(0),this.Jt(255)):e===To?(this.Jt(To),this.Jt(0)):this.Jt(t)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(t){this.Wt(1),this.buffer[this.position++]=t}Jt(t){this.Wt(1),this.buffer[this.position++]=~t}Wt(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class yD{constructor(t){this.Zt=t}bt(t){this.Zt.Ot(t)}yt(t){this.Zt.Qt(t)}gt(t){this.Zt.Kt(t)}Vt(){this.Zt.zt()}}class vD{constructor(t){this.Zt=t}bt(t){this.Zt.Lt(t)}yt(t){this.Zt.$t(t)}gt(t){this.Zt.Gt(t)}Vt(){this.Zt.Ht()}}class pu{constructor(){this.Zt=new _D,this.Xt=new yD(this.Zt),this.en=new vD(this.Zt)}seed(t){this.Zt.seed(t)}tn(t){return t===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(t,e,r,o){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=o}nn(){const t=this.directionalValue.length,e=t===0||this.directionalValue[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new oa(this.indexId,this.documentKey,this.arrayValue,r)}}function $r(s,t){let e=s.indexId-t.indexId;return e!==0?e:(e=_T(s.arrayValue,t.arrayValue),e!==0?e:(e=_T(s.directionalValue,t.directionalValue),e!==0?e:nt.comparator(s.documentKey,t.documentKey)))}function _T(s,t){for(let e=0;e<s.length&&e<t.length;++e){const r=s[e]-t[e];if(r!==0)return r}return s.length-t.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t){this.rn=new $t((e,r)=>re.comparator(e.field,r.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.sn=t.orderBy,this._n=[];for(const e of t.filters){const r=e;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(t){if(ct(t.collectionGroup===this.collectionId),this.an)return!1;const e=pg(t);if(e!==void 0&&!this.cn(e))return!1;const r=na(t);let o=new Set,u=0,h=0;for(;u<r.length&&this.cn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.rn.size>0){const m=this.rn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.ln(m,g)||!this.hn(this.sn[h++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(h>=this.sn.length||!this.hn(this.sn[h++],m))return!1}return!0}Pn(){if(this.an)return null;let t=new $t(re.comparator);const e=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new qh(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new qh(r.field,0))}for(const r of this.sn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new qh(r.field,r.dir==="asc"?0:1)));return new tf(tf.UNKNOWN_ID,this.collectionId,e,Mu.empty())}cn(t){for(const e of this._n)if(this.ln(e,t))return!0;return!1}ln(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}hn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(s){var t,e;if(ct(s instanceof Ot||s instanceof Yt),s instanceof Ot){if(s instanceof fA){const o=((e=(t=s.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(u=>Ot.create(s.field,"==",u)))||[];return Yt.create(o,"or")}return s}const r=s.filters.map(o=>QA(o));return Yt.create(r,s.op)}function ED(s){if(s.getFilters().length===0)return[];const t=Og(QA(s));return ct(YA(t)),xg(t)||Ng(t)?[t]:t.getFilters()}function xg(s){return s instanceof Ot}function Ng(s){return s instanceof Yt&&lp(s)}function YA(s){return xg(s)||Ng(s)||function(e){if(e instanceof Yt&&bg(e)){for(const r of e.getFilters())if(!xg(r)&&!Ng(r))return!1;return!0}return!1}(s)}function Og(s){if(ct(s instanceof Ot||s instanceof Yt),s instanceof Ot)return s;if(s.filters.length===1)return Og(s.filters[0]);const t=s.filters.map(r=>Og(r));let e=Yt.create(t,s.op);return e=ff(e),YA(e)?e:(ct(e instanceof Yt),ct(Fo(e)),ct(e.filters.length>1),e.filters.reduce((r,o)=>vp(r,o)))}function vp(s,t){let e;return ct(s instanceof Ot||s instanceof Yt),ct(t instanceof Ot||t instanceof Yt),e=s instanceof Ot?t instanceof Ot?function(o,u){return Yt.create([o,u],"and")}(s,t):vT(s,t):t instanceof Ot?vT(t,s):function(o,u){if(ct(o.filters.length>0&&u.filters.length>0),Fo(o)&&Fo(u))return uA(o,u.getFilters());const h=bg(o)?o:u,m=bg(o)?u:o,g=h.filters.map(_=>vp(_,m));return Yt.create(g,"or")}(s,t),ff(e)}function vT(s,t){if(Fo(t))return uA(t,s.getFilters());{const e=t.filters.map(r=>vp(s,r));return Yt.create(e,"or")}}function ff(s){if(ct(s instanceof Ot||s instanceof Yt),s instanceof Ot)return s;const t=s.getFilters();if(t.length===1)return ff(t[0]);if(oA(s))return s;const e=t.map(o=>ff(o)),r=[];return e.forEach(o=>{o instanceof Ot?r.push(o):o instanceof Yt&&(o.op===s.op?r.push(...o.filters):r.push(o))}),r.length===1?r[0]:Yt.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(){this.Tn=new Ep}addToCollectionParentIndex(t,e){return this.Tn.add(e),U.resolve()}getCollectionParents(t,e){return U.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return U.resolve()}deleteFieldIndex(t,e){return U.resolve()}deleteAllFieldIndexes(t){return U.resolve()}createTargetIndexes(t,e){return U.resolve()}getDocumentsMatchingTarget(t,e){return U.resolve(null)}getIndexType(t,e){return U.resolve(0)}getFieldIndexes(t,e){return U.resolve([])}getNextCollectionGroupToUpdate(t){return U.resolve(null)}getMinOffset(t,e){return U.resolve(xn.min())}getMinOffsetFromCollectionGroup(t,e){return U.resolve(xn.min())}updateCollectionGroup(t,e,r){return U.resolve()}updateIndexEntries(t,e){return U.resolve()}}class Ep{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e]||new $t(Nt.comparator),u=!o.has(r);return this.index[e]=o.add(r),u}has(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e];return o&&o.has(r)}getEntries(t){return(this.index[t]||new $t(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="IndexedDbIndexManager",kh=new Uint8Array(0);class AD{constructor(t,e){this.databaseId=e,this.In=new Ep,this.En=new ur(r=>ga(r),(r,o)=>Ju(r,o)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.In.has(e)){const r=e.lastSegment(),o=e.popLast();t.addOnCommittedListener(()=>{this.In.add(e)});const u={collectionId:r,parent:sn(o)};return TT(t).put(u)}return U.resolve()}getCollectionParents(t,e){const r=[],o=IDBKeyRange.bound([e,""],[M0(e),""],!1,!0);return TT(t).G(o).next(u=>{for(const h of u){if(h.collectionId!==e)break;r.push(Ai(h.parent))}return r})}addFieldIndex(t,e){const r=_u(t),o=function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])}}(e);delete o.indexId;const u=r.add(o);if(e.indexState){const h=bo(t);return u.next(m=>{h.put(dT(m,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return u.next()}deleteFieldIndex(t,e){const r=_u(t),o=bo(t),u=Ao(t);return r.delete(e.indexId).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const e=_u(t),r=Ao(t),o=bo(t);return e.J().next(()=>r.J()).next(()=>o.J())}createTargetIndexes(t,e){return U.forEach(this.dn(e),r=>this.getIndexType(t,r).next(o=>{if(o===0||o===1){const u=new yT(r).Pn();if(u!=null)return this.addFieldIndex(t,u)}}))}getDocumentsMatchingTarget(t,e){const r=Ao(t);let o=!0;const u=new Map;return U.forEach(this.dn(e),h=>this.An(t,h).next(m=>{o&&(o=!!m),u.set(h,m)})).next(()=>{if(o){let h=wt();const m=[];return U.forEach(u,(g,_)=>{J(ET,`Using index ${function(ut){return`id=${ut.indexId}|cg=${ut.collectionGroup}|f=${ut.fields.map(It=>`${It.fieldPath}:${It.kind}`).join(",")}`}(g)} to execute ${ga(e)}`);const E=function(ut,It){const gt=pg(It);if(gt===void 0)return null;for(const Et of uf(ut,gt.fieldPath))switch(Et.op){case"array-contains-any":return Et.value.arrayValue.values||[];case"array-contains":return[Et.value]}return null}(_,g),A=function(ut,It){const gt=new Map;for(const Et of na(It))for(const N of uf(ut,Et.fieldPath))switch(N.op){case"==":case"in":gt.set(Et.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return gt.set(Et.fieldPath.canonicalString(),N.value),Array.from(gt.values())}return null}(_,g),R=function(ut,It){const gt=[];let Et=!0;for(const N of na(It)){const I=N.kind===0?JE(ut,N.fieldPath,ut.startAt):tT(ut,N.fieldPath,ut.startAt);gt.push(I.value),Et&&(Et=I.inclusive)}return new fs(gt,Et)}(_,g),P=function(ut,It){const gt=[];let Et=!0;for(const N of na(It)){const I=N.kind===0?tT(ut,N.fieldPath,ut.endAt):JE(ut,N.fieldPath,ut.endAt);gt.push(I.value),Et&&(Et=I.inclusive)}return new fs(gt,Et)}(_,g),Y=this.Rn(g,_,R),K=this.Rn(g,_,P),X=this.Vn(g,_,A),ht=this.mn(g.indexId,E,Y,R.inclusive,K,P.inclusive,X);return U.forEach(ht,ft=>r.H(ft,e.limit).next(ut=>{ut.forEach(It=>{const gt=nt.fromSegments(It.documentKey);h.has(gt)||(h=h.add(gt),m.push(gt))})}))}).next(()=>m)}return U.resolve(null)})}dn(t){let e=this.En.get(t);return e||(t.filters.length===0?e=[t]:e=ED(Yt.create(t.filters,"and")).map(r=>Sg(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt)),this.En.set(t,e),e)}mn(t,e,r,o,u,h,m){const g=(e!=null?e.length:1)*Math.max(r.length,u.length),_=g/(e!=null?e.length:1),E=[];for(let A=0;A<g;++A){const R=e?this.fn(e[A/_]):kh,P=this.gn(t,R,r[A%_],o),Y=this.pn(t,R,u[A%_],h),K=m.map(X=>this.gn(t,R,X,!0));E.push(...this.createRange(P,Y,K))}return E}gn(t,e,r,o){const u=new oa(t,nt.empty(),e,r);return o?u:u.nn()}pn(t,e,r,o){const u=new oa(t,nt.empty(),e,r);return o?u.nn():u}An(t,e){const r=new yT(e),o=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,o).next(u=>{let h=null;for(const m of u)r.un(m)&&(!h||m.fields.length>h.fields.length)&&(h=m);return h})}getIndexType(t,e){let r=2;const o=this.dn(e);return U.forEach(o,u=>this.An(t,u).next(h=>{h?r!==0&&h.fields.length<function(g){let _=new $t(re.comparator),E=!1;for(const A of g.filters)for(const R of A.getFlattenedFilters())R.field.isKeyField()||(R.op==="array-contains"||R.op==="array-contains-any"?E=!0:_=_.add(R.field));for(const A of g.orderBy)A.field.isKeyField()||(_=_.add(A.field));return _.size+(E?1:0)}(u)&&(r=1):r=0})).next(()=>function(h){return h.limit!==null}(e)&&o.length>1&&r===2?1:r)}yn(t,e){const r=new pu;for(const o of na(t)){const u=e.data.field(o.fieldPath);if(u==null)return null;const h=r.tn(o.kind);aa.xt.At(u,h)}return r.Yt()}fn(t){const e=new pu;return aa.xt.At(t,e.tn(0)),e.Yt()}wn(t,e){const r=new pu;return aa.xt.At(ma(this.databaseId,e),r.tn(function(u){const h=na(u);return h.length===0?0:h[h.length-1].kind}(t))),r.Yt()}Vn(t,e,r){if(r===null)return[];let o=[];o.push(new pu);let u=0;for(const h of na(t)){const m=r[u++];for(const g of o)if(this.Sn(e,h.fieldPath)&&qu(m))o=this.bn(o,h,m);else{const _=g.tn(h.kind);aa.xt.At(m,_)}}return this.Dn(o)}Rn(t,e,r){return this.Vn(t,e,r.position)}Dn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].Yt();return e}bn(t,e,r){const o=[...t],u=[];for(const h of r.arrayValue.values||[])for(const m of o){const g=new pu;g.seed(m.Yt()),aa.xt.At(h,g.tn(e.kind)),u.push(g)}return u}Sn(t,e){return!!t.filters.find(r=>r instanceof Ot&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(t,e){const r=_u(t),o=bo(t);return(e?r.G(yg,IDBKeyRange.bound(e,e)):r.G()).next(u=>{const h=[];return U.forEach(u,m=>o.get([m.indexId,this.uid]).next(g=>{h.push(function(E,A){const R=A?new Mu(A.sequenceNumber,new xn(va(A.readTime),new nt(Ai(A.documentKey)),A.largestBatchId)):Mu.empty(),P=E.fields.map(([Y,K])=>new qh(re.fromServerFormat(Y),K));return new tf(E.indexId,E.collectionGroup,P,R)}(m,g))})).next(()=>h)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:At(r.collectionGroup,o.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const o=_u(t),u=bo(t);return this.vn(t).next(h=>o.G(yg,IDBKeyRange.bound(e,e)).next(m=>U.forEach(m,g=>u.put(dT(g.indexId,this.uid,h,r)))))}updateIndexEntries(t,e){const r=new Map;return U.forEach(e,(o,u)=>{const h=r.get(o.collectionGroup);return(h?U.resolve(h):this.getFieldIndexes(t,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),U.forEach(m,g=>this.Cn(t,o,g).next(_=>{const E=this.Fn(u,g);return _.isEqual(E)?U.resolve():this.Mn(t,u,g,_,E)}))))})}xn(t,e,r,o){return Ao(t).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.wn(r,e.key),documentKey:e.key.path.toArray()})}On(t,e,r,o){return Ao(t).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.wn(r,e.key),e.key.path.toArray()])}Cn(t,e,r){const o=Ao(t);let u=new $t($r);return o.Z({index:H0,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,e)])},(h,m)=>{u=u.add(new oa(r.indexId,e,m.arrayValue,m.directionalValue))}).next(()=>u)}Fn(t,e){let r=new $t($r);const o=this.yn(e,t);if(o==null)return r;const u=pg(e);if(u!=null){const h=t.data.field(u.fieldPath);if(qu(h))for(const m of h.arrayValue.values||[])r=r.add(new oa(e.indexId,t.key,this.fn(m),o))}else r=r.add(new oa(e.indexId,t.key,kh,o));return r}Mn(t,e,r,o,u){J(ET,"Updating index entries for document '%s'",e.key);const h=[];return function(g,_,E,A,R){const P=g.getIterator(),Y=_.getIterator();let K=Eo(P),X=Eo(Y);for(;K||X;){let ht=!1,ft=!1;if(K&&X){const ut=E(K,X);ut<0?ft=!0:ut>0&&(ht=!0)}else K!=null?ft=!0:ht=!0;ht?(A(X),X=Eo(Y)):ft?(R(K),K=Eo(P)):(K=Eo(P),X=Eo(Y))}}(o,u,$r,m=>{h.push(this.xn(t,e,r,m))},m=>{h.push(this.On(t,e,r,m))}),U.waitFor(h)}vn(t){let e=1;return bo(t).Z({index:G0,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),e=o.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((h,m)=>$r(h,m)).filter((h,m,g)=>!m||$r(h,g[m-1])!==0);const o=[];o.push(t);for(const h of r){const m=$r(h,t),g=$r(h,e);if(m===0)o[0]=t.nn();else if(m>0&&g<0)o.push(h),o.push(h.nn());else if(g>0)break}o.push(e);const u=[];for(let h=0;h<o.length;h+=2){if(this.Nn(o[h],o[h+1]))return[];const m=[o[h].indexId,this.uid,o[h].arrayValue,o[h].directionalValue,kh,[]],g=[o[h+1].indexId,this.uid,o[h+1].arrayValue,o[h+1].directionalValue,kh,[]];u.push(IDBKeyRange.bound(m,g))}return u}Nn(t,e){return $r(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(AT)}getMinOffset(t,e){return U.mapArray(this.dn(e),r=>this.An(t,r).next(o=>o||st())).next(AT)}}function TT(s){return ke(s,Uu)}function Ao(s){return ke(s,af)}function _u(s){return ke(s,ip)}function bo(s){return ke(s,sf)}function AT(s){ct(s.length!==0);let t=s[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;tp(o,t)<0&&(t=o),e<o.largestBatchId&&(e=o.largestBatchId)}return new xn(t.readTime,t.documentKey,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$A=41943040;class rn{static withCacheSize(t){return new rn(t,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(s,t,e){const r=s.store(ii),o=s.store(Lo),u=[],h=IDBKeyRange.only(e.batchId);let m=0;const g=r.Z({range:h},(E,A,R)=>(m++,R.delete()));u.push(g.next(()=>{ct(m===1)}));const _=[];for(const E of e.mutations){const A=q0(t,E.key.path,e.batchId);u.push(o.delete(A)),_.push(E.key)}return U.waitFor(u).next(()=>_)}function df(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw st();t=s.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn($A,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class Nf{constructor(t,e,r,o){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=o,this.Bn={}}static It(t,e,r,o){ct(t.uid!=="");const u=t.isAuthenticated()?t.uid:"";return new Nf(u,e,r,o)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xr(t).Z({index:ua,range:r},(o,u,h)=>{e=!1,h.done()}).next(()=>e)}addMutationBatch(t,e,r,o){const u=Vo(t),h=Xr(t);return h.add({}).next(m=>{ct(typeof m=="number");const g=new dp(m,e,r,o),_=function(P,Y,K){const X=K.baseMutations.map(ft=>Gu(P.Tt,ft)),ht=K.mutations.map(ft=>Gu(P.Tt,ft));return{userId:Y,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:X,mutations:ht}}(this.serializer,this.userId,g),E=[];let A=new $t((R,P)=>At(R.canonicalString(),P.canonicalString()));for(const R of o){const P=q0(this.userId,R.key.path,m);A=A.add(R.key.path.popLast()),E.push(h.put(_)),E.push(u.put(P,n1))}return A.forEach(R=>{E.push(this.indexManager.addToCollectionParentIndex(t,R))}),t.addOnCommittedListener(()=>{this.Bn[m]=g.keys()}),U.waitFor(E).next(()=>g)})}lookupMutationBatch(t,e){return Xr(t).get(e).next(r=>r?(ct(r.userId===this.userId),sa(this.serializer,r)):null)}Ln(t,e){return this.Bn[e]?U.resolve(this.Bn[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const o=r.keys();return this.Bn[e]=o,o}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Xr(t).Z({index:ua,range:o},(h,m,g)=>{m.userId===this.userId&&(ct(m.batchId>=r),u=sa(this.serializer,m)),g.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=rs;return Xr(t).Z({index:ua,range:e,reverse:!0},(o,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,rs],[this.userId,Number.POSITIVE_INFINITY]);return Xr(t).G(ua,e).next(r=>r.map(o=>sa(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=jh(this.userId,e.path),o=IDBKeyRange.lowerBound(r),u=[];return Vo(t).Z({range:o},(h,m,g)=>{const[_,E,A]=h,R=Ai(E);if(_===this.userId&&e.path.isEqual(R))return Xr(t).get(A).next(P=>{if(!P)throw st();ct(P.userId===this.userId),u.push(sa(this.serializer,P))});g.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new $t(At);const o=[];return e.forEach(u=>{const h=jh(this.userId,u.path),m=IDBKeyRange.lowerBound(h),g=Vo(t).Z({range:m},(_,E,A)=>{const[R,P,Y]=_,K=Ai(P);R===this.userId&&u.path.isEqual(K)?r=r.add(Y):A.done()});o.push(g)}),U.waitFor(o).next(()=>this.kn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1,u=jh(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new $t(At);return Vo(t).Z({range:h},(g,_,E)=>{const[A,R,P]=g,Y=Ai(R);A===this.userId&&r.isPrefixOf(Y)?Y.length===o&&(m=m.add(P)):E.done()}).next(()=>this.kn(t,m))}kn(t,e){const r=[],o=[];return e.forEach(u=>{o.push(Xr(t).get(u).next(h=>{if(h===null)throw st();ct(h.userId===this.userId),r.push(sa(this.serializer,h))}))}),U.waitFor(o).next(()=>r)}removeMutationBatch(t,e){return XA(t.ue,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this.qn(e.batchId)}),U.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(t,o))))}qn(t){delete this.Bn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return U.resolve();const r=IDBKeyRange.lowerBound(function(h){return[h]}(this.userId)),o=[];return Vo(t).Z({range:r},(u,h,m)=>{if(u[0]===this.userId){const g=Ai(u[1]);o.push(g)}else m.done()}).next(()=>{ct(o.length===0)})})}containsKey(t,e){return ZA(t,this.userId,e)}Qn(t){return WA(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:rs,lastStreamToken:""})}}function ZA(s,t,e){const r=jh(t,e.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return Vo(s).Z({range:u,Y:!0},(m,g,_)=>{const[E,A,R]=m;E===t&&A===o&&(h=!0),_.done()}).next(()=>h)}function Xr(s){return ke(s,ii)}function Vo(s){return ke(s,Lo)}function WA(s){return ke(s,ku)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new Ea(0)}static Un(){return new Ea(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.Wn(t).next(e=>{const r=new Ea(e.highestTargetId);return e.highestTargetId=r.next(),this.Gn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Wn(t).next(e=>mt.fromTimestamp(new ae(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Wn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.Wn(t).next(o=>(o.highestListenSequenceNumber=e,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),e>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=e),this.Gn(t,o)))}addTargetData(t,e){return this.zn(t,e).next(()=>this.Wn(t).next(r=>(r.targetCount+=1,this.jn(e,r),this.Gn(t,r))))}updateTargetData(t,e){return this.zn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>wo(t).delete(e.targetId)).next(()=>this.Wn(t)).next(r=>(ct(r.targetCount>0),r.targetCount-=1,this.Gn(t,r)))}removeTargets(t,e,r){let o=0;const u=[];return wo(t).Z((h,m)=>{const g=bu(m);g.sequenceNumber<=e&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(t,g)))}).next(()=>U.waitFor(u)).next(()=>o)}forEachTarget(t,e){return wo(t).Z((r,o)=>{const u=bu(o);e(u)})}Wn(t){return wT(t).get(rf).next(e=>(ct(e!==null),e))}Gn(t,e){return wT(t).put(rf,e)}zn(t,e){return wo(t).put(KA(this.serializer,e))}jn(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.Wn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=ga(e),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return wo(t).Z({range:o,index:F0},(h,m,g)=>{const _=bu(m);Ju(e,_.target)&&(u=_,g.done())}).next(()=>u)}addMatchingKeys(t,e,r){const o=[],u=Jr(t);return e.forEach(h=>{const m=sn(h.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(t,r,h))}),U.waitFor(o)}removeMatchingKeys(t,e,r){const o=Jr(t);return U.forEach(e,u=>{const h=sn(u.path);return U.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(t,r,u)])})}removeMatchingKeysForTargetId(t,e){const r=Jr(t),o=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),o=Jr(t);let u=wt();return o.Z({range:r,Y:!0},(h,m,g)=>{const _=Ai(h[1]),E=new nt(_);u=u.add(E)}).next(()=>u)}containsKey(t,e){const r=sn(e.path),o=IDBKeyRange.bound([r],[M0(r)],!1,!0);let u=0;return Jr(t).Z({index:np,Y:!0,range:o},([h,m],g,_)=>{h!==0&&(u++,_.done())}).next(()=>u>0)}lt(t,e){return wo(t).get(e).next(r=>r?bu(r):null)}}function wo(s){return ke(s,Uo)}function wT(s){return ke(s,fa)}function Jr(s){return ke(s,Bo)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="LruGarbageCollector",wD=1048576;function RT([s,t],[e,r]){const o=At(s,e);return o===0?At(t,r):o}class SD{constructor(t){this.Hn=t,this.buffer=new $t(RT),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();RT(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class JA{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){J(ST,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ys(e)?J(ST,"Ignoring IndexedDB error during garbage collection: ",e):await _s(e)}await this.er(3e5)})}}class RD{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(e===0)return U.resolve(En.ae);const r=new SD(e);return this.tr.forEachTarget(t,o=>r.Zn(o.sequenceNumber)).next(()=>this.tr.rr(t,o=>r.Zn(o))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.tr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(bT)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bT):this.ir(t,e))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let r,o,u,h,m,g,_;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,h=Date.now(),this.nthSequenceNumber(t,o))).next(A=>(r=A,m=Date.now(),this.removeTargets(t,r,e))).next(A=>(u=A,g=Date.now(),this.removeOrphanedDocuments(t,r))).next(A=>(_=Date.now(),So()<=Pt.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${A} documents in `+(_-g)+`ms
Total Duration: ${_-E}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A})))}}function tb(s,t){return new RD(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(t,e){this.db=t,this.garbageCollector=tb(this,e)}nr(t){const e=this.sr(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(o=>r+o))}sr(t){let e=0;return this.rr(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}rr(t,e){return this._r(t,(r,o)=>e(o))}addReference(t,e,r){return Lh(t,r)}removeReference(t,e,r){return Lh(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return Lh(t,e)}ar(t,e){return function(o,u){let h=!1;return WA(o).X(m=>ZA(o,m,u).next(g=>(g&&(h=!0),U.resolve(!g)))).next(()=>h)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this._r(t,(h,m)=>{if(m<=e){const g=this.ar(t,h).next(_=>{if(!_)return u++,r.getEntry(t,h).next(()=>(r.removeEntry(h,mt.min()),Jr(t).delete(function(A){return[0,sn(A.path)]}(h))))});o.push(g)}}).next(()=>U.waitFor(o)).next(()=>r.apply(t)).next(()=>u)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return Lh(t,e)}_r(t,e){const r=Jr(t);let o,u=En.ae;return r.Z({index:np},([h,m],{path:g,sequenceNumber:_})=>{h===0?(u!==En.ae&&e(new nt(Ai(o)),u),u=_,o=g):u=En.ae}).next(()=>{u!==En.ae&&e(new nt(Ai(o)),u)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Lh(s,t){return Jr(s).put(function(r,o){return{targetId:0,path:sn(r.path),sequenceNumber:o}}(t,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(){this.changes=new ur(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ne.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?U.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return ta(t).put(r)}removeEntry(t,e,r){return ta(t).delete(function(u,h){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],hf(h),m[m.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.ur(t,r)))}getEntry(t,e){let r=ne.newInvalidDocument(e);return ta(t).Z({index:Fh,range:IDBKeyRange.only(yu(e))},(o,u)=>{r=this.cr(e,u)}).next(()=>r)}lr(t,e){let r={size:0,document:ne.newInvalidDocument(e)};return ta(t).Z({index:Fh,range:IDBKeyRange.only(yu(e))},(o,u)=>{r={document:this.cr(e,u),size:df(u)}}).next(()=>r)}getEntries(t,e){let r=An();return this.hr(t,e,(o,u)=>{const h=this.cr(o,u);r=r.insert(o,h)}).next(()=>r)}Pr(t,e){let r=An(),o=new ee(nt.comparator);return this.hr(t,e,(u,h)=>{const m=this.cr(u,h);r=r.insert(u,m),o=o.insert(u,df(h))}).next(()=>({documents:r,Tr:o}))}hr(t,e,r){if(e.isEmpty())return U.resolve();let o=new $t(VT);e.forEach(g=>o=o.add(g));const u=IDBKeyRange.bound(yu(o.first()),yu(o.last())),h=o.getIterator();let m=h.getNext();return ta(t).Z({index:Fh,range:u},(g,_,E)=>{const A=nt.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;m&&VT(m,A)<0;)r(m,null),m=h.getNext();m&&m.isEqual(A)&&(r(m,_),m=h.hasNext()?h.getNext():null),m?E.W(yu(m)):E.done()}).next(()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null})}getDocumentsMatchingQuery(t,e,r,o,u){const h=e.path,m=[h.popLast().toArray(),h.lastSegment(),hf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[h.popLast().toArray(),h.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ta(t).G(IDBKeyRange.bound(m,g,!0)).next(_=>{u==null||u.incrementDocumentReadCount(_.length);let E=An();for(const A of _){const R=this.cr(nt.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);R.isFoundDocument()&&(ec(e,R)||o.has(R.key))&&(E=E.insert(R.key,R))}return E})}getAllFromCollectionGroup(t,e,r,o){let u=An();const h=DT(e,r),m=DT(e,xn.max());return ta(t).Z({index:j0,range:IDBKeyRange.bound(h,m,!0)},(g,_,E)=>{const A=this.cr(nt.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);u=u.insert(A.key,A),u.size===o&&E.done()}).next(()=>u)}newChangeBuffer(t){return new VD(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return IT(t).get(_g).next(e=>(ct(!!e),e))}ur(t,e){return IT(t).put(_g,e)}cr(t,e){if(e){const r=dD(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(mt.min())))return r}return ne.newInvalidDocument(t)}}function nb(s){return new DD(s)}class VD extends eb{constructor(t,e){super(),this.Ir=t,this.trackRemovals=e,this.Er=new ur(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(t){const e=[];let r=0,o=new $t((u,h)=>At(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const m=this.Er.get(u);if(e.push(this.Ir.removeEntry(t,u,m.readTime)),h.isValidDocument()){const g=hT(this.Ir.serializer,h);o=o.add(u.path.popLast());const _=df(g);r+=_-m.size,e.push(this.Ir.addEntry(t,u,g))}else if(r-=m.size,this.trackRemovals){const g=hT(this.Ir.serializer,h.convertToNoDocument(mt.min()));e.push(this.Ir.addEntry(t,u,g))}}),o.forEach(u=>{e.push(this.Ir.indexManager.addToCollectionParentIndex(t,u))}),e.push(this.Ir.updateMetadata(t,r)),U.waitFor(e)}getFromCache(t,e){return this.Ir.lr(t,e).next(r=>(this.Er.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Ir.Pr(t,e).next(({documents:r,Tr:o})=>(o.forEach((u,h)=>{this.Er.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function IT(s){return ke(s,Lu)}function ta(s){return ke(s,nf)}function yu(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function DT(s,t){const e=t.documentKey.path.toArray();return[s,hf(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function VT(s,t){const e=s.path.toArray(),r=t.path.toArray();let o=0;for(let u=0;u<e.length-2&&u<r.length-2;++u)if(o=At(e[u],r[u]),o)return o;return o=At(e.length,r.length),o||(o=At(e[e.length-2],r[r.length-2]),o||At(e[e.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(t,e,r,o){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(o=>(r=o,this.remoteDocumentCache.getEntry(t,e))).next(o=>(r!==null&&Du(r.mutation,o,Tn.empty(),ae.now()),o))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,wt()).next(()=>r))}getLocalViewOfDocuments(t,e,r=wt()){const o=bi();return this.populateOverlays(t,o,e).next(()=>this.computeViews(t,e,o,r).next(u=>{let h=Tu();return u.forEach((m,g)=>{h=h.insert(m,g.overlayedDocument)}),h}))}getOverlayedDocuments(t,e){const r=bi();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,wt()))}populateOverlays(t,e,r){const o=[];return r.forEach(u=>{e.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(t,o).next(u=>{u.forEach((h,m)=>{e.set(h,m)})})}computeViews(t,e,r,o){let u=An();const h=Iu(),m=function(){return Iu()}();return e.forEach((g,_)=>{const E=r.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof cr)?u=u.insert(_.key,_):E!==void 0?(h.set(_.key,E.mutation.getFieldMask()),Du(E.mutation,_,E.mutation.getFieldMask(),ae.now())):h.set(_.key,Tn.empty())}),this.recalculateAndSaveOverlays(t,u).next(g=>(g.forEach((_,E)=>h.set(_,E)),e.forEach((_,E)=>{var A;return m.set(_,new CD(E,(A=h.get(_))!==null&&A!==void 0?A:null))}),m))}recalculateAndSaveOverlays(t,e){const r=Iu();let o=new ee((h,m)=>h-m),u=wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(h=>{for(const m of h)m.keys().forEach(g=>{const _=e.get(g);if(_===null)return;let E=r.get(g)||Tn.empty();E=m.applyToLocalView(_,E),r.set(g,E);const A=(o.get(m.batchId)||wt()).add(g);o=o.insert(m.batchId,A)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,E=g.value,A=vA();E.forEach(R=>{if(!u.has(R)){const P=RA(e.get(R),r.get(R));P!==null&&A.set(R,P),u=u.add(R)}}),h.push(this.documentOverlayCache.saveOverlays(t,_,A))}return U.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,o){return function(h){return nt.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):up(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,o):this.getDocumentsMatchingCollectionQuery(t,e,r,o)}getNextDocuments(t,e,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,o-u.size):U.resolve(bi());let m=ko,g=u;return h.next(_=>U.forEach(_,(E,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(E)?U.resolve():this.remoteDocumentCache.getEntry(t,E).next(R=>{g=g.insert(E,R)}))).next(()=>this.populateOverlays(t,_,u)).next(()=>this.computeViews(t,g,_,wt())).next(E=>({batchId:m,changes:yA(E)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new nt(e)).next(r=>{let o=Tu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(t,e,r,o){const u=e.collectionGroup;let h=Tu();return this.indexManager.getCollectionParents(t,u).next(m=>U.forEach(m,g=>{const _=function(A,R){return new lr(R,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(e,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,_,r,o).next(E=>{E.forEach((A,R)=>{h=h.insert(A,R)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(t,e,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,u,o))).next(h=>{u.forEach((g,_)=>{const E=_.getKey();h.get(E)===null&&(h=h.insert(E,ne.newInvalidDocument(E)))});let m=Tu();return h.forEach((g,_)=>{const E=u.get(g);E!==void 0&&Du(E.mutation,_,Tn.empty(),ae.now()),ec(e,_)&&(m=m.insert(g,_))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return U.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(o){return{id:o.id,version:o.version,createTime:Ee(o.createTime)}}(e)),U.resolve()}getNamedQuery(t,e){return U.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(o){return{name:o.name,query:yp(o.bundledQuery),readTime:Ee(o.readTime)}}(e)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(){this.overlays=new ee(nt.comparator),this.Rr=new Map}getOverlay(t,e){return U.resolve(this.overlays.get(e))}getOverlays(t,e){const r=bi();return U.forEach(e,o=>this.getOverlay(t,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((o,u)=>{this.Et(t,e,u)}),U.resolve()}removeOverlaysForBatchId(t,e,r){const o=this.Rr.get(r);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Rr.delete(r)),U.resolve()}getOverlaysForCollection(t,e,r){const o=bi(),u=e.length+1,h=new nt(e.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!e.isPrefixOf(_.path))break;_.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return U.resolve(o)}getOverlaysForCollectionGroup(t,e,r,o){let u=new ee((_,E)=>_-E);const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===e&&_.largestBatchId>r){let E=u.get(_.largestBatchId);E===null&&(E=bi(),u=u.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const m=bi(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((_,E)=>m.set(_,E)),!(m.size()>=o)););return U.resolve(m)}Et(t,e,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.Rr.get(o.largestBatchId).delete(r.key);this.Rr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new gp(e,r));let u=this.Rr.get(e);u===void 0&&(u=wt(),this.Rr.set(e,u)),this.Rr.set(e,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.sessionToken=pe.EMPTY_BYTE_STRING}getSessionToken(t){return U.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(){this.Vr=new $t(Ge.mr),this.gr=new $t(Ge.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const r=new Ge(t,e);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.wr(new Ge(t,e))}Sr(t,e){t.forEach(r=>this.removeReference(r,e))}br(t){const e=new nt(new Nt([])),r=new Ge(e,t),o=new Ge(e,t+1),u=[];return this.gr.forEachInRange([r,o],h=>{this.wr(h),u.push(h.key)}),u}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new nt(new Nt([])),r=new Ge(e,t),o=new Ge(e,t+1);let u=wt();return this.gr.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(t){const e=new Ge(t,0),r=this.Vr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Ge{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return nt.comparator(t.key,e.key)||At(t.Cr,e.Cr)}static pr(t,e){return At(t.Cr,e.Cr)||nt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new $t(Ge.mr)}checkEmpty(t){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,o){const u=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new dp(u,e,r,o);this.mutationQueue.push(h);for(const m of o)this.Mr=this.Mr.add(new Ge(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return U.resolve(h)}lookupMutationBatch(t,e){return U.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=this.Nr(r),u=o<0?0:o;return U.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?rs:this.Fr-1)}getAllMutationBatches(t){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Ge(e,0),o=new Ge(e,Number.POSITIVE_INFINITY),u=[];return this.Mr.forEachInRange([r,o],h=>{const m=this.Or(h.Cr);u.push(m)}),U.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new $t(At);return e.forEach(o=>{const u=new Ge(o,0),h=new Ge(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([u,h],m=>{r=r.add(m.Cr)})}),U.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1;let u=r;nt.isDocumentKey(u)||(u=u.child(""));const h=new Ge(new nt(u),0);let m=new $t(At);return this.Mr.forEachWhile(g=>{const _=g.key.path;return!!r.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Cr)),!0)},h),U.resolve(this.Br(m))}Br(t){const e=[];return t.forEach(r=>{const o=this.Or(r);o!==null&&e.push(o)}),e}removeMutationBatch(t,e){ct(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return U.forEach(e.mutations,o=>{const u=new Ge(o.key,e.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(()=>{this.Mr=r})}qn(t){}containsKey(t,e){const r=new Ge(e,0),o=this.Mr.firstAfterOrEqual(r);return U.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,U.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(t){this.kr=t,this.docs=function(){return new ee(nt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,o=this.docs.get(r),u=o?o.size:0,h=this.kr(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return U.resolve(r?r.document.mutableCopy():ne.newInvalidDocument(e))}getEntries(t,e){let r=An();return e.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():ne.newInvalidDocument(o))}),U.resolve(r)}getDocumentsMatchingQuery(t,e,r,o){let u=An();const h=e.path,m=new nt(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:E}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||tp(k0(E),r)<=0||(o.has(E.key)||ec(e,E))&&(u=u.insert(E.key,E.mutableCopy()))}return U.resolve(u)}getAllFromCollectionGroup(t,e,r,o){st()}qr(t,e){return U.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new kD(this)}getSize(t){return U.resolve(this.size)}}class kD extends eb{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?e.push(this.Ir.addEntry(t,o)):this.Ir.removeEntry(r)}),U.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(t){this.persistence=t,this.Qr=new ur(e=>ga(e),Ju),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Tp,this.targetCount=0,this.Ur=Ea.Kn()}forEachTarget(t,e){return this.Qr.forEach((r,o)=>e(o)),U.resolve()}getLastRemoteSnapshotVersion(t){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return U.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.$r&&(this.$r=e),U.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ur=new Ea(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,U.resolve()}updateTargetData(t,e){return this.zn(e),U.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Kr.br(e.targetId),this.targetCount-=1,U.resolve()}removeTargets(t,e,r){let o=0;const u=[];return this.Qr.forEach((h,m)=>{m.sequenceNumber<=e&&r.get(m.targetId)===null&&(this.Qr.delete(h),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)}),U.waitFor(u).next(()=>o)}getTargetCount(t){return U.resolve(this.targetCount)}getTargetData(t,e){const r=this.Qr.get(e)||null;return U.resolve(r)}addMatchingKeys(t,e,r){return this.Kr.yr(e,r),U.resolve()}removeMatchingKeys(t,e,r){this.Kr.Sr(e,r);const o=this.persistence.referenceDelegate,u=[];return o&&e.forEach(h=>{u.push(o.markPotentiallyOrphaned(t,h))}),U.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this.Kr.br(e),U.resolve()}getMatchingKeysForTargetId(t,e){const r=this.Kr.vr(e);return U.resolve(r)}containsKey(t,e){return U.resolve(this.Kr.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new En(0),this.zr=!1,this.zr=!0,this.jr=new OD,this.referenceDelegate=t(this),this.Hr=new LD(this),this.indexManager=new TD,this.remoteDocumentCache=function(o){return new PD(o)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new HA(e),this.Yr=new xD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new ND,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.Wr[t.toKey()];return r||(r=new MD(e,this.referenceDelegate),this.Wr[t.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,r){J("MemoryPersistence","Starting transaction:",t);const o=new UD(this.Gr.next());return this.referenceDelegate.Zr(),r(o).next(u=>this.referenceDelegate.Xr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}ei(t,e){return U.or(Object.values(this.Wr).map(r=>()=>r.containsKey(t,e)))}}class UD extends U0{constructor(t){super(),this.currentSequenceNumber=t}}class Of{constructor(t){this.persistence=t,this.ti=new Tp,this.ni=null}static ri(t){return new Of(t)}get ii(){if(this.ni)return this.ni;throw st()}addReference(t,e,r){return this.ti.addReference(r,e),this.ii.delete(r.toString()),U.resolve()}removeReference(t,e,r){return this.ti.removeReference(r,e),this.ii.add(r.toString()),U.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),U.resolve()}removeTarget(t,e){this.ti.br(e.targetId).forEach(o=>this.ii.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(o=>{o.forEach(u=>this.ii.add(u.toString()))}).next(()=>r.removeTargetData(t,e))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.ii,r=>{const o=nt.fromPath(r);return this.si(t,o).next(u=>{u||e.removeEntry(o,mt.min())})}).next(()=>(this.ni=null,e.apply(t)))}updateLimboDocument(t,e){return this.si(t,e).next(r=>{r?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(t){return 0}si(t,e){return U.or([()=>U.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class mf{constructor(t,e){this.persistence=t,this.oi=new ur(r=>sn(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=tb(this,e)}static ri(t,e){return new mf(t,e)}Zr(){}Xr(t){return U.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>e.next(o=>r+o))}sr(t){let e=0;return this.rr(t,r=>{e++}).next(()=>e)}rr(t,e){return U.forEach(this.oi,(r,o)=>this.ar(t,r,o).next(u=>u?U.resolve():e(o)))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.qr(t,h=>this.ar(t,h,e).next(m=>{m||(r++,u.removeEntry(h,mt.min()))})).next(()=>u.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),U.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.oi.set(r,t.currentSequenceNumber),U.resolve()}removeReference(t,e,r){return this.oi.set(r,t.currentSequenceNumber),U.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),U.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Hh(t.data.value)),e}ar(t,e,r){return U.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const o=this.oi.get(e);return U.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(t){this.serializer=t}B(t,e,r,o){const u=new Af("createOrUpgrade",e);r<1&&o>=1&&(function(g){g.createObjectStore(Wu)}(t),function(g){g.createObjectStore(ku,{keyPath:e1}),g.createObjectStore(ii,{keyPath:qE,autoIncrement:!0}).createIndex(ua,jE,{unique:!0}),g.createObjectStore(Lo)}(t),CT(t),function(g){g.createObjectStore(ia)}(t));let h=U.resolve();return r<3&&o>=3&&(r!==0&&(function(g){g.deleteObjectStore(Bo),g.deleteObjectStore(Uo),g.deleteObjectStore(fa)}(t),CT(t)),h=h.next(()=>function(g){const _=g.store(fa),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return _.put(rf,E)}(u))),r<4&&o>=4&&(r!==0&&(h=h.next(()=>function(g,_){return _.store(ii).G().next(A=>{g.deleteObjectStore(ii),g.createObjectStore(ii,{keyPath:qE,autoIncrement:!0}).createIndex(ua,jE,{unique:!0});const R=_.store(ii),P=A.map(Y=>R.put(Y));return U.waitFor(P)})}(t,u))),h=h.next(()=>{(function(g){g.createObjectStore(zo,{keyPath:c1})})(t)})),r<5&&o>=5&&(h=h.next(()=>this._i(u))),r<6&&o>=6&&(h=h.next(()=>(function(g){g.createObjectStore(Lu)}(t),this.ai(u)))),r<7&&o>=7&&(h=h.next(()=>this.ui(u))),r<8&&o>=8&&(h=h.next(()=>this.ci(t,u))),r<9&&o>=9&&(h=h.next(()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)})),r<10&&o>=10&&(h=h.next(()=>this.li(u))),r<11&&o>=11&&(h=h.next(()=>{(function(g){g.createObjectStore(bf,{keyPath:h1})})(t),function(g){g.createObjectStore(wf,{keyPath:f1})}(t)})),r<12&&o>=12&&(h=h.next(()=>{(function(g){const _=g.createObjectStore(Sf,{keyPath:v1});_.createIndex(vg,E1,{unique:!1}),_.createIndex(K0,T1,{unique:!1})})(t)})),r<13&&o>=13&&(h=h.next(()=>function(g){const _=g.createObjectStore(nf,{keyPath:i1});_.createIndex(Fh,r1),_.createIndex(j0,s1)}(t)).next(()=>this.hi(t,u)).next(()=>t.deleteObjectStore(ia))),r<14&&o>=14&&(h=h.next(()=>this.Pi(t,u))),r<15&&o>=15&&(h=h.next(()=>function(g){g.createObjectStore(ip,{keyPath:d1,autoIncrement:!0}).createIndex(yg,m1,{unique:!1}),g.createObjectStore(sf,{keyPath:g1}).createIndex(G0,p1,{unique:!1}),g.createObjectStore(af,{keyPath:_1}).createIndex(H0,y1,{unique:!1})}(t))),r<16&&o>=16&&(h=h.next(()=>{e.objectStore(sf).clear()}).next(()=>{e.objectStore(af).clear()})),r<17&&o>=17&&(h=h.next(()=>{(function(g){g.createObjectStore(rp,{keyPath:A1})})(t)})),h}ai(t){let e=0;return t.store(ia).Z((r,o)=>{e+=df(o)}).next(()=>{const r={byteSize:e};return t.store(Lu).put(_g,r)})}_i(t){const e=t.store(ku),r=t.store(ii);return e.G().next(o=>U.forEach(o,u=>{const h=IDBKeyRange.bound([u.userId,rs],[u.userId,u.lastAcknowledgedBatchId]);return r.G(ua,h).next(m=>U.forEach(m,g=>{ct(g.userId===u.userId);const _=sa(this.serializer,g);return XA(t,u.userId,_).next(()=>{})}))}))}ui(t){const e=t.store(Bo),r=t.store(ia);return t.store(fa).get(rf).next(o=>{const u=[];return r.Z((h,m)=>{const g=new Nt(h),_=function(A){return[0,sn(A)]}(g);u.push(e.get(_).next(E=>E?U.resolve():(A=>e.put({targetId:0,path:sn(A),sequenceNumber:o.highestListenSequenceNumber}))(g)))}).next(()=>U.waitFor(u))})}ci(t,e){t.createObjectStore(Uu,{keyPath:u1});const r=e.store(Uu),o=new Ep,u=h=>{if(o.add(h)){const m=h.lastSegment(),g=h.popLast();return r.put({collectionId:m,parent:sn(g)})}};return e.store(ia).Z({Y:!0},(h,m)=>{const g=new Nt(h);return u(g.popLast())}).next(()=>e.store(Lo).Z({Y:!0},([h,m,g],_)=>{const E=Ai(m);return u(E.popLast())}))}li(t){const e=t.store(Uo);return e.Z((r,o)=>{const u=bu(o),h=KA(this.serializer,u);return e.put(h)})}hi(t,e){const r=e.store(ia),o=[];return r.Z((u,h)=>{const m=e.store(nf),g=function(A){return A.document?new nt(Nt.fromString(A.document.name).popFirst(5)):A.noDocument?nt.fromSegments(A.noDocument.path):A.unknownDocument?nt.fromSegments(A.unknownDocument.path):st()}(h).path.toArray(),_={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(m.put(_))}).next(()=>U.waitFor(o))}Pi(t,e){const r=e.store(ii),o=nb(this.serializer),u=new Ap(Of.ri,this.serializer.Tt);return r.G().next(h=>{const m=new Map;return h.forEach(g=>{var _;let E=(_=m.get(g.userId))!==null&&_!==void 0?_:wt();sa(this.serializer,g).keys().forEach(A=>E=E.add(A)),m.set(g.userId,E)}),U.forEach(m,(g,_)=>{const E=new He(_),A=xf.It(this.serializer,E),R=u.getIndexManager(E),P=Nf.It(E,this.serializer,R,u.referenceDelegate);return new ib(o,P,A,R).recalculateAndSaveOverlaysForDocumentKeys(new Eg(e,En.ae),g).next()})})}}function CT(s){s.createObjectStore(Bo,{keyPath:o1}).createIndex(np,l1,{unique:!0}),s.createObjectStore(Uo,{keyPath:"targetId"}).createIndex(F0,a1,{unique:!0}),s.createObjectStore(fa)}const Zr="IndexedDbPersistence",sg=18e5,ag=5e3,og="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rb="main";class bp{constructor(t,e,r,o,u,h,m,g,_,E,A=17){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Ti=u,this.window=h,this.document=m,this.Ii=_,this.Ei=E,this.di=A,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=R=>Promise.resolve(),!bp.D())throw new Z(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ID(this,o),this.gi=e+rb,this.serializer=new HA(g),this.pi=new wi(this.gi,this.di,new BD(this.serializer)),this.jr=new gD,this.Hr=new bD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=nb(this.serializer),this.Yr=new mD,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,E===!1&&ve(Zr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Z(j.FAILED_PRECONDITION,og);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Hr.getHighestSequenceNumber(t))}).then(t=>{this.Gr=new En(t,this.Ii)}).then(()=>{this.zr=!0}).catch(t=>(this.pi&&this.pi.close(),Promise.reject(t)))}Ci(t){return this.fi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.pi.k(async e=>{e.newVersion===null&&await t()})}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Uh(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(t).next(e=>{e||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(t)).next(e=>this.isPrimary&&!e?this.xi(t).next(()=>!1):!!e&&this.Oi(t).next(()=>!0))).catch(t=>{if(ys(t))return J(Zr,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return J(Zr,"Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Ti.enqueueRetryable(()=>this.fi(t)),this.isPrimary=t})}Fi(t){return vu(t).get(vo).next(e=>U.resolve(this.Ni(e)))}Bi(t){return Uh(t).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,sg)){this.mi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const r=ke(e,zo);return r.G().next(o=>{const u=this.qi(o,sg),h=o.filter(m=>u.indexOf(m)===-1);return U.forEach(h,m=>r.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(this.yi)for(const e of t)this.yi.removeItem(this.Qi(e.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(t){return!!t&&t.ownerId===this.clientId}Mi(t){return this.Ei?U.resolve(!0):vu(t).get(vo).next(e=>{if(e!==null&&this.ki(e.leaseTimestampMs,ag)&&!this.$i(e.ownerId)){if(this.Ni(e)&&this.networkEnabled)return!0;if(!this.Ni(e)){if(!e.allowTabSynchronization)throw new Z(j.FAILED_PRECONDITION,og);return!1}}return!(!this.networkEnabled||!this.inForeground)||Uh(t).G().next(r=>this.qi(r,ag).find(o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||h&&m)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&J(Zr,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.zr=!1,this.Ki(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ui(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[Wu,zo],t=>{const e=new Eg(t,En.ae);return this.xi(e).next(()=>this.Bi(e))}),this.pi.close(),this.Gi()}qi(t,e){return t.filter(r=>this.ki(r.updateTimeMs,e)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",t=>Uh(t).G().next(e=>this.qi(e,sg).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(t,e){return Nf.It(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new AD(t,this.serializer.Tt.databaseId)}getDocumentOverlayCache(t){return xf.It(this.serializer,t)}getBundleCache(){return this.Yr}runTransaction(t,e,r){J(Zr,"Starting transaction:",t);const o=e==="readonly"?"readonly":"readwrite",u=function(g){return g===17?S1:g===16?w1:g===15?sp:g===14?$0:g===13?Y0:g===12?b1:g===11?Q0:void st()}(this.di);let h;return this.pi.runTransaction(t,o,u,m=>(h=new Eg(m,this.Gr?this.Gr.next():En.ae),e==="readwrite-primary"?this.Fi(h).next(g=>!!g||this.Mi(h)).next(g=>{if(!g)throw ve(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new Z(j.FAILED_PRECONDITION,L0);return r(h)}).next(g=>this.Oi(h).next(()=>g)):this.ji(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}ji(t){return vu(t).get(vo).next(e=>{if(e!==null&&this.ki(e.leaseTimestampMs,ag)&&!this.$i(e.ownerId)&&!this.Ni(e)&&!(this.Ei||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Z(j.FAILED_PRECONDITION,og)})}Oi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vu(t).put(vo,e)}static D(){return wi.D()}xi(t){const e=vu(t);return e.get(vo).next(r=>this.Ni(r)?(J(Zr,"Releasing primary lease."),e.delete(vo)):U.resolve())}ki(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(ve(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ui(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Ai=()=>{this.Ki();const e=/(?:Version|Mobile)\/1[456]/;c0()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(t){var e;try{const r=((e=this.yi)===null||e===void 0?void 0:e.getItem(this.Qi(t)))!==null;return J(Zr,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ve(Zr,"Failed to get zombied client id.",r),!1}}Ki(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(t){ve("Failed to set zombie client id.",t)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function vu(s){return ke(s,Wu)}function Uh(s){return ke(s,zo)}function wp(s,t){let e=s.projectId;return s.isDefaultDatabase||(e+="."+s.database),"firestore/"+t+"/"+e+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(t,e,r,o){this.targetId=t,this.fromCache=e,this.Hi=r,this.Ji=o}static Yi(t,e){let r=wt(),o=wt();for(const u of e.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Sp(t,e.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return c0()?8:B0(Wh())>0?6:4}()}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,r,o){const u={result:null};return this.rs(t,e).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.ss(t,e,o,r).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new zD;return this._s(t,e,h).next(m=>{if(u.result=m,this.Xi)return this.us(t,e,h,m.size)})}).next(()=>u.result)}us(t,e,r,o){return r.documentReadCount<this.es?(So()<=Pt.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Ro(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),U.resolve()):(So()<=Pt.DEBUG&&J("QueryEngine","Query:",Ro(e),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ts*o?(So()<=Pt.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Ro(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,gn(e))):U.resolve())}rs(t,e){if(eT(e))return U.resolve(null);let r=gn(e);return this.indexManager.getIndexType(t,r).next(o=>o===0?null:(e.limit!==null&&o===1&&(e=cf(e,null,"F"),r=gn(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(u=>{const h=wt(...u);return this.ns.getDocuments(t,h).next(m=>this.indexManager.getMinOffset(t,r).next(g=>{const _=this.cs(e,m);return this.ls(e,_,h,g.readTime)?this.rs(t,cf(e,null,"F")):this.hs(t,_,e,g)}))})))}ss(t,e,r,o){return eT(e)||o.isEqual(mt.min())?U.resolve(null):this.ns.getDocuments(t,r).next(u=>{const h=this.cs(e,u);return this.ls(e,h,r,o)?U.resolve(null):(So()<=Pt.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ro(e)),this.hs(t,h,e,P0(o,ko)).next(m=>m))})}cs(t,e){let r=new $t(pA(t));return e.forEach((o,u)=>{ec(t,u)&&(r=r.add(u))}),r}ls(t,e,r,o){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}_s(t,e,r){return So()<=Pt.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Ro(e)),this.ns.getDocumentsMatchingQuery(t,e,xn.min(),r)}hs(t,e,r,o){return this.ns.getDocumentsMatchingQuery(t,r,o).next(u=>(e.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="LocalStore",qD=3e8;class jD{constructor(t,e,r,o){this.persistence=t,this.Ps=e,this.serializer=o,this.Ts=new ee(At),this.Is=new ur(u=>ga(u),Ju),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(r)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ib(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ts))}}function ab(s,t,e,r){return new jD(s,t,e,r)}async function ob(s,t){const e=it(s);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let o;return e.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,e.As(t),e.mutationQueue.getAllMutationBatches(r))).next(u=>{const h=[],m=[];let g=wt();for(const _ of o){h.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}for(const _ of u){m.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}return e.localDocuments.getDocuments(r,g).next(_=>({Rs:_,removedBatchIds:h,addedBatchIds:m}))})})}function FD(s,t){const e=it(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=t.batch.keys(),u=e.ds.newChangeBuffer({trackRemovals:!0});return function(m,g,_,E){const A=_.batch,R=A.keys();let P=U.resolve();return R.forEach(Y=>{P=P.next(()=>E.getEntry(g,Y)).next(K=>{const X=_.docVersions.get(Y);ct(X!==null),K.version.compareTo(X)<0&&(A.applyToRemoteDocument(K,_),K.isValidDocument()&&(K.setReadTime(_.commitVersion),E.addEntry(K)))})}),P.next(()=>m.mutationQueue.removeMutationBatch(g,A))}(e,r,t,u).next(()=>u.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let g=wt();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g}(t))).next(()=>e.localDocuments.getDocuments(r,o))})}function lb(s){const t=it(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function GD(s,t){const e=it(s),r=t.snapshotVersion;let o=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=e.ds.newChangeBuffer({trackRemovals:!0});o=e.Ts;const m=[];t.targetChanges.forEach((E,A)=>{const R=o.get(A);if(!R)return;m.push(e.Hr.removeMatchingKeys(u,E.removedDocuments,A).next(()=>e.Hr.addMatchingKeys(u,E.addedDocuments,A)));let P=R.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(A)!==null?P=P.withResumeToken(pe.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,r)),o=o.insert(A,P),function(K,X,ht){return K.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=qD?!0:ht.addedDocuments.size+ht.modifiedDocuments.size+ht.removedDocuments.size>0}(R,P,E)&&m.push(e.Hr.updateTargetData(u,P))});let g=An(),_=wt();if(t.documentUpdates.forEach(E=>{t.resolvedLimboDocuments.has(E)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(ub(u,h,t.documentUpdates).next(E=>{g=E.Vs,_=E.fs})),!r.isEqual(mt.min())){const E=e.Hr.getLastRemoteSnapshotVersion(u).next(A=>e.Hr.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(E)}return U.waitFor(m).next(()=>h.apply(u)).next(()=>e.localDocuments.getLocalViewOfDocuments(u,g,_)).next(()=>g)}).then(u=>(e.Ts=o,u))}function ub(s,t,e){let r=wt(),o=wt();return e.forEach(u=>r=r.add(u)),t.getEntries(s,r).next(u=>{let h=An();return e.forEach((m,g)=>{const _=u.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(mt.min())?(t.removeEntry(m,g.readTime),h=h.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(g),h=h.insert(m,g)):J(Rp,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)}),{Vs:h,fs:o}})}function HD(s,t){const e=it(s);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=rs),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Qo(s,t){const e=it(s);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return e.Hr.getTargetData(r,t).next(u=>u?(o=u,U.resolve(o)):e.Hr.allocateTargetId(r).next(h=>(o=new nr(t,h,"TargetPurposeListen",r.currentSequenceNumber),e.Hr.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=e.Ts.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(r.targetId,r),e.Is.set(t,r.targetId)),r})}async function Yo(s,t,e){const r=it(s),o=r.Ts.get(t),u=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!ys(h))throw h;J(Rp,`Failed to update sequence numbers for target ${t}: ${h}`)}r.Ts=r.Ts.remove(t),r.Is.delete(o.target)}function gf(s,t,e){const r=it(s);let o=mt.min(),u=wt();return r.persistence.runTransaction("Execute query","readwrite",h=>function(g,_,E){const A=it(g),R=A.Is.get(E);return R!==void 0?U.resolve(A.Ts.get(R)):A.Hr.getTargetData(_,E)}(r,h,gn(t)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(h,m.targetId).next(g=>{u=g})}).next(()=>r.Ps.getDocumentsMatchingQuery(h,t,e?o:mt.min(),e?u:wt())).next(m=>(fb(r,gA(t),m),{documents:m,gs:u})))}function cb(s,t){const e=it(s),r=it(e.Hr),o=e.Ts.get(t);return o?Promise.resolve(o.target):e.persistence.runTransaction("Get target data","readonly",u=>r.lt(u,t).next(h=>h?h.target:null))}function hb(s,t){const e=it(s),r=e.Es.get(t)||mt.min();return e.persistence.runTransaction("Get new document changes","readonly",o=>e.ds.getAllFromCollectionGroup(o,t,P0(r,ko),Number.MAX_SAFE_INTEGER)).then(o=>(fb(e,t,o),o))}function fb(s,t,e){let r=s.Es.get(t)||mt.min();e.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),s.Es.set(t,r)}async function KD(s,t,e,r){const o=it(s);let u=wt(),h=An();for(const _ of e){const E=t.ps(_.metadata.name);_.document&&(u=u.add(E));const A=t.ys(_);A.setReadTime(t.ws(_.metadata.readTime)),h=h.insert(E,A)}const m=o.ds.newChangeBuffer({trackRemovals:!0}),g=await Qo(o,function(E){return gn(el(Nt.fromString(`__bundle__/docs/${E}`)))}(r));return o.persistence.runTransaction("Apply bundle documents","readwrite",_=>ub(_,m,h).next(E=>(m.apply(_),E)).next(E=>o.Hr.removeMatchingKeysForTargetId(_,g.targetId).next(()=>o.Hr.addMatchingKeys(_,u,g.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(_,E.Vs,E.fs)).next(()=>E.Vs)))}async function QD(s,t,e=wt()){const r=await Qo(s,gn(yp(t.bundledQuery))),o=it(s);return o.persistence.runTransaction("Save named query","readwrite",u=>{const h=Ee(t.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.Yr.saveNamedQuery(u,t);const m=r.withResumeToken(pe.EMPTY_BYTE_STRING,h);return o.Ts=o.Ts.insert(m.targetId,m),o.Hr.updateTargetData(u,m).next(()=>o.Hr.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Hr.addMatchingKeys(u,e,r.targetId)).next(()=>o.Yr.saveNamedQuery(u,t))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="firestore_clients";function xT(s,t){return`${db}_${s}_${t}`}const mb="firestore_mutations";function NT(s,t,e){let r=`${mb}_${s}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const gb="firestore_targets";function lg(s,t){return`${gb}_${s}_${t}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="SharedClientState";class pf{constructor(t,e,r,o){this.user=t,this.batchId=e,this.state=r,this.error=o}static Ss(t,e,r){const o=JSON.parse(r);let u,h=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return h&&o.error&&(h=typeof o.error.message=="string"&&typeof o.error.code=="string",h&&(u=new Z(o.error.code,o.error.message))),h?new pf(t,e,o.state,u):(ve(Ti,`Failed to parse mutation state for ID '${e}': ${r}`),null)}bs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Vu{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ss(t,e){const r=JSON.parse(e);let o,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(o=new Z(r.error.code,r.error.message))),u?new Vu(t,r.state,o):(ve(Ti,`Failed to parse target state for ID '${t}': ${e}`),null)}bs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class _f{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ss(t,e){const r=JSON.parse(e);let o=typeof r=="object"&&r.activeTargetIds instanceof Array,u=cp();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=z0(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return o?new _f(t,u):(ve(Ti,`Failed to parse client data for instance '${t}': ${e}`),null)}}class Ip{constructor(t,e){this.clientId=t,this.onlineState=e}static Ss(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new Ip(e.clientId,e.onlineState):(ve(Ti,`Failed to parse online state: ${t}`),null)}}class Mg{constructor(){this.activeTargetIds=cp()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class ug{constructor(t,e,r,o,u){this.window=t,this.Ti=e,this.persistenceKey=r,this.Cs=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new ee(At),this.started=!1,this.Os=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Ns=xT(this.persistenceKey,this.Cs),this.Bs=function(g){return`firestore_sequence_number_${g}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new Mg),this.Ls=new RegExp(`^${db}_${h}_([^_]*)$`),this.ks=new RegExp(`^${mb}_${h}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${gb}_${h}_(\\d+)$`),this.Qs=function(g){return`firestore_online_state_${g}`}(this.persistenceKey),this.$s=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.zi();for(const r of t){if(r===this.Cs)continue;const o=this.getItem(xT(this.persistenceKey,r));if(o){const u=_f.Ss(r,o);u&&(this.xs=this.xs.insert(u.clientId,u))}}this.Ks();const e=this.storage.getItem(this.Qs);if(e){const r=this.Us(e);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(t){this.setItem(this.Bs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(t){let e=!1;return this.xs.forEach((r,o)=>{o.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.zs(t,"pending")}updateMutationState(t,e,r){this.zs(t,e,r),this.js(t)}addLocalQueryTarget(t,e=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const o=this.storage.getItem(lg(this.persistenceKey,t));if(o){const u=Vu.Ss(t,o);u&&(r=u.state)}}return e&&this.Hs.Ds(t),this.Ks(),r}removeLocalQueryTarget(t){this.Hs.vs(t),this.Ks()}isLocalQueryTarget(t){return this.Hs.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(lg(this.persistenceKey,t))}updateQueryState(t,e,r){this.Js(t,e,r)}handleUserChange(t,e,r){e.forEach(o=>{this.js(o)}),this.currentUser=t,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(t){this.Ys(t)}notifyBundleLoaded(t){this.Zs(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return J(Ti,"READ",t,e),e}setItem(t,e){J(Ti,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){J(Ti,"REMOVE",t),this.storage.removeItem(t)}Ms(t){const e=t;if(e.storageArea===this.storage){if(J(Ti,"EVENT",e.key,e.newValue),e.key===this.Ns)return void ve("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(e.key!==null){if(this.Ls.test(e.key)){if(e.newValue==null){const r=this.Xs(e.key);return this.eo(r,null)}{const r=this.no(e.key,e.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(e.key)){if(e.newValue!==null){const r=this.ro(e.key,e.newValue);if(r)return this.io(r)}}else if(this.qs.test(e.key)){if(e.newValue!==null){const r=this.so(e.key,e.newValue);if(r)return this.oo(r)}}else if(e.key===this.Qs){if(e.newValue!==null){const r=this.Us(e.newValue);if(r)return this.Ws(r)}}else if(e.key===this.Bs){const r=function(u){let h=En.ae;if(u!=null)try{const m=JSON.parse(u);ct(typeof m=="number"),h=m}catch(m){ve(Ti,"Failed to read sequence number from WebStorage",m)}return h}(e.newValue);r!==En.ae&&this.sequenceNumberHandler(r)}else if(e.key===this.$s){const r=this._o(e.newValue);await Promise.all(r.map(o=>this.syncEngine.ao(o)))}}}else this.Os.push(e)})}}get Hs(){return this.xs.get(this.Cs)}Ks(){this.setItem(this.Ns,this.Hs.bs())}zs(t,e,r){const o=new pf(this.currentUser,t,e,r),u=NT(this.persistenceKey,this.currentUser,t);this.setItem(u,o.bs())}js(t){const e=NT(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Ys(t){const e={clientId:this.Cs,onlineState:t};this.storage.setItem(this.Qs,JSON.stringify(e))}Js(t,e,r){const o=lg(this.persistenceKey,t),u=new Vu(t,e,r);this.setItem(o,u.bs())}Zs(t){const e=JSON.stringify(Array.from(t));this.setItem(this.$s,e)}Xs(t){const e=this.Ls.exec(t);return e?e[1]:null}no(t,e){const r=this.Xs(t);return _f.Ss(r,e)}ro(t,e){const r=this.ks.exec(t),o=Number(r[1]),u=r[2]!==void 0?r[2]:null;return pf.Ss(new He(u),o,e)}so(t,e){const r=this.qs.exec(t),o=Number(r[1]);return Vu.Ss(o,e)}Us(t){return Ip.Ss(t)}_o(t){return JSON.parse(t)}async io(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.uo(t.batchId,t.state,t.error);J(Ti,`Ignoring mutation for non-active user ${t.user.uid}`)}oo(t){return this.syncEngine.co(t.targetId,t.state,t.error)}eo(t,e){const r=e?this.xs.insert(t,e):this.xs.remove(t),o=this.Gs(this.xs),u=this.Gs(r),h=[],m=[];return u.forEach(g=>{o.has(g)||h.push(g)}),o.forEach(g=>{u.has(g)||m.push(g)}),this.syncEngine.lo(h,m).then(()=>{this.xs=r})}Ws(t){this.xs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Gs(t){let e=cp();return t.forEach((r,o)=>{e=e.unionWith(o.activeTargetIds)}),e}}class pb{constructor(){this.ho=new Mg,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,r){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Mg,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="ConnectivityMonitor";class MT{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){J(OT,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){J(OT,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bh=null;function Pg(){return Bh===null?Bh=function(){return 268435456+Math.round(2147483648*Math.random())}():Bh++,"0x"+Bh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="RestConnection",$D={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XD{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${r}/databases/${o}`,this.wo=this.databaseId.database===of?`project_id=${r}`:`project_id=${r}&database_id=${o}`}So(t,e,r,o,u){const h=Pg(),m=this.bo(t,e.toUriEncodedString());J(cg,`Sending RPC '${t}' ${h}:`,m,r);const g={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(g,o,u),this.vo(t,m,g,r).then(_=>(J(cg,`Received RPC '${t}' ${h}: `,_),_),_=>{throw Ri(cg,`RPC '${t}' ${h} failed with error: `,_,"url: ",m,"request:",r),_})}Co(t,e,r,o,u,h){return this.So(t,e,r,o,u)}Do(t,e,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((o,u)=>t[u]=o),r&&r.headers.forEach((o,u)=>t[u]=o)}bo(t,e){const r=$D[t];return`${this.po}/v1/${e}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class WD extends XD{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,r,o){const u=Pg();return new Promise((h,m)=>{const g=new I0;g.setWithCredentials(!0),g.listenOnce(D0.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case zh.NO_ERROR:const E=g.getResponseJson();J(nn,`XHR for RPC '${t}' ${u} received:`,JSON.stringify(E)),h(E);break;case zh.TIMEOUT:J(nn,`RPC '${t}' ${u} timed out`),m(new Z(j.DEADLINE_EXCEEDED,"Request time out"));break;case zh.HTTP_ERROR:const A=g.getStatus();if(J(nn,`RPC '${t}' ${u} failed with status:`,A,"response text:",g.getResponseText()),A>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const P=R==null?void 0:R.error;if(P&&P.status&&P.message){const Y=function(X){const ht=X.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(ht)>=0?ht:j.UNKNOWN}(P.status);m(new Z(Y,P.message))}else m(new Z(j.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Z(j.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{J(nn,`RPC '${t}' ${u} completed.`)}});const _=JSON.stringify(o);J(nn,`RPC '${t}' ${u} sending request:`,o),g.send(e,"POST",_,r,15)})}Wo(t,e,r){const o=Pg(),u=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=x0(),m=C0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Do(g.initMessageHeaders,e,r),g.encodeInitMessageHeaders=!0;const E=u.join("");J(nn,`Creating RPC '${t}' stream ${o}: ${E}`,g);const A=h.createWebChannel(E,g);let R=!1,P=!1;const Y=new ZD({Fo:X=>{P?J(nn,`Not sending because RPC '${t}' stream ${o} is closed:`,X):(R||(J(nn,`Opening RPC '${t}' stream ${o} transport.`),A.open(),R=!0),J(nn,`RPC '${t}' stream ${o} sending:`,X),A.send(X))},Mo:()=>A.close()}),K=(X,ht,ft)=>{X.listen(ht,ut=>{try{ft(ut)}catch(It){setTimeout(()=>{throw It},0)}})};return K(A,Eu.EventType.OPEN,()=>{P||(J(nn,`RPC '${t}' stream ${o} transport opened.`),Y.Qo())}),K(A,Eu.EventType.CLOSE,()=>{P||(P=!0,J(nn,`RPC '${t}' stream ${o} transport closed`),Y.Ko())}),K(A,Eu.EventType.ERROR,X=>{P||(P=!0,Ri(nn,`RPC '${t}' stream ${o} transport errored:`,X),Y.Ko(new Z(j.UNAVAILABLE,"The operation could not be completed")))}),K(A,Eu.EventType.MESSAGE,X=>{var ht;if(!P){const ft=X.data[0];ct(!!ft);const ut=ft,It=(ut==null?void 0:ut.error)||((ht=ut[0])===null||ht===void 0?void 0:ht.error);if(It){J(nn,`RPC '${t}' stream ${o} received error:`,It);const gt=It.status;let Et=function(w){const V=Ie[w];if(V!==void 0)return VA(V)}(gt),N=It.message;Et===void 0&&(Et=j.INTERNAL,N="Unknown error status: "+gt+" with message "+It.message),P=!0,Y.Ko(new Z(Et,N)),A.close()}else J(nn,`RPC '${t}' stream ${o} received:`,ft),Y.Uo(ft)}}),K(m,V0.STAT_EVENT,X=>{X.stat===gg.PROXY?J(nn,`RPC '${t}' stream ${o} detected buffering proxy`):X.stat===gg.NOPROXY&&J(nn,`RPC '${t}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{Y.$o()},0),Y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(){return typeof window<"u"?window:null}function $h(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(s){return new iD(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(t,e,r=1e3,o=1.5,u=6e4){this.Ti=t,this.timerId=e,this.Go=r,this.zo=o,this.jo=u,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),o=Math.max(0,e-r);o>0&&J("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="PersistentStream";class yb{constructor(t,e,r,o,u,h,m,g){this.Ti=t,this.n_=r,this.r_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Dp(t,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():e&&e.code===j.RESOURCE_EXHAUSTED?(ve(e.toString()),ve("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.i_===e&&this.V_(r,o)},r=>{t(()=>{const o=new Z(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(o)})})}V_(t,e){const r=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{r(()=>this.m_(o))}),this.stream.onMessage(o=>{r(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return J(PT,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget(()=>this.i_===t?e():(J(PT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JD extends yb{constructor(t,e,r,o,u,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,o,h),this.serializer=u}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const e=aD(this.serializer,t),r=function(u){if(!("targetChange"in u))return mt.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?mt.min():h.readTime?Ee(h.readTime):mt.min()}(t);return this.listener.p_(e,r)}y_(t){const e={};e.database=Vg(this.serializer),e.addTarget=function(u,h){let m;const g=h.target;if(m=lf(g)?{documents:BA(u,g)}:{query:zA(u,g).ht},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=OA(u,h.resumeToken);const _=Ig(u,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(mt.min())>0){m.readTime=Ko(u,h.snapshotVersion.toTimestamp());const _=Ig(u,h.expectedCount);_!==null&&(m.expectedCount=_)}return m}(this.serializer,t);const r=lD(this.serializer,t);r&&(e.labels=r),this.I_(e)}w_(t){const e={};e.database=Vg(this.serializer),e.removeTarget=t,this.I_(e)}}class tV extends yb{constructor(t,e,r,o,u,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,o,h),this.serializer=u}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return ct(!!t.streamToken),this.lastStreamToken=t.streamToken,ct(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){ct(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=oD(t.writeResults,t.commitTime),r=Ee(t.commitTime);return this.listener.v_(r,e)}C_(){const t={};t.database=Vg(this.serializer),this.I_(t)}b_(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>Gu(this.serializer,r))};this.I_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{}class nV extends eV{constructor(t,e,r,o){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new Z(j.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,r,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.So(t,Dg(e,r),o,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Z(j.UNKNOWN,u.toString())})}Co(t,e,r,o,u){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Co(t,Dg(e,r),o,h,m,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Z(j.UNKNOWN,h.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class iV{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ve(e),this.N_=!1):J("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="RemoteStore";class rV{constructor(t,e,r,o,u){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=u,this.z_.To(h=>{r.enqueueAndForget(async()=>{Es(this)&&(J(Ta,"Restarting streams for network reachability change."),await async function(g){const _=it(g);_.W_.add(4),await rl(_),_.j_.set("Unknown"),_.W_.delete(4),await ac(_)}(this))})}),this.j_=new iV(r,o)}}async function ac(s){if(Es(s))for(const t of s.G_)await t(!0)}async function rl(s){for(const t of s.G_)await t(!1)}function Mf(s,t){const e=it(s);e.U_.has(t.targetId)||(e.U_.set(t.targetId,t),xp(e)?Cp(e):al(e).c_()&&Vp(e,t))}function $o(s,t){const e=it(s),r=al(e);e.U_.delete(t),r.c_()&&vb(e,t),e.U_.size===0&&(r.c_()?r.P_():Es(e)&&e.j_.set("Unknown"))}function Vp(s,t){if(s.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(mt.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}al(s).y_(t)}function vb(s,t){s.H_.Ne(t),al(s).w_(t)}function Cp(s){s.H_=new J1({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>s.U_.get(t)||null,it:()=>s.datastore.serializer.databaseId}),al(s).start(),s.j_.B_()}function xp(s){return Es(s)&&!al(s).u_()&&s.U_.size>0}function Es(s){return it(s).W_.size===0}function Eb(s){s.H_=void 0}async function sV(s){s.j_.set("Online")}async function aV(s){s.U_.forEach((t,e)=>{Vp(s,t)})}async function oV(s,t){Eb(s),xp(s)?(s.j_.q_(t),Cp(s)):s.j_.set("Unknown")}async function lV(s,t,e){if(s.j_.set("Online"),t instanceof NA&&t.state===2&&t.cause)try{await async function(o,u){const h=u.cause;for(const m of u.targetIds)o.U_.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.U_.delete(m),o.H_.removeTarget(m))}(s,t)}catch(r){J(Ta,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await yf(s,r)}else if(t instanceof Yh?s.H_.We(t):t instanceof xA?s.H_.Ze(t):s.H_.je(t),!e.isEqual(mt.min()))try{const r=await lb(s.localStore);e.compareTo(r)>=0&&await function(u,h){const m=u.H_.ot(h);return m.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.U_.get(_);E&&u.U_.set(_,E.withResumeToken(g.resumeToken,h))}}),m.targetMismatches.forEach((g,_)=>{const E=u.U_.get(g);if(!E)return;u.U_.set(g,E.withResumeToken(pe.EMPTY_BYTE_STRING,E.snapshotVersion)),vb(u,g);const A=new nr(E.target,g,_,E.sequenceNumber);Vp(u,A)}),u.remoteSyncer.applyRemoteEvent(m)}(s,e)}catch(r){J(Ta,"Failed to raise snapshot:",r),await yf(s,r)}}async function yf(s,t,e){if(!ys(t))throw t;s.W_.add(1),await rl(s),s.j_.set("Offline"),e||(e=()=>lb(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{J(Ta,"Retrying IndexedDB access"),await e(),s.W_.delete(1),await ac(s)})}function Tb(s,t){return t().catch(e=>yf(s,e,t))}async function sl(s){const t=it(s),e=ds(t);let r=t.K_.length>0?t.K_[t.K_.length-1].batchId:rs;for(;uV(t);)try{const o=await HD(t.localStore,r);if(o===null){t.K_.length===0&&e.P_();break}r=o.batchId,cV(t,o)}catch(o){await yf(t,o)}Ab(t)&&bb(t)}function uV(s){return Es(s)&&s.K_.length<10}function cV(s,t){s.K_.push(t);const e=ds(s);e.c_()&&e.S_&&e.b_(t.mutations)}function Ab(s){return Es(s)&&!ds(s).u_()&&s.K_.length>0}function bb(s){ds(s).start()}async function hV(s){ds(s).C_()}async function fV(s){const t=ds(s);for(const e of s.K_)t.b_(e.mutations)}async function dV(s,t,e){const r=s.K_.shift(),o=mp.from(r,t,e);await Tb(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await sl(s)}async function mV(s,t){t&&ds(s).S_&&await async function(r,o){if(function(h){return DA(h)&&h!==j.ABORTED}(o.code)){const u=r.K_.shift();ds(r).h_(),await Tb(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o)),await sl(r)}}(s,t),Ab(s)&&bb(s)}async function kT(s,t){const e=it(s);e.asyncQueue.verifyOperationInProgress(),J(Ta,"RemoteStore received new credentials");const r=Es(e);e.W_.add(3),await rl(e),r&&e.j_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.W_.delete(3),await ac(e)}async function kg(s,t){const e=it(s);t?(e.W_.delete(2),await ac(e)):t||(e.W_.add(2),await rl(e),e.j_.set("Unknown"))}function al(s){return s.J_||(s.J_=function(e,r,o){const u=it(e);return u.M_(),new JD(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{xo:sV.bind(null,s),No:aV.bind(null,s),Lo:oV.bind(null,s),p_:lV.bind(null,s)}),s.G_.push(async t=>{t?(s.J_.h_(),xp(s)?Cp(s):s.j_.set("Unknown")):(await s.J_.stop(),Eb(s))})),s.J_}function ds(s){return s.Y_||(s.Y_=function(e,r,o){const u=it(e);return u.M_(),new tV(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{xo:()=>Promise.resolve(),No:hV.bind(null,s),Lo:mV.bind(null,s),D_:fV.bind(null,s),v_:dV.bind(null,s)}),s.G_.push(async t=>{t?(s.Y_.h_(),await sl(s)):(await s.Y_.stop(),s.K_.length>0&&(J(Ta,`Stopping write stream with ${s.K_.length} pending writes`),s.K_=[]))})),s.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(t,e,r,o,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new We,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,o,u){const h=Date.now()+r,m=new Np(t,e,h,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(j.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ol(s,t){if(ve("AsyncQueue",`${t}: ${s}`),ys(s))return new Z(j.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{static emptySet(t){return new xo(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||nt.comparator(e.key,r.key):(e,r)=>nt.comparator(e.key,r.key),this.keyedMap=Tu(),this.sortedSet=new ee(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof xo)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new xo;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(){this.Z_=new ee(nt.comparator)}track(t){const e=t.doc.key,r=this.Z_.get(e);r?t.type!==0&&r.type===3?this.Z_=this.Z_.insert(e,t):t.type===3&&r.type!==1?this.Z_=this.Z_.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Z_=this.Z_.remove(e):t.type===1&&r.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):st():this.Z_=this.Z_.insert(e,t)}X_(){const t=[];return this.Z_.inorderTraversal((e,r)=>{t.push(r)}),t}}class Xo{constructor(t,e,r,o,u,h,m,g,_){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(t,e,r,o,u){const h=[];return e.forEach(m=>{h.push({type:0,doc:m})}),new Xo(t,e,xo.emptySet(e),h,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&tc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==r[o].type||!e[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class pV{constructor(){this.queries=UT(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,r){const o=it(e),u=o.queries;o.queries=UT(),u.forEach((h,m)=>{for(const g of m.ta)g.onError(r)})})(this,new Z(j.ABORTED,"Firestore shutting down"))}}function UT(){return new ur(s=>mA(s),tc)}async function Op(s,t){const e=it(s);let r=3;const o=t.query;let u=e.queries.get(o);u?!u.na()&&t.ra()&&(r=2):(u=new gV,r=t.ra()?0:1);try{switch(r){case 0:u.ea=await e.onListen(o,!0);break;case 1:u.ea=await e.onListen(o,!1);break;case 2:await e.onFirstRemoteStoreListen(o)}}catch(h){const m=ol(h,`Initialization of query '${Ro(t.query)}' failed`);return void t.onError(m)}e.queries.set(o,u),u.ta.push(t),t.sa(e.onlineState),u.ea&&t.oa(u.ea)&&Pp(e)}async function Mp(s,t){const e=it(s),r=t.query;let o=3;const u=e.queries.get(r);if(u){const h=u.ta.indexOf(t);h>=0&&(u.ta.splice(h,1),u.ta.length===0?o=t.ra()?0:1:!u.na()&&t.ra()&&(o=2))}switch(o){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function _V(s,t){const e=it(s);let r=!1;for(const o of t){const u=o.query,h=e.queries.get(u);if(h){for(const m of h.ta)m.oa(o)&&(r=!0);h.ea=o}}r&&Pp(e)}function yV(s,t,e){const r=it(s),o=r.queries.get(t);if(o)for(const u of o.ta)u.onError(e);r.queries.delete(t)}function Pp(s){s.ia.forEach(t=>{t.next()})}var Lg,BT;(BT=Lg||(Lg={}))._a="default",BT.Cache="cache";class kp{constructor(t,e,r){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new Xo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache||!this.ra())return!0;const r=e!=="Offline";return(!this.options.Ta||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}la(t){if(t.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(t){t=Xo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==Lg.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(t,e){this.Ia=t,this.byteLength=e}Ea(){return"metadata"in this.Ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(t){this.serializer=t}ps(t){return Si(this.serializer,t)}ys(t){return t.metadata.exists?UA(this.serializer,t.document,!1):ne.newNoDocument(this.ps(t.metadata.name),this.ws(t.metadata.readTime))}ws(t){return Ee(t)}}class EV{constructor(t,e,r){this.da=t,this.localStore=e,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wb(t)}Aa(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.Ia.namedQuery)this.queries.push(t.Ia.namedQuery);else if(t.Ia.documentMetadata){this.documents.push({metadata:t.Ia.documentMetadata}),t.Ia.documentMetadata.exists||++e;const r=Nt.fromString(t.Ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.Ia.document&&(this.documents[this.documents.length-1].document=t.Ia.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Ra(t){const e=new Map,r=new zT(this.serializer);for(const o of t)if(o.metadata.queries){const u=r.ps(o.metadata.name);for(const h of o.metadata.queries){const m=(e.get(h)||wt()).add(u);e.set(h,m)}}return e}async complete(){const t=await KD(this.localStore,new zT(this.serializer),this.documents,this.da.id),e=this.Ra(this.documents);for(const r of this.queries)await QD(this.localStore,r,e.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Va:this.collectionGroups,ma:t}}}function wb(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(t){this.key=t}}class Rb{constructor(t){this.key=t}}class Ib{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=wt(),this.mutatedKeys=wt(),this.ya=pA(t),this.wa=new xo(this.ya)}get Sa(){return this.fa}ba(t,e){const r=e?e.Da:new LT,o=e?e.wa:this.wa;let u=e?e.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal((E,A)=>{const R=o.get(E),P=ec(this.query,A)?A:null,Y=!!R&&this.mutatedKeys.has(R.key),K=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let X=!1;R&&P?R.data.isEqual(P.data)?Y!==K&&(r.track({type:3,doc:P}),X=!0):this.va(R,P)||(r.track({type:2,doc:P}),X=!0,(g&&this.ya(P,g)>0||_&&this.ya(P,_)<0)&&(m=!0)):!R&&P?(r.track({type:0,doc:P}),X=!0):R&&!P&&(r.track({type:1,doc:R}),X=!0,(g||_)&&(m=!0)),X&&(P?(h=h.add(P),u=K?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{wa:h,Da:r,ls:m,mutatedKeys:u}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,o){const u=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const h=t.Da.X_();h.sort((E,A)=>function(P,Y){const K=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return K(P)-K(Y)}(E.type,A.type)||this.ya(E.doc,A.doc)),this.Ca(r),o=o!=null&&o;const m=e&&!o?this.Fa():[],g=this.pa.size===0&&this.current&&!o?1:0,_=g!==this.ga;return this.ga=g,h.length!==0||_?{snapshot:new Xo(this.query,t.wa,u,h,t.mutatedKeys,g===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:m}:{Ma:m}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new LT,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=wt(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const e=[];return t.forEach(r=>{this.pa.has(r)||e.push(new Rb(r))}),this.pa.forEach(r=>{t.has(r)||e.push(new Sb(r))}),e}Oa(t){this.fa=t.gs,this.pa=wt();const e=this.ba(t.documents);return this.applyChanges(e,!0)}Na(){return Xo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Ts="SyncEngine";class TV{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class AV{constructor(t){this.key=t,this.Ba=!1}}class bV{constructor(t,e,r,o,u,h){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.La={},this.ka=new ur(m=>mA(m),tc),this.qa=new Map,this.Qa=new Set,this.$a=new ee(nt.comparator),this.Ka=new Map,this.Ua=new Tp,this.Wa={},this.Ga=new Map,this.za=Ea.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function wV(s,t,e=!0){const r=Pf(s);let o;const u=r.ka.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Na()):o=await Db(r,t,e,!0),o}async function SV(s,t){const e=Pf(s);await Db(e,t,!0,!1)}async function Db(s,t,e,r){const o=await Qo(s.localStore,gn(t)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,e);let m;return r&&(m=await Lp(s,t,u,h==="current",o.resumeToken)),s.isPrimaryClient&&e&&Mf(s.remoteStore,o),m}async function Lp(s,t,e,r,o){s.Ha=(A,R,P)=>async function(K,X,ht,ft){let ut=X.view.ba(ht);ut.ls&&(ut=await gf(K.localStore,X.query,!1).then(({documents:N})=>X.view.ba(N,ut)));const It=ft&&ft.targetChanges.get(X.targetId),gt=ft&&ft.targetMismatches.get(X.targetId)!=null,Et=X.view.applyChanges(ut,K.isPrimaryClient,It,gt);return Ug(K,X.targetId,Et.Ma),Et.snapshot}(s,A,R,P);const u=await gf(s.localStore,t,!0),h=new Ib(t,u.gs),m=h.ba(u.documents),g=rc.createSynthesizedTargetChangeForCurrentChange(e,r&&s.onlineState!=="Offline",o),_=h.applyChanges(m,s.isPrimaryClient,g);Ug(s,e,_.Ma);const E=new TV(t,e,h);return s.ka.set(t,E),s.qa.has(e)?s.qa.get(e).push(t):s.qa.set(e,[t]),_.snapshot}async function RV(s,t,e){const r=it(s),o=r.ka.get(t),u=r.qa.get(o.targetId);if(u.length>1)return r.qa.set(o.targetId,u.filter(h=>!tc(h,t))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Yo(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),e&&$o(r.remoteStore,o.targetId),Zo(r,o.targetId)}).catch(_s)):(Zo(r,o.targetId),await Yo(r.localStore,o.targetId,!0))}async function IV(s,t){const e=it(s),r=e.ka.get(t),o=e.qa.get(r.targetId);e.isPrimaryClient&&o.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),$o(e.remoteStore,r.targetId))}async function DV(s,t,e){const r=qp(s);try{const o=await function(h,m){const g=it(h),_=ae.now(),E=m.reduce((P,Y)=>P.add(Y.key),wt());let A,R;return g.persistence.runTransaction("Locally write mutations","readwrite",P=>{let Y=An(),K=wt();return g.ds.getEntries(P,E).next(X=>{Y=X,Y.forEach((ht,ft)=>{ft.isValidDocument()||(K=K.add(ht))})}).next(()=>g.localDocuments.getOverlayedDocuments(P,Y)).next(X=>{A=X;const ht=[];for(const ft of m){const ut=X1(ft,A.get(ft.key).overlayedDocument);ut!=null&&ht.push(new cr(ft.key,ut,sA(ut.value.mapValue),se.exists(!0)))}return g.mutationQueue.addMutationBatch(P,_,ht,m)}).next(X=>{R=X;const ht=X.applyToLocalDocumentSet(A,K);return g.documentOverlayCache.saveOverlays(P,X.batchId,ht)})}).then(()=>({batchId:R.batchId,changes:yA(A)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),function(h,m,g){let _=h.Wa[h.currentUser.toKey()];_||(_=new ee(At)),_=_.insert(m,g),h.Wa[h.currentUser.toKey()]=_}(r,o.batchId,e),await hr(r,o.changes),await sl(r.remoteStore)}catch(o){const u=ol(o,"Failed to persist write");e.reject(u)}}async function Vb(s,t){const e=it(s);try{const r=await GD(e.localStore,t);t.targetChanges.forEach((o,u)=>{const h=e.Ka.get(u);h&&(ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Ba=!0:o.modifiedDocuments.size>0?ct(h.Ba):o.removedDocuments.size>0&&(ct(h.Ba),h.Ba=!1))}),await hr(e,r,t)}catch(r){await _s(r)}}function qT(s,t,e){const r=it(s);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const o=[];r.ka.forEach((u,h)=>{const m=h.view.sa(t);m.snapshot&&o.push(m.snapshot)}),function(h,m){const g=it(h);g.onlineState=m;let _=!1;g.queries.forEach((E,A)=>{for(const R of A.ta)R.sa(m)&&(_=!0)}),_&&Pp(g)}(r.eventManager,t),o.length&&r.La.p_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function VV(s,t,e){const r=it(s);r.sharedClientState.updateQueryState(t,"rejected",e);const o=r.Ka.get(t),u=o&&o.key;if(u){let h=new ee(nt.comparator);h=h.insert(u,ne.newNoDocument(u,mt.min()));const m=wt().add(u),g=new ic(mt.min(),new Map,new ee(At),h,m);await Vb(r,g),r.$a=r.$a.remove(u),r.Ka.delete(t),zp(r)}else await Yo(r.localStore,t,!1).then(()=>Zo(r,t,e)).catch(_s)}async function CV(s,t){const e=it(s),r=t.batch.batchId;try{const o=await FD(e.localStore,t);Bp(e,r,null),Up(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await hr(e,o)}catch(o){await _s(o)}}async function xV(s,t,e){const r=it(s);try{const o=await function(h,m){const g=it(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return g.mutationQueue.lookupMutationBatch(_,m).next(A=>(ct(A!==null),E=A.keys(),g.mutationQueue.removeMutationBatch(_,A))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>g.localDocuments.getDocuments(_,E))})}(r.localStore,t);Bp(r,t,e),Up(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await hr(r,o)}catch(o){await _s(o)}}async function NV(s,t){const e=it(s);Es(e.remoteStore)||J(Ts,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(h){const m=it(h);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>m.mutationQueue.getHighestUnacknowledgedBatchId(g))}(e.localStore);if(r===rs)return void t.resolve();const o=e.Ga.get(r)||[];o.push(t),e.Ga.set(r,o)}catch(r){const o=ol(r,"Initialization of waitForPendingWrites() operation failed");t.reject(o)}}function Up(s,t){(s.Ga.get(t)||[]).forEach(e=>{e.resolve()}),s.Ga.delete(t)}function Bp(s,t,e){const r=it(s);let o=r.Wa[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(e?u.reject(e):u.resolve(),o=o.remove(t)),r.Wa[r.currentUser.toKey()]=o}}function Zo(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.qa.get(t))s.ka.delete(r),e&&s.La.Ja(r,e);s.qa.delete(t),s.isPrimaryClient&&s.Ua.br(t).forEach(r=>{s.Ua.containsKey(r)||Cb(s,r)})}function Cb(s,t){s.Qa.delete(t.path.canonicalString());const e=s.$a.get(t);e!==null&&($o(s.remoteStore,e),s.$a=s.$a.remove(t),s.Ka.delete(e),zp(s))}function Ug(s,t,e){for(const r of e)r instanceof Sb?(s.Ua.addReference(r.key,t),OV(s,r)):r instanceof Rb?(J(Ts,"Document no longer in limbo: "+r.key),s.Ua.removeReference(r.key,t),s.Ua.containsKey(r.key)||Cb(s,r.key)):st()}function OV(s,t){const e=t.key,r=e.path.canonicalString();s.$a.get(e)||s.Qa.has(r)||(J(Ts,"New document in limbo: "+e),s.Qa.add(r),zp(s))}function zp(s){for(;s.Qa.size>0&&s.$a.size<s.maxConcurrentLimboResolutions;){const t=s.Qa.values().next().value;s.Qa.delete(t);const e=new nt(Nt.fromString(t)),r=s.za.next();s.Ka.set(r,new AV(e)),s.$a=s.$a.insert(e,r),Mf(s.remoteStore,new nr(gn(el(e.path)),r,"TargetPurposeLimboResolution",En.ae))}}async function hr(s,t,e){const r=it(s),o=[],u=[],h=[];r.ka.isEmpty()||(r.ka.forEach((m,g)=>{h.push(r.Ha(g,t,e).then(_=>{var E;if((_||e)&&r.isPrimaryClient){const A=_?!_.fromCache:(E=e==null?void 0:e.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;r.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(_){o.push(_);const A=Sp.Yi(g.targetId,_);u.push(A)}}))}),await Promise.all(h),r.La.p_(o),await async function(g,_){const E=it(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>U.forEach(_,R=>U.forEach(R.Hi,P=>E.persistence.referenceDelegate.addReference(A,R.targetId,P)).next(()=>U.forEach(R.Ji,P=>E.persistence.referenceDelegate.removeReference(A,R.targetId,P)))))}catch(A){if(!ys(A))throw A;J(Rp,"Failed to update sequence numbers: "+A)}for(const A of _){const R=A.targetId;if(!A.fromCache){const P=E.Ts.get(R),Y=P.snapshotVersion,K=P.withLastLimboFreeSnapshotVersion(Y);E.Ts=E.Ts.insert(R,K)}}}(r.localStore,u))}async function MV(s,t){const e=it(s);if(!e.currentUser.isEqual(t)){J(Ts,"User change. New user:",t.toKey());const r=await ob(e.localStore,t);e.currentUser=t,function(u,h){u.Ga.forEach(m=>{m.forEach(g=>{g.reject(new Z(j.CANCELLED,h))})}),u.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await hr(e,r.Rs)}}function PV(s,t){const e=it(s),r=e.Ka.get(t);if(r&&r.Ba)return wt().add(r.key);{let o=wt();const u=e.qa.get(t);if(!u)return o;for(const h of u){const m=e.ka.get(h);o=o.unionWith(m.view.Sa)}return o}}async function kV(s,t){const e=it(s),r=await gf(e.localStore,t.query,!0),o=t.view.Oa(r);return e.isPrimaryClient&&Ug(e,t.targetId,o.Ma),o}async function LV(s,t){const e=it(s);return hb(e.localStore,t).then(r=>hr(e,r))}async function UV(s,t,e,r){const o=it(s),u=await function(m,g){const _=it(m),E=it(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",A=>E.Ln(A,g).next(R=>R?_.localDocuments.getDocuments(A,R):U.resolve(null)))}(o.localStore,t);u!==null?(e==="pending"?await sl(o.remoteStore):e==="acknowledged"||e==="rejected"?(Bp(o,t,r||null),Up(o,t),function(m,g){it(it(m).mutationQueue).qn(g)}(o.localStore,t)):st(),await hr(o,u)):J(Ts,"Cannot apply mutation batch with id: "+t)}async function BV(s,t){const e=it(s);if(Pf(e),qp(e),t===!0&&e.ja!==!0){const r=e.sharedClientState.getAllActiveQueryTargets(),o=await jT(e,r.toArray());e.ja=!0,await kg(e.remoteStore,!0);for(const u of o)Mf(e.remoteStore,u)}else if(t===!1&&e.ja!==!1){const r=[];let o=Promise.resolve();e.qa.forEach((u,h)=>{e.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(Zo(e,h),Yo(e.localStore,h,!0))),$o(e.remoteStore,h)}),await o,await jT(e,r),function(h){const m=it(h);m.Ka.forEach((g,_)=>{$o(m.remoteStore,_)}),m.Ua.Dr(),m.Ka=new Map,m.$a=new ee(nt.comparator)}(e),e.ja=!1,await kg(e.remoteStore,!1)}}async function jT(s,t,e){const r=it(s),o=[],u=[];for(const h of t){let m;const g=r.qa.get(h);if(g&&g.length!==0){m=await Qo(r.localStore,gn(g[0]));for(const _ of g){const E=r.ka.get(_),A=await kV(r,E);A.snapshot&&u.push(A.snapshot)}}else{const _=await cb(r.localStore,h);m=await Qo(r.localStore,_),await Lp(r,xb(_),h,!1,m.resumeToken)}o.push(m)}return r.La.p_(u),o}function xb(s){return dA(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function zV(s){return function(e){return it(it(e).persistence).zi()}(it(s).localStore)}async function qV(s,t,e,r){const o=it(s);if(o.ja)return void J(Ts,"Ignoring unexpected query state notification.");const u=o.qa.get(t);if(u&&u.length>0)switch(e){case"current":case"not-current":{const h=await hb(o.localStore,gA(u[0])),m=ic.createSynthesizedRemoteEventForCurrentChange(t,e==="current",pe.EMPTY_BYTE_STRING);await hr(o,h,m);break}case"rejected":await Yo(o.localStore,t,!0),Zo(o,t,r);break;default:st()}}async function jV(s,t,e){const r=Pf(s);if(r.ja){for(const o of t){if(r.qa.has(o)&&r.sharedClientState.isActiveQueryTarget(o)){J(Ts,"Adding an already active target "+o);continue}const u=await cb(r.localStore,o),h=await Qo(r.localStore,u);await Lp(r,xb(u),h.targetId,!1,h.resumeToken),Mf(r.remoteStore,h)}for(const o of e)r.qa.has(o)&&await Yo(r.localStore,o,!1).then(()=>{$o(r.remoteStore,o),Zo(r,o)}).catch(_s)}}function Pf(s){const t=it(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=Vb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=PV.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=VV.bind(null,t),t.La.p_=_V.bind(null,t.eventManager),t.La.Ja=yV.bind(null,t.eventManager),t}function qp(s){const t=it(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=CV.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xV.bind(null,t),t}function FV(s,t,e){const r=it(s);(async function(u,h,m){try{const g=await h.getMetadata();if(await function(P,Y){const K=it(P),X=Ee(Y.createTime);return K.persistence.runTransaction("hasNewerBundle","readonly",ht=>K.Yr.getBundleMetadata(ht,Y.id)).then(ht=>!!ht&&ht.createTime.compareTo(X)>=0)}(u.localStore,g))return await h.close(),m._completeWith(function(P){return{taskState:"Success",documentsLoaded:P.totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}}(g)),Promise.resolve(new Set);m._updateProgress(wb(g));const _=new EV(g,u.localStore,h.serializer);let E=await h.Ya();for(;E;){const R=await _.Aa(E);R&&m._updateProgress(R),E=await h.Ya()}const A=await _.complete();return await hr(u,A.ma,void 0),await function(P,Y){const K=it(P);return K.persistence.runTransaction("Save bundle","readwrite",X=>K.Yr.saveBundleMetadata(X,Y))}(u.localStore,g),m._completeWith(A.progress),Promise.resolve(A.Va)}catch(g){return Ri(Ts,`Loading bundle failed with ${g}`),m._failWith(g),Promise.resolve(new Set)}})(r,t,e).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}class Hu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=sc(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return ab(this.persistence,new sb,t.initialUser,this.serializer)}Xa(t){return new Ap(Of.ri,this.serializer)}Za(t){return new pb}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hu.provider={build:()=>new Hu};class GV extends Hu{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){ct(this.persistence.referenceDelegate instanceof mf);const r=this.persistence.referenceDelegate.garbageCollector;return new JA(r,t.asyncQueue,e)}Xa(t){const e=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new Ap(r=>mf.ri(r,e),this.serializer)}}class Nb extends Hu{constructor(t,e,r){super(),this.ru=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.ru.initialize(this,t),await qp(this.ru.syncEngine),await sl(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(t){return ab(this.persistence,new sb,t.initialUser,this.serializer)}tu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new JA(r,t.asyncQueue,e)}nu(t,e){const r=new JI(e,this.persistence);return new WI(t.asyncQueue,r)}Xa(t){const e=wp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new bp(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,_b(),$h(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(t){return new pb}}class HV extends Nb{constructor(t,e){super(t,e,!1),this.ru=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.ru.syncEngine;this.sharedClientState instanceof ug&&(this.sharedClientState.syncEngine={uo:UV.bind(null,e),co:qV.bind(null,e),lo:jV.bind(null,e),zi:zV.bind(null,e),ao:LV.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await BV(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(t){const e=_b();if(!ug.D(e))throw new Z(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=wp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new ug(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class Ku{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MV.bind(null,this.syncEngine),await kg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new pV}()}createDatastore(t){const e=sc(t.databaseInfo.databaseId),r=function(u){return new WD(u)}(t.databaseInfo);return function(u,h,m,g){return new nV(u,h,m,g)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,o,u,h,m){return new rV(r,o,u,h,m)}(this.localStore,this.datastore,t.asyncQueue,e=>qT(this.syncEngine,e,0),function(){return MT.D()?new MT:new YD}())}createSyncEngine(t,e){return function(o,u,h,m,g,_,E){const A=new bV(o,u,h,m,g,_);return E&&(A.ja=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(o){const u=it(o);J(Ta,"RemoteStore shutting down."),u.W_.add(5),await rl(u),u.z_.shutdown(),u.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Ku.provider={build:()=>new Ku};function FT(s,t=10240){let e=0;return{async read(){if(e<s.byteLength){const r={value:s.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):ve("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(t,e){this.ou=t,this.serializer=e,this.metadata=new We,this.buffer=new Uint8Array,this._u=function(){return new TextDecoder("utf-8")}(),this.au().then(r=>{r&&r.Ea()?this.metadata.resolve(r.Ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Ia)}`))},r=>this.metadata.reject(r))}close(){return this.ou.cancel()}async getMetadata(){return this.metadata.promise}async Ya(){return await this.getMetadata(),this.au()}async au(){const t=await this.uu();if(t===null)return null;const e=this._u.decode(t),r=Number(e);isNaN(r)&&this.cu(`length string (${e}) is not valid number`);const o=await this.lu(r);return new vV(JSON.parse(o),t.length+r)}hu(){return this.buffer.findIndex(t=>t===123)}async uu(){for(;this.hu()<0&&!await this.Pu(););if(this.buffer.length===0)return null;const t=this.hu();t<0&&this.cu("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async lu(t){for(;this.buffer.length<t;)await this.Pu()&&this.cu("Reached the end of bundle when more is expected.");const e=this._u.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}cu(t){throw this.ou.cancel(),new Error(`Invalid bundle format: ${t}`)}async Pu(){const t=await this.ou.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Z(j.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const e=await async function(o,u){const h=it(o),m={documents:u.map(A=>Fu(h.serializer,A))},g=await h.Co("BatchGetDocuments",h.serializer.databaseId,Nt.emptyPath(),m,u.length),_=new Map;g.forEach(A=>{const R=sD(h.serializer,A);_.set(R.key.toString(),R)});const E=[];return u.forEach(A=>{const R=_.get(A.toString());ct(!!R),E.push(R)}),E}(this.datastore,t);return e.forEach(r=>this.recordVersion(r)),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new il(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((e,r)=>{const o=nt.fromPath(r);this.mutations.push(new fp(o,this.precondition(o)))}),await async function(r,o){const u=it(r),h={writes:o.map(m=>Gu(u.serializer,m))};await u.So("Commit",u.serializer.databaseId,Nt.emptyPath(),h)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw st();e=mt.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new Z(j.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(mt.min())?se.exists(!1):se.updateTime(e):se.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(mt.min()))throw new Z(j.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return se.updateTime(e)}return se.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(t,e,r,o,u){this.asyncQueue=t,this.datastore=e,this.options=r,this.updateFunction=o,this.deferred=u,this.Tu=r.maxAttempts,this.a_=new Dp(this.asyncQueue,"transaction_retry")}Iu(){this.Tu-=1,this.Eu()}Eu(){this.a_.Xo(async()=>{const t=new QV(this.datastore),e=this.du(t);e&&e.then(r=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(r)}).catch(o=>{this.Au(o)}))}).catch(r=>{this.Au(r)})})}du(t){try{const e=this.updateFunction(t);return!Zu(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Au(t){this.Tu>0&&this.Ru(t)?(this.Tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Eu(),Promise.resolve()))):this.deferred.reject(t)}Ru(t){if(t.name==="FirebaseError"){const e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!DA(e)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="FirestoreClient";class $V{constructor(t,e,r,o,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=o,this.user=He.UNAUTHENTICATED,this.clientId=O0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async h=>{J(ms,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(r,h=>(J(ms,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new We;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=ol(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function hg(s,t){s.asyncQueue.verifyOperationInProgress(),J(ms,"Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let r=e.initialUser;s.setCredentialChangeListener(async o=>{r.isEqual(o)||(await ob(t.localStore,o),r=o)}),t.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=t}async function GT(s,t){s.asyncQueue.verifyOperationInProgress();const e=await jp(s);J(ms,"Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener(r=>kT(t.remoteStore,r)),s.setAppCheckTokenChangeListener((r,o)=>kT(t.remoteStore,o)),s._onlineComponents=t}async function jp(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){J(ms,"Using user provided OfflineComponentProvider");try{await hg(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(o){return o.name==="FirebaseError"?o.code===j.FAILED_PRECONDITION||o.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(e))throw e;Ri("Error using user provided cache. Falling back to memory cache: "+e),await hg(s,new Hu)}}else J(ms,"Using default OfflineComponentProvider"),await hg(s,new GV(void 0));return s._offlineComponents}async function Lf(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(J(ms,"Using user provided OnlineComponentProvider"),await GT(s,s._uninitializedComponentsProvider._online)):(J(ms,"Using default OnlineComponentProvider"),await GT(s,new Ku))),s._onlineComponents}function Ob(s){return jp(s).then(t=>t.persistence)}function Fp(s){return jp(s).then(t=>t.localStore)}function Mb(s){return Lf(s).then(t=>t.remoteStore)}function Gp(s){return Lf(s).then(t=>t.syncEngine)}function XV(s){return Lf(s).then(t=>t.datastore)}async function Wo(s){const t=await Lf(s),e=t.eventManager;return e.onListen=wV.bind(null,t.syncEngine),e.onUnlisten=RV.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=SV.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=IV.bind(null,t.syncEngine),e}function ZV(s){return s.asyncQueue.enqueue(async()=>{const t=await Ob(s),e=await Mb(s);return t.setNetworkEnabled(!0),function(o){const u=it(o);return u.W_.delete(0),ac(u)}(e)})}function WV(s){return s.asyncQueue.enqueue(async()=>{const t=await Ob(s),e=await Mb(s);return t.setNetworkEnabled(!1),async function(o){const u=it(o);u.W_.add(0),await rl(u),u.j_.set("Offline")}(e)})}function JV(s,t){const e=new We;return s.asyncQueue.enqueueAndForget(async()=>async function(o,u,h){try{const m=await function(_,E){const A=it(_);return A.persistence.runTransaction("read document","readonly",R=>A.localDocuments.getDocument(R,E))}(o,u);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new Z(j.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const g=ol(m,`Failed to get document '${u} from cache`);h.reject(g)}}(await Fp(s),t,e)),e.promise}function Pb(s,t,e={}){const r=new We;return s.asyncQueue.enqueueAndForget(async()=>function(u,h,m,g,_){const E=new kf({next:R=>{E.su(),h.enqueueAndForget(()=>Mp(u,A));const P=R.docs.has(m);!P&&R.fromCache?_.reject(new Z(j.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&R.fromCache&&g&&g.source==="server"?_.reject(new Z(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(R)},error:R=>_.reject(R)}),A=new kp(el(m.path),E,{includeMetadataChanges:!0,Ta:!0});return Op(u,A)}(await Wo(s),s.asyncQueue,t,e,r)),r.promise}function tC(s,t){const e=new We;return s.asyncQueue.enqueueAndForget(async()=>async function(o,u,h){try{const m=await gf(o,u,!0),g=new Ib(u,m.gs),_=g.ba(m.documents),E=g.applyChanges(_,!1);h.resolve(E.snapshot)}catch(m){const g=ol(m,`Failed to execute query '${u} against cache`);h.reject(g)}}(await Fp(s),t,e)),e.promise}function kb(s,t,e={}){const r=new We;return s.asyncQueue.enqueueAndForget(async()=>function(u,h,m,g,_){const E=new kf({next:R=>{E.su(),h.enqueueAndForget(()=>Mp(u,A)),R.fromCache&&g.source==="server"?_.reject(new Z(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(R)},error:R=>_.reject(R)}),A=new kp(m,E,{includeMetadataChanges:!0,Ta:!0});return Op(u,A)}(await Wo(s),s.asyncQueue,t,e,r)),r.promise}function eC(s,t){const e=new kf(t);return s.asyncQueue.enqueueAndForget(async()=>function(o,u){it(o).ia.add(u),u.next()}(await Wo(s),e)),()=>{e.su(),s.asyncQueue.enqueueAndForget(async()=>function(o,u){it(o).ia.delete(u)}(await Wo(s),e))}}function nC(s,t,e,r){const o=function(h,m){let g;return g=typeof h=="string"?CA().encode(h):h,function(E,A){return new KV(E,A)}(function(E,A){if(E instanceof Uint8Array)return FT(E,A);if(E instanceof ArrayBuffer)return FT(new Uint8Array(E),A);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),m)}(e,sc(t));s.asyncQueue.enqueueAndForget(async()=>{FV(await Gp(s),o,r)})}function iC(s,t){return s.asyncQueue.enqueue(async()=>function(r,o){const u=it(r);return u.persistence.runTransaction("Get named query","readonly",h=>u.Yr.getNamedQuery(h,o))}(await Fp(s),t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(s,t,e){if(!e)throw new Z(j.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function Ub(s,t,e,r){if(t===!0&&r===!0)throw new Z(j.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function KT(s){if(!nt.isDocumentKey(s))throw new Z(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function QT(s){if(nt.isDocumentKey(s))throw new Z(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Uf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":st()}function Gt(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new Z(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Uf(s);throw new Z(j.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}function Bb(s,t){if(t<=0)throw new Z(j.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="firestore.googleapis.com",YT=!0;class $T{constructor(t){var e,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Z(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zb,this.ssl=YT}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:YT;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=$A;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<wD)throw new Z(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Ub("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lb((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new Z(j.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Z(j.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Z(j.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class oc{constructor(t,e,r,o){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $T({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Z(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $T(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jI;switch(r.type){case"firstParty":return new KI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=HT.get(e);r&&(J("ComponentProvider","Removing Datastore"),HT.delete(e),r.terminate())}(this),Promise.resolve()}}function qb(s,t,e,r={}){var o;const u=(s=Gt(s,oc))._getSettings(),h=`${t}:${e}`;if(u.host!==zb&&u.host!==h&&Ri("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},u),{host:h,ssl:!1})),r.mockUserToken){let m,g;if(typeof r.mockUserToken=="string")m=r.mockUserToken,g=He.MOCK_USER;else{m=uR(r.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Z(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new He(_)}s._authCredentials=new FI(new N0(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pn=class jb{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new jb(this.firestore,t,this._query)}},ce=class Fb{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Fb(this.firestore,t,this._key)}},ss=class Gb extends pn{constructor(t,e,r){super(t,e,el(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ce(this.firestore,null,new nt(t))}withConverter(t){return new Gb(this.firestore,t,this._path)}};function Kp(s,t,...e){if(s=De(s),Hp("collection","path",t),s instanceof oc){const r=Nt.fromString(t,...e);return QT(r),new ss(s,null,r)}{if(!(s instanceof ce||s instanceof ss))throw new Z(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Nt.fromString(t,...e));return QT(r),new ss(s.firestore,null,r)}}function rC(s,t){if(s=Gt(s,oc),Hp("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Z(j.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new pn(s,null,function(r){return new lr(Nt.emptyPath(),r)}(t))}function vf(s,t,...e){if(s=De(s),arguments.length===1&&(t=O0.newId()),Hp("doc","path",t),s instanceof oc){const r=Nt.fromString(t,...e);return KT(r),new ce(s,null,new nt(r))}{if(!(s instanceof ce||s instanceof ss))throw new Z(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Nt.fromString(t,...e));return KT(r),new ce(s.firestore,s instanceof ss?s.converter:null,new nt(r))}}function Hb(s,t){return s=De(s),t=De(t),(s instanceof ce||s instanceof ss)&&(t instanceof ce||t instanceof ss)&&s.firestore===t.firestore&&s.path===t.path&&s.converter===t.converter}function Kb(s,t){return s=De(s),t=De(t),s instanceof pn&&t instanceof pn&&s.firestore===t.firestore&&tc(s._query,t._query)&&s.converter===t.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="AsyncQueue";class ZT{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Dp(this,"async_queue_retry"),this.Su=()=>{const r=$h();r&&J(XT,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=t;const e=$h();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=$h();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const e=new We;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!ys(t))throw t;J(XT,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const e=this.bu.then(()=>(this.pu=!0,t().catch(r=>{this.gu=r,this.pu=!1;const o=function(h){let m=h.message||"";return h.stack&&(m=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),m}(r);throw ve("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.pu=!1,r))));return this.bu=e,e}enqueueAfterDelay(t,e,r){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const o=Np.createAndSchedule(this,t,e,r,u=>this.Fu(u));return this.fu.push(o),o}Du(){this.gu&&st()}verifyOperationInProgress(){}async Mu(){let t;do t=this.bu,await t;while(t!==this.bu)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}function Bg(s){return function(e,r){if(typeof e!="object"||e===null)return!1;const o=e;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1}(s,["next","error","complete"])}class sC{constructor(){this._progressObserver={},this._taskCompletionResolver=new We,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=-1;let Te=class extends oc{constructor(t,e,r,o){super(t,e,r,o),this.type="firestore",this._queue=new ZT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new ZT(t),this._firestoreClient=void 0,await t}}};function oC(s,t){const e=typeof s=="object"?s:E0(),r=typeof s=="string"?s:of,o=Yg(e,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=oR("firestore");u&&qb(o,...u)}return o}function an(s){if(s._terminated)throw new Z(j.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||Qb(s),s._firestoreClient}function Qb(s){var t,e,r;const o=s._freezeSettings(),u=function(m,g,_,E){return new D1(m,g,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Lb(E.experimentalLongPollingOptions),E.useFetchStreams)}(s._databaseId,((t=s._app)===null||t===void 0?void 0:t.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((e=o.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new $V(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(s._componentsProvider))}function lC(s,t){Ri("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();return Yb(s,Ku.provider,{build:r=>new Nb(r,e.cacheSizeBytes,t==null?void 0:t.forceOwnership)}),Promise.resolve()}async function uC(s){Ri("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=s._freezeSettings();Yb(s,Ku.provider,{build:e=>new HV(e,t.cacheSizeBytes)})}function Yb(s,t,e){if((s=Gt(s,Te))._firestoreClient||s._terminated)throw new Z(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new Z(j.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:t,_offline:e},Qb(s)}function cC(s){if(s._initialized&&!s._terminated)throw new Z(j.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new We;return s._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!wi.D())return Promise.resolve();const o=r+rb;await wi.delete(o)}(wp(s._databaseId,s._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise}function hC(s){return function(e){const r=new We;return e.asyncQueue.enqueueAndForget(async()=>NV(await Gp(e),r)),r.promise}(an(s=Gt(s,Te)))}function fC(s){return ZV(an(s=Gt(s,Te)))}function dC(s){return WV(an(s=Gt(s,Te)))}function mC(s,t){const e=an(s=Gt(s,Te)),r=new sC;return nC(e,s._databaseId,t,r),r}function gC(s,t){return iC(an(s=Gt(s,Te)),t).then(e=>e?new pn(s,null,e.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Di(pe.fromBase64String(t))}catch(e){throw new Z(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Di(pe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gs=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Z(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new re(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa=class{constructor(t){this._methodName=t}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Z(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Z(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return At(this._lat,t._lat)||At(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=/^__.*__$/;class _C{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new cr(t,this.data,this.fieldMask,e,this.fieldTransforms):new nl(t,this.data,e,this.fieldTransforms)}}class $b{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new cr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Xb(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class zf{constructor(t,e,r,o,u,h){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Bu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new zf(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),o=this.ku({path:r,Qu:!1});return o.$u(t),o}Ku(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),o=this.ku({path:r,Qu:!1});return o.Bu(),o}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return Ef(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(Xb(this.Lu)&&pC.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class yC{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||sc(t)}ju(t,e,r,o=!1){return new zf({Lu:t,methodName:e,zu:r,path:re.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sa(s){const t=s._freezeSettings(),e=sc(s._databaseId);return new yC(s._databaseId,!!t.ignoreUndefinedProperties,e)}function qf(s,t,e,r,o,u={}){const h=s.ju(u.merge||u.mergeFields?2:0,t,e,o);t_("Data must be an object, but it was:",h,r);const m=Jb(r,h);let g,_;if(u.merge)g=new Tn(h.fieldMask),_=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const A of u.mergeFields){const R=zg(t,A,e);if(!h.contains(R))throw new Z(j.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);ew(E,R)||E.push(R)}g=new Tn(E),_=h.fieldTransforms.filter(A=>g.covers(A.field))}else g=null,_=h.fieldTransforms;return new _C(new Ze(m),g,_)}class lc extends wa{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof lc}}function Zb(s,t,e){return new zf({Lu:3,zu:t.settings.zu,methodName:s._methodName,Qu:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Yp extends wa{_toFieldTransform(t){return new nc(t.path,new Go)}isEqual(t){return t instanceof Yp}}class $p extends wa{constructor(t,e){super(t),this.Hu=e}_toFieldTransform(t){const e=Zb(this,t,!0),r=this.Hu.map(u=>Ra(u,e)),o=new pa(r);return new nc(t.path,o)}isEqual(t){return t instanceof $p&&xu(this.Hu,t.Hu)}}class Xp extends wa{constructor(t,e){super(t),this.Hu=e}_toFieldTransform(t){const e=Zb(this,t,!0),r=this.Hu.map(u=>Ra(u,e)),o=new _a(r);return new nc(t.path,o)}isEqual(t){return t instanceof Xp&&xu(this.Hu,t.Hu)}}class Zp extends wa{constructor(t,e){super(t),this.Ju=e}_toFieldTransform(t){const e=new Ho(t.serializer,TA(t.serializer,this.Ju));return new nc(t.path,e)}isEqual(t){return t instanceof Zp&&this.Ju===t.Ju}}function Wp(s,t,e,r){const o=s.ju(1,t,e);t_("Data must be an object, but it was:",o,r);const u=[],h=Ze.empty();vs(r,(g,_)=>{const E=e_(t,g,e);_=De(_);const A=o.Ku(E);if(_ instanceof lc)u.push(E);else{const R=Ra(_,A);R!=null&&(u.push(E),h.set(E,R))}});const m=new Tn(u);return new $b(h,m,o.fieldTransforms)}function Jp(s,t,e,r,o,u){const h=s.ju(1,t,e),m=[zg(t,r,e)],g=[o];if(u.length%2!=0)throw new Z(j.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<u.length;R+=2)m.push(zg(t,u[R])),g.push(u[R+1]);const _=[],E=Ze.empty();for(let R=m.length-1;R>=0;--R)if(!ew(_,m[R])){const P=m[R];let Y=g[R];Y=De(Y);const K=h.Ku(P);if(Y instanceof lc)_.push(P);else{const X=Ra(Y,K);X!=null&&(_.push(P),E.set(P,X))}}const A=new Tn(_);return new $b(E,A,h.fieldTransforms)}function Wb(s,t,e,r=!1){return Ra(e,s.ju(r?4:3,t))}function Ra(s,t){if(tw(s=De(s)))return t_("Unsupported field value:",t,s),Jb(s,t);if(s instanceof wa)return function(r,o){if(!Xb(o.Lu))throw o.Wu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(r,o){const u=[];let h=0;for(const m of r){let g=Ra(m,o.Uu(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}}(s,t)}return function(r,o){if((r=De(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TA(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=ae.fromDate(r);return{timestampValue:Ko(o.serializer,u)}}if(r instanceof ae){const u=new ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ko(o.serializer,u)}}if(r instanceof Bf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Di)return{bytesValue:OA(o.serializer,r._byteString)};if(r instanceof ce){const u=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(u))throw o.Wu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:_p(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Qp)return function(h,m){return{mapValue:{fields:{[ap]:{stringValue:op},[qo]:{arrayValue:{values:h.toArray().map(_=>{if(typeof _!="number")throw m.Wu("VectorValues must only contain numeric values.");return hp(m.serializer,_)})}}}}}}(r,o);throw o.Wu(`Unsupported field value: ${Uf(r)}`)}(s,t)}function Jb(s,t){const e={};return X0(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vs(s,(r,o)=>{const u=Ra(o,t.qu(r));u!=null&&(e[r]=u)}),{mapValue:{fields:e}}}function tw(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ae||s instanceof Bf||s instanceof Di||s instanceof ce||s instanceof wa||s instanceof Qp)}function t_(s,t,e){if(!tw(e)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(e)){const r=Uf(e);throw r==="an object"?t.Wu(s+" a custom object"):t.Wu(s+" "+r)}}function zg(s,t,e){if((t=De(t))instanceof gs)return t._internalPath;if(typeof t=="string")return e_(s,t);throw Ef("Field path arguments must be of type string or ",s,!1,void 0,e)}const vC=new RegExp("[~\\*/\\[\\]]");function e_(s,t,e){if(t.search(vC)>=0)throw Ef(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new gs(...t.split("."))._internalPath}catch{throw Ef(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function Ef(s,t,e,r,o){const u=r&&!r.isEmpty(),h=o!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${r}`),h&&(g+=` in document ${o}`),g+=")"),new Z(j.INVALID_ARGUMENT,m+s+g)}function ew(s,t){return s.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(t,e,r,o,u){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ce(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new EC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(jf("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class EC extends Qu{data(){return super.data()}}function jf(s,t){return typeof t=="string"?e_(s,t):t instanceof gs?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Z(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n_{}class uc extends n_{}function Wr(s,t,...e){let r=[];t instanceof n_&&r.push(t),r=r.concat(e),function(u){const h=u.filter(g=>g instanceof i_).length,m=u.filter(g=>g instanceof Ff).length;if(h>1||h>0&&m>0)throw new Z(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)s=o._apply(s);return s}class Ff extends uc{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new Ff(t,e,r)}_apply(t){const e=this._parse(t);return rw(t._query,e),new pn(t.firestore,t.converter,Rg(t._query,e))}_parse(t){const e=Sa(t.firestore);return function(u,h,m,g,_,E,A){let R;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new Z(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){JT(A,E);const Y=[];for(const K of A)Y.push(WT(g,u,K));R={arrayValue:{values:Y}}}else R=WT(g,u,A)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||JT(A,E),R=Wb(m,h,A,E==="in"||E==="not-in");return Ot.create(_,E,R)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function TC(s,t,e){const r=t,o=jf("where",s);return Ff._create(o,r,e)}class i_ extends n_{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new i_(t,e)}_parse(t){const e=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return e.length===1?e[0]:Yt.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(o,u){let h=o;const m=u.getFlattenedFilters();for(const g of m)rw(h,g),h=Rg(h,g)}(t._query,e),new pn(t.firestore,t.converter,Rg(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class r_ extends uc{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new r_(t,e)}_apply(t){const e=function(o,u,h){if(o.startAt!==null)throw new Z(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Z(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ju(u,h)}(t._query,this._field,this._direction);return new pn(t.firestore,t.converter,function(o,u){const h=o.explicitOrderBy.concat([u]);return new lr(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(t._query,e))}}function AC(s,t="asc"){const e=t,r=jf("orderBy",s);return r_._create(r,e)}class Gf extends uc{constructor(t,e,r){super(),this.type=t,this._limit=e,this._limitType=r}static _create(t,e,r){return new Gf(t,e,r)}_apply(t){return new pn(t.firestore,t.converter,cf(t._query,this._limit,this._limitType))}}function bC(s){return Bb("limit",s),Gf._create("limit",s,"F")}function wC(s){return Bb("limitToLast",s),Gf._create("limitToLast",s,"L")}class Hf extends uc{constructor(t,e,r){super(),this.type=t,this._docOrFields=e,this._inclusive=r}static _create(t,e,r){return new Hf(t,e,r)}_apply(t){const e=iw(t,this.type,this._docOrFields,this._inclusive);return new pn(t.firestore,t.converter,function(o,u){return new lr(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)}(t._query,e))}}function SC(...s){return Hf._create("startAt",s,!0)}function RC(...s){return Hf._create("startAfter",s,!1)}class Kf extends uc{constructor(t,e,r){super(),this.type=t,this._docOrFields=e,this._inclusive=r}static _create(t,e,r){return new Kf(t,e,r)}_apply(t){const e=iw(t,this.type,this._docOrFields,this._inclusive);return new pn(t.firestore,t.converter,function(o,u){return new lr(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)}(t._query,e))}}function IC(...s){return Kf._create("endBefore",s,!1)}function DC(...s){return Kf._create("endAt",s,!0)}function iw(s,t,e,r){if(e[0]=De(e[0]),e[0]instanceof Qu)return function(u,h,m,g,_){if(!g)throw new Z(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const E=[];for(const A of Co(u))if(A.field.isKeyField())E.push(ma(h,g.key));else{const R=g.data.field(A.field);if(Rf(R))throw new Z(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(R===null){const P=A.field.canonicalString();throw new Z(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}E.push(R)}return new fs(E,_)}(s._query,s.firestore._databaseId,t,e[0]._document,r);{const o=Sa(s.firestore);return function(h,m,g,_,E,A){const R=h.explicitOrderBy;if(E.length>R.length)throw new Z(j.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let Y=0;Y<E.length;Y++){const K=E[Y];if(R[Y].field.isKeyField()){if(typeof K!="string")throw new Z(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof K}`);if(!up(h)&&K.indexOf("/")!==-1)throw new Z(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${K}' contains a slash.`);const X=h.path.child(Nt.fromString(K));if(!nt.isDocumentKey(X))throw new Z(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${X}' is not because it contains an odd number of segments.`);const ht=new nt(X);P.push(ma(m,ht))}else{const X=Wb(g,_,K);P.push(X)}}return new fs(P,A)}(s._query,s.firestore._databaseId,o,t,e,r)}}function WT(s,t,e){if(typeof(e=De(e))=="string"){if(e==="")throw new Z(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!up(t)&&e.indexOf("/")!==-1)throw new Z(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(Nt.fromString(e));if(!nt.isDocumentKey(r))throw new Z(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ma(s,new nt(r))}if(e instanceof ce)return ma(s,e._key);throw new Z(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uf(e)}.`)}function JT(s,t){if(!Array.isArray(s)||s.length===0)throw new Z(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function rw(s,t){const e=function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new Z(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Z(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class s_{convertValue(t,e="none"){switch(cs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ie(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ar(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw st()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return vs(t,(o,u)=>{r[o]=this.convertValue(u,e)}),r}convertVectorValue(t){var e,r,o;const u=(o=(r=(e=t.fields)===null||e===void 0?void 0:e[qo].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(h=>ie(h.doubleValue));return new Qp(u)}convertGeoPoint(t){return new Bf(ie(t.latitude),ie(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=If(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Bu(t));default:return null}}convertTimestamp(t){const e=sr(t);return new ae(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Nt.fromString(t);ct(GA(r));const o=new us(r.get(1),r.get(3)),u=new nt(r.popFirst(5));return o.isEqual(e)||ve(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(s,t,e){let r;return r=s?e&&(e.merge||e.mergeFields)?s.toFirestore(t,e):s.toFirestore(t):t,r}class VC extends s_{constructor(t){super(),this.firestore=t}convertBytes(t){return new Di(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ce(this.firestore,null,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}let or=class extends Qu{constructor(t,e,r,o,u,h){super(t,e,r,o,h),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Cu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(jf("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}},Cu=class extends or{data(t={}){return super.data(t)}},ps=class{constructor(t,e,r,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new ca(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new Cu(this._firestore,this._userDataWriter,r.key,r,new ca(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Z(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const g=new Cu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ca(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const g=new Cu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ca(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:CC(m.type),doc:g,oldIndex:_,newIndex:E}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function CC(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function sw(s,t){return s instanceof or&&t instanceof or?s._firestore===t._firestore&&s._key.isEqual(t._key)&&(s._document===null?t._document===null:s._document.isEqual(t._document))&&s._converter===t._converter:s instanceof ps&&t instanceof ps&&s._firestore===t._firestore&&Kb(s.query,t.query)&&s.metadata.isEqual(t.metadata)&&s._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(s){s=Gt(s,ce);const t=Gt(s.firestore,Te);return Pb(an(t),s._key).then(e=>a_(t,s,e))}class Ia extends s_{constructor(t){super(),this.firestore=t}convertBytes(t){return new Di(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ce(this.firestore,null,e)}}function NC(s){s=Gt(s,ce);const t=Gt(s.firestore,Te),e=an(t),r=new Ia(t);return JV(e,s._key).then(o=>new or(t,r,s._key,o,new ca(o!==null&&o.hasLocalMutations,!0),s.converter))}function OC(s){s=Gt(s,ce);const t=Gt(s.firestore,Te);return Pb(an(t),s._key,{source:"server"}).then(e=>a_(t,s,e))}function MC(s){s=Gt(s,pn);const t=Gt(s.firestore,Te),e=an(t),r=new Ia(t);return nw(s._query),kb(e,s._query).then(o=>new ps(t,r,s,o))}function PC(s){s=Gt(s,pn);const t=Gt(s.firestore,Te),e=an(t),r=new Ia(t);return tC(e,s._query).then(o=>new ps(t,r,s,o))}function kC(s){s=Gt(s,pn);const t=Gt(s.firestore,Te),e=an(t),r=new Ia(t);return kb(e,s._query,{source:"server"}).then(o=>new ps(t,r,s,o))}function t0(s,t,e){s=Gt(s,ce);const r=Gt(s.firestore,Te),o=Qf(s.converter,t,e);return cc(r,[qf(Sa(r),"setDoc",s._key,o,s.converter!==null,e).toMutation(s._key,se.none())])}function e0(s,t,e,...r){s=Gt(s,ce);const o=Gt(s.firestore,Te),u=Sa(o);let h;return h=typeof(t=De(t))=="string"||t instanceof gs?Jp(u,"updateDoc",s._key,t,e,r):Wp(u,"updateDoc",s._key,t),cc(o,[h.toMutation(s._key,se.exists(!0))])}function LC(s){return cc(Gt(s.firestore,Te),[new il(s._key,se.none())])}function aw(s,t){const e=Gt(s.firestore,Te),r=vf(s),o=Qf(s.converter,t);return cc(e,[qf(Sa(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,se.exists(!1))]).then(()=>r)}function ow(s,...t){var e,r,o;s=De(s);let u={includeMetadataChanges:!1,source:"default"},h=0;typeof t[h]!="object"||Bg(t[h])||(u=t[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(Bg(t[h])){const A=t[h];t[h]=(e=A.next)===null||e===void 0?void 0:e.bind(A),t[h+1]=(r=A.error)===null||r===void 0?void 0:r.bind(A),t[h+2]=(o=A.complete)===null||o===void 0?void 0:o.bind(A)}let g,_,E;if(s instanceof ce)_=Gt(s.firestore,Te),E=el(s._key.path),g={next:A=>{t[h]&&t[h](a_(_,s,A))},error:t[h+1],complete:t[h+2]};else{const A=Gt(s,pn);_=Gt(A.firestore,Te),E=A._query;const R=new Ia(_);g={next:P=>{t[h]&&t[h](new ps(_,R,A,P))},error:t[h+1],complete:t[h+2]},nw(s._query)}return function(R,P,Y,K){const X=new kf(K),ht=new kp(P,X,Y);return R.asyncQueue.enqueueAndForget(async()=>Op(await Wo(R),ht)),()=>{X.su(),R.asyncQueue.enqueueAndForget(async()=>Mp(await Wo(R),ht))}}(an(_),E,m,g)}function UC(s,t){return eC(an(s=Gt(s,Te)),Bg(t)?t:{next:t})}function cc(s,t){return function(r,o){const u=new We;return r.asyncQueue.enqueueAndForget(async()=>DV(await Gp(r),o,u)),u.promise}(an(s),t)}function a_(s,t,e){const r=e.docs.get(t._key),o=new Ia(s);return new or(s,o,t._key,r,new ca(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zC=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Sa(t)}set(t,e,r){this._verifyNotCommitted();const o=es(t,this._firestore),u=Qf(o.converter,e,r),h=qf(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(h.toMutation(o._key,se.none())),this}update(t,e,r,...o){this._verifyNotCommitted();const u=es(t,this._firestore);let h;return h=typeof(e=De(e))=="string"||e instanceof gs?Jp(this._dataReader,"WriteBatch.update",u._key,e,r,o):Wp(this._dataReader,"WriteBatch.update",u._key,e),this._mutations.push(h.toMutation(u._key,se.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=es(t,this._firestore);return this._mutations=this._mutations.concat(new il(e._key,se.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function es(s,t){if((s=De(s)).firestore!==t)throw new Z(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Sa(t)}get(t){const e=es(t,this._firestore),r=new VC(this._firestore);return this._transaction.lookup([e._key]).then(o=>{if(!o||o.length!==1)return st();const u=o[0];if(u.isFoundDocument())return new Qu(this._firestore,r,u.key,u,e.converter);if(u.isNoDocument())return new Qu(this._firestore,r,e._key,null,e.converter);throw st()})}set(t,e,r){const o=es(t,this._firestore),u=Qf(o.converter,e,r),h=qf(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,r);return this._transaction.set(o._key,h),this}update(t,e,r,...o){const u=es(t,this._firestore);let h;return h=typeof(e=De(e))=="string"||e instanceof gs?Jp(this._dataReader,"Transaction.update",u._key,e,r,o):Wp(this._dataReader,"Transaction.update",u._key,e),this._transaction.update(u._key,h),this}delete(t){const e=es(t,this._firestore);return this._transaction.delete(e._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jC=class extends qC{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=es(t,this._firestore),r=new Ia(this._firestore);return super.get(t).then(o=>new or(this._firestore,r,e._key,o._document,new ca(!1,!1),e.converter))}};function FC(s,t,e){s=Gt(s,Te);const r=Object.assign(Object.assign({},BC),e);return function(u){if(u.maxAttempts<1)throw new Z(j.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(u,h,m){const g=new We;return u.asyncQueue.enqueueAndForget(async()=>{const _=await XV(u);new YV(u.asyncQueue,_,m,h,g).Iu()}),g.promise}(an(s),o=>t(new jC(s,o)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(){return new lc("deleteField")}function HC(){return new Yp("serverTimestamp")}function KC(...s){return new $p("arrayUnion",s)}function QC(...s){return new Xp("arrayRemove",s)}function YC(s){return new Zp("increment",s)}(function(t,e=!0){(function(o){tl=o})($g),Mo(new da("firestore",(r,{instanceIdentifier:o,options:u})=>{const h=r.getProvider("app").getImmediate(),m=new Te(new GI(r.getProvider("auth-internal")),new QI(h,r.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new Z(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new us(_.options.projectId,E)}(h,o),h);return u=Object.assign({useFetchStreams:e},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),ir(OE,ME,t),ir(OE,ME,"esm2017")})();const $C="@firebase/firestore-compat",XC="0.3.43";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(s,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new Z("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(){if(typeof Uint8Array>"u")throw new Z("unimplemented","Uint8Arrays are not available in this environment.")}function i0(){if(!R1())throw new Z("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Yu{constructor(t){this._delegate=t}static fromBase64String(t){return i0(),new Yu(Di.fromBase64String(t))}static fromUint8Array(t){return n0(),new Yu(Di.fromUint8Array(t))}toBase64(){return i0(),this._delegate.toBase64()}toUint8Array(){return n0(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(s){return ZC(s,["next","error","complete"])}function ZC(s,t){if(typeof s!="object"||s===null)return!1;const e=s;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{enableIndexedDbPersistence(t,e){return lC(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return uC(t._delegate)}clearIndexedDbPersistence(t){return cC(t._delegate)}}class lw{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof us||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Ri("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},e),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,r={}){qb(this._delegate,t,e,r)}enableNetwork(){return fC(this._delegate)}disableNetwork(){return dC(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,Ub("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return hC(this._delegate)}onSnapshotsInSync(t){return UC(this._delegate,t)}get app(){if(!this._appCompat)throw new Z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Jo(this,Kp(this._delegate,t))}catch(e){throw mn(e,"collection()","Firestore.collection()")}}doc(t){try{return new $n(this,vf(this._delegate,t))}catch(e){throw mn(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new dn(this,rC(this._delegate,t))}catch(e){throw mn(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return FC(this._delegate,e=>t(new uw(this,e)))}batch(){return an(this._delegate),new cw(new zC(this._delegate,t=>cc(this._delegate,t)))}loadBundle(t){return mC(this._delegate,t)}namedQuery(t){return gC(this._delegate,t).then(e=>e?new dn(this,e):null)}}class Yf extends s_{constructor(t){super(),this.firestore=t}convertBytes(t){return new Yu(new Di(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return $n.forKey(e,this.firestore,null)}}function JC(s){zI(s)}class uw{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Yf(t)}get(t){const e=ha(t);return this._delegate.get(e).then(r=>new $u(this._firestore,new or(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const o=ha(t);return r?(o_("Transaction.set",r),this._delegate.set(o,e,r)):this._delegate.set(o,e),this}update(t,e,r,...o){const u=ha(t);return arguments.length===2?this._delegate.update(u,e):this._delegate.update(u,e,r,...o),this}delete(t){const e=ha(t);return this._delegate.delete(e),this}}class cw{constructor(t){this._delegate=t}set(t,e,r){const o=ha(t);return r?(o_("WriteBatch.set",r),this._delegate.set(o,e,r)):this._delegate.set(o,e),this}update(t,e,r,...o){const u=ha(t);return arguments.length===2?this._delegate.update(u,e):this._delegate.update(u,e,r,...o),this}delete(t){const e=ha(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Aa{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new Cu(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Xu(this._firestore,r),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=Aa.INSTANCES;let o=r.get(t);o||(o=new WeakMap,r.set(t,o));let u=o.get(e);return u||(u=new Aa(t,new Yf(t),e),o.set(e,u)),u}}Aa.INSTANCES=new WeakMap;class $n{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Yf(t)}static forPath(t,e,r){if(t.length%2!==0)throw new Z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new $n(e,new ce(e._delegate,r,new nt(t)))}static forKey(t,e,r){return new $n(e,new ce(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new Jo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Jo(this.firestore,Kp(this._delegate,t))}catch(e){throw mn(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=De(t),t instanceof ce?Hb(this._delegate,t):!1}set(t,e){e=o_("DocumentReference.set",e);try{return e?t0(this._delegate,t,e):t0(this._delegate,t)}catch(r){throw mn(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return arguments.length===1?e0(this._delegate,t):e0(this._delegate,t,e,...r)}catch(o){throw mn(o,"updateDoc()","DocumentReference.update()")}}delete(){return LC(this._delegate)}onSnapshot(...t){const e=hw(t),r=fw(t,o=>new $u(this.firestore,new or(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return ow(this._delegate,e,r)}get(t){let e;return(t==null?void 0:t.source)==="cache"?e=NC(this._delegate):(t==null?void 0:t.source)==="server"?e=OC(this._delegate):e=xC(this._delegate),e.then(r=>new $u(this.firestore,new or(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new $n(this.firestore,t?this._delegate.withConverter(Aa.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function mn(s,t,e){return s.message=s.message.replace(t,e),s}function hw(s){for(const t of s)if(typeof t=="object"&&!qg(t))return t;return{}}function fw(s,t){var e,r;let o;return qg(s[0])?o=s[0]:qg(s[1])?o=s[1]:typeof s[0]=="function"?o={next:s[0],error:s[1],complete:s[2]}:o={next:s[1],error:s[2],complete:s[3]},{next:u=>{o.next&&o.next(t(u))},error:(e=o.error)===null||e===void 0?void 0:e.bind(o),complete:(r=o.complete)===null||r===void 0?void 0:r.bind(o)}}class $u{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new $n(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return sw(this._delegate,t._delegate)}}class Xu extends $u{data(t){const e=this._delegate.data(t);return this._delegate._converter||qI(e!==void 0),e}}class dn{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Yf(t)}where(t,e,r){try{return new dn(this.firestore,Wr(this._delegate,TC(t,e,r)))}catch(o){throw mn(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new dn(this.firestore,Wr(this._delegate,AC(t,e)))}catch(r){throw mn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new dn(this.firestore,Wr(this._delegate,bC(t)))}catch(e){throw mn(e,"limit()","Query.limit()")}}limitToLast(t){try{return new dn(this.firestore,Wr(this._delegate,wC(t)))}catch(e){throw mn(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new dn(this.firestore,Wr(this._delegate,SC(...t)))}catch(e){throw mn(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new dn(this.firestore,Wr(this._delegate,RC(...t)))}catch(e){throw mn(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new dn(this.firestore,Wr(this._delegate,IC(...t)))}catch(e){throw mn(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new dn(this.firestore,Wr(this._delegate,DC(...t)))}catch(e){throw mn(e,"endAt()","Query.endAt()")}}isEqual(t){return Kb(this._delegate,t._delegate)}get(t){let e;return(t==null?void 0:t.source)==="cache"?e=PC(this._delegate):(t==null?void 0:t.source)==="server"?e=kC(this._delegate):e=MC(this._delegate),e.then(r=>new jg(this.firestore,new ps(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=hw(t),r=fw(t,o=>new jg(this.firestore,new ps(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return ow(this._delegate,e,r)}withConverter(t){return new dn(this.firestore,t?this._delegate.withConverter(Aa.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class t2{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new Xu(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jg{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new dn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Xu(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new t2(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new Xu(this._firestore,r))})}isEqual(t){return sw(this._delegate,t._delegate)}}class Jo extends dn{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new $n(this.firestore,t):null}doc(t){try{return t===void 0?new $n(this.firestore,vf(this._delegate)):new $n(this.firestore,vf(this._delegate,t))}catch(e){throw mn(e,"doc()","CollectionReference.doc()")}}add(t){return aw(this._delegate,t).then(e=>new $n(this.firestore,e))}isEqual(t){return Hb(this._delegate,t._delegate)}withConverter(t){return new Jo(this.firestore,t?this._delegate.withConverter(Aa.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function ha(s){return Gt(s,ce)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(...t){this._delegate=new gs(...t)}static documentId(){return new l_(re.keyField().canonicalString())}isEqual(t){return t=De(t),t instanceof gs?this._delegate._internalPath.isEqual(t._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{static serverTimestamp(){const t=HC();return t._methodName="FieldValue.serverTimestamp",new la(t)}static delete(){const t=GC();return t._methodName="FieldValue.delete",new la(t)}static arrayUnion(...t){const e=KC(...t);return e._methodName="FieldValue.arrayUnion",new la(e)}static arrayRemove(...t){const e=QC(...t);return e._methodName="FieldValue.arrayRemove",new la(e)}static increment(t){const e=YC(t);return e._methodName="FieldValue.increment",new la(e)}constructor(t){this._delegate=t}isEqual(t){return this._delegate.isEqual(t._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2={Firestore:lw,GeoPoint:Bf,Timestamp:ae,Blob:Yu,Transaction:uw,WriteBatch:cw,DocumentReference:$n,DocumentSnapshot:$u,Query:dn,QueryDocumentSnapshot:Xu,QuerySnapshot:jg,CollectionReference:Jo,FieldPath:l_,FieldValue:la,setLogLevel:JC,CACHE_SIZE_UNLIMITED:aC};function n2(s,t){s.INTERNAL.registerComponent(new da("firestore-compat",e=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("firestore").getImmediate();return t(r,o)},"PUBLIC").setServiceProps(Object.assign({},e2)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(s){n2(s,(t,e)=>new lw(t,e,new WC)),s.registerVersion($C,XC)}i2(Wg);const r2=Wg.initializeApp({apiKey:"AIzaSyBHgG4mwWSEUBLPS1p2XFtaC8GwPIv2xN8",authDomain:"arquidiocesishermosillo-776dd.firebaseapp.com",projectId:"arquidiocesishermosillo-776dd",storageBucket:"arquidiocesishermosillo-776dd.appspot.com",messagingSenderId:"767127814821",appId:"1:767127814821:web:6c159d62075bcd1271c34c"}),s2=oC(r2);function a2(){const s=K=>{console.log(K);const X=Kp(s2,"Demos");aw(X,K).then(ht=>{console.log(ht)}).catch(ht=>{console.log("saveDemos Error"),console.log(ht)})},[t,e]=Nh.useState(!0),[r,o]=Nh.useState({name:"",parroquia:"",direccion:"",correo:"",numero:""});console.log(r);const{name:u,parroquia:h,direccion:m,correo:g,numero:_}=r,E=K=>{o({...r,[K.target.name]:K.target.value})},[A,R]=Nh.useState(!0),P=window.innerWidth;Nh.useEffect(()=>{P<999&&(R(!1),console.log("menor a 999 !!!!!!!!!"))},[A]),console.log(P,A);const Y=K=>{K.preventDefault(),r.idDate=Date.now(),s(r),o({name:"",parroquia:"",direccion:"",correo:"",numero:""}),e(!t)};return H.jsx(H.Fragment,{children:H.jsxs("header",{children:[A?H.jsx("img",{src:YS}):H.jsx("img",{src:$S}),H.jsx("br",{}),H.jsx("br",{}),H.jsx("br",{})," ",H.jsx("br",{}),H.jsx("p",{children:"Solicita tus Credenciales para Usar Respalder Parroquial Gratis !!"}),H.jsx("p",{children:"Un Servicio de Respaldo y Ordenamiento de los Documentos de la Parroquia "}),H.jsx("p",{children:"Simplifica la Gestin Administrativa de los Documentos Religiosos"}),H.jsx("br",{}),H.jsx("input",{type:"button",className:"btnEnviar",value:"Solicitar Cuenta Gratis",onClick:()=>e(!t)}),H.jsx("br",{})," ",H.jsx("br",{}),H.jsx("lite-youtube",{videoid:"ZNJ9fFANRa8"}),H.jsx("br",{})," ",H.jsx("br",{}),H.jsx("h2",{children:"-- GALERIA DE PLANES --"}),H.jsx("br",{}),"   ",H.jsx("br",{}),H.jsx(WS,{}),H.jsx("br",{}),"   ",H.jsx("br",{}),H.jsx("input",{type:"button",className:"btnEnviar",value:"Solicitar Cuenta Gratis",onClick:()=>e(!t)}),H.jsx("div",{className:"",children:A?H.jsx("img",{src:XS}):H.jsx("img",{src:ZS})}),H.jsxs("form",{onSubmit:Y,className:t?"contactForm outModal":"contactForm inModal ",children:[H.jsx("input",{type:"button",value:"Cancelar ",className:"btnCerrar",onClick:()=>e(!t)}),H.jsx("h3",{className:"tituloEnviar",children:"ENVIAR SOLICITUD DE CUENTA"}),H.jsx("input",{type:"text",placeholder:"Nombre",name:"name",onChange:K=>E(K)}),H.jsx("input",{type:"text",placeholder:"Nombre de La Parroquia",name:"parroquia",onChange:K=>E(K)}),H.jsx("input",{type:"text",placeholder:"Direccin",name:"direccion",onChange:K=>E(K)}),H.jsx("input",{type:"email",placeholder:"@ Correo",name:"correo",onChange:K=>E(K)}),H.jsx("input",{type:"number",placeholder:"# Numero de Contacto (opcional)",name:"numero",onChange:K=>E(K)}),H.jsx("input",{type:"submit",className:"btnEnviar",value:"Enviar"})]})]})})}function o2(){return H.jsxs("div",{className:"containerApp",children:[H.jsx(a2,{}),H.jsx(QS,{})]})}KS.createRoot(document.getElementById("root")).render(H.jsx(o2,{}));
